window.__require=function e(t,o,n){function i(a,c){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AES:[function(e,t,o){"use strict";cc._RF.push(t,"a8574L2byhNxZgSqKOjs1Vn","AES");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.AES=void 0;var r=e("../lib/BlockCipher"),a=[],c=[],s=[],l=[],u=[],p=[],d=[],f=[],h=[],y=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var o=0,n=0;for(t=0;t<256;t++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^255&i^99,a[o]=i,c[i]=o;var r=e[o],g=e[r],_=e[g],v=257*e[i]^16843008*i;s[o]=v<<24|v>>>8,l[o]=v<<16|v>>>16,u[o]=v<<8|v>>>24,p[o]=v,v=16843009*_^65537*g^257*r^16843008*o,d[i]=v<<24|v>>>8,f[i]=v<<16|v>>>16,h[i]=v<<8|v>>>24,y[i]=v,o?(o=r^e[e[e[_^r]]],n^=e[e[n]]):o=n=1}})();var g=[0,1,2,4,8,16,32,64,128,27,54],_=function(e){function t(t,o,n){return e.call(this,t,o,n)||this}return i(t,e),t.prototype.reset=function(){if(e.prototype.reset.call(this),!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,o=t.words,n=t.sigBytes/4,i=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],c=0;c<i;c++)if(c<n)r[c]=o[c];else{var s=r[c-1];c%n?n>6&&c%n==4&&(s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s]):(s=a[(s=s<<8|s>>>24)>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s],s^=g[c/n|0]<<24),r[c]=r[c-n]^s}for(var l=this._invKeySchedule=[],u=0;u<i;u++)c=i-u,s=void 0,s=u%4?r[c]:r[c-4],l[u]=u<4||c<=4?s:d[a[s>>>24]]^f[a[s>>>16&255]]^h[a[s>>>8&255]]^y[a[255&s]]}},t.prototype.encryptBlock=function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,l,u,p,a)},t.prototype.decryptBlock=function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,d,f,h,y,c),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},t.prototype._doCryptBlock=function(e,t,o,n,i,r,a,c){for(var s=e[t]^o[0],l=e[t+1]^o[1],u=e[t+2]^o[2],p=e[t+3]^o[3],d=4,f=1;f<this._nRounds;f++){var h=n[s>>>24]^i[l>>>16&255]^r[u>>>8&255]^a[255&p]^o[d++],y=n[l>>>24]^i[u>>>16&255]^r[p>>>8&255]^a[255&s]^o[d++],g=n[u>>>24]^i[p>>>16&255]^r[s>>>8&255]^a[255&l]^o[d++],_=n[p>>>24]^i[s>>>16&255]^r[l>>>8&255]^a[255&u]^o[d++];s=h,l=y,u=g,p=_}var v=(c[s>>>24]<<24|c[l>>>16&255]<<16|c[u>>>8&255]<<8|c[255&p])^o[d++],m=(c[l>>>24]<<24|c[u>>>16&255]<<16|c[p>>>8&255]<<8|c[255&s])^o[d++],b=(c[u>>>24]<<24|c[p>>>16&255]<<16|c[s>>>8&255]<<8|c[255&l])^o[d++],C=(c[p>>>24]<<24|c[s>>>16&255]<<16|c[l>>>8&255]<<8|c[255&u])^o[d++];e[t]=v,e[t+1]=m,e[t+2]=b,e[t+3]=C},t.keySize=8,t}(r.BlockCipher);o.AES=_,cc._RF.pop()},{"../lib/BlockCipher":"BlockCipher"}],ActiveBox:[function(e,t,o){"use strict";cc._RF.push(t,"7db68c+jzVO2bWlPO6OJ3A6","ActiveBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator.requireComponent,c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetNode=null,t.once=!0,t.listEvents=[],t}return i(t,e),t.prototype.start=function(){this.node.opacity=0},t.prototype.onCollisionEnter=function(e){cc.log("ActiveBox "+e.node.name),e.node===this.targetNode&&(cc.Component.EventHandler.emitEvents(this.listEvents),this.once&&(this.node.active=!1))},r([l(cc.Node)],t.prototype,"targetNode",void 0),r([l(cc.Boolean)],t.prototype,"once",void 0),r([l([cc.Component.EventHandler])],t.prototype,"listEvents",void 0),r([s,a(cc.BoxCollider)],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],ActiveFun:[function(e,t,o){"use strict";cc._RF.push(t,"2ca293bvCBCyJyFHvJJqHxD","ActiveFun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.show=function(){this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},r([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],AnimalTrap:[function(e,t,o){"use strict";cc._RF.push(t,"5ba79GkRv1ArLGnAL+dJxNV","AnimalTrap");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.activeAnim="Attack",t.idleAnim="Idle",t.isActive=!1,t}return i(t,e),t.prototype.onLoad=function(){this.skeleton.setAnimation(0,this.idleAnim,!0)},t.prototype.trapActive=function(){if(!this.isActive)return this.skeleton.setAnimation(0,this.activeAnim,!1),this.isActive=!0,void(this.node.getComponent(cc.BoxCollider).enabled=!1)},t.prototype.onCollisionEnter=function(){},r([s(sp.Skeleton)],t.prototype,"skeleton",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ArrayUtil:[function(e,t,o){"use strict";cc._RF.push(t,"28273v0gFZBtJL9nAz3j17h","ArrayUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./MathUtil"),i=function(){function e(){}return e.shuffle=function(e){var t,o,n;for(n=e.length;n;n--)t=Math.floor(Math.random()*n),o=e[n-1],e[n-1]=e[t],e[t]=o},e.maxOf=function(e,t){void 0===t&&(t=function(e,t){return e>t});for(var o=e[0],n=1;n<e.length;n++)t(e[n],o)&&(o=e[n]);return o},e.getShuffleArray=function(e){for(var t,o,n=e.length;0!==n;)o=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[o],e[o]=t;return e},e.removeElement=function(e,t){var o=e.indexOf(t);o>-1&&e.splice(o,1)},e.removeElements=function(e,t){t.forEach(function(t){this.removeElement(e,t)}.bind(this))},e.moveElementFromTo=function(e,t,o){var n=e.length;n<2||t<0||o<0||t>n-1||o>n-1||t===o||e.splice(o,0,e.splice(t,1)[0])},e.swapElement=function(e,t,o){if(t!==o){var n=e[t];e[t]=e[o],e[o]=n}},e.swapRandomElement=function(e){var t=e.length;if(!(t<2))for(var o=0;o<t;o++){var n=void 0;do{n=Math.floor(Math.random()*t)}while(o===n);this.swapElement(e,o,n)}},e.prototype.count=function(e,t){var o=0;return e.forEach(function(e){t(e)&&o++}),o},e.prototype.sortAscending_CardUIArray=function(e){e.sort(function(e,t){return e.id-t.id})},e.prototype.sortGroup_CardUIArray=function(t){e.shuffle(t)},e.prototype.indexOfMax=function(e,t){void 0===t&&(t=function(e,t){return e>t});for(var o=0,n=1;n<e.length;n++)t(e[n],e[o])&&(o=n);return o},e.prototype.firstIndexOf=function(e,t){for(var o=0;o<e.length;o++)if(t(e[o]))return o;return-1},e.prototype.lastIndexOf=function(e,t){for(var o=e.length-1;o>=0;o--)if(t(e[o]))return o;return-1},e.sumOf=function(e){return e.reduce(function(e,t){return e+t})},e.isStringInNoUpperLowerDistinguish=function(e,t){for(var o=e.toLowerCase(),n=0;n<t.length;n++)t[n]=t[n].toLowerCase();return t.indexOf(o)>=0},e.getRandomTwoSwapIndex=function(e){var t=n.default.randomInt(e),o=n.default.randomInt(e);return t===o&&((o+=1)===e&&(o-=2),o=o>=0?o:0),{first:t,sec:o}},e.findMaxLessThan=function(e,t,o){void 0===o&&(o=1);for(var n=e.length-1;n>0;n--)if(e[n]*o<=t)return n;return-1},e.getClone2DArray=function(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o].slice(0));return t},e.getClone1DArray=function(e){return[].concat(e)},e.get2DArrayOf1D=function(e,t){for(var o=[],n=Math.floor(e.length/t),i=0;i<n;i++){for(var r=[],a=i*t,c=a+t,s=a;s<c;s++)r.push(e[s]);o.push(r)}return o},e.concatNoDuplicate=function(e,t){for(var o=[].concat(e),n=0;n<t.length;n++)o.indexOf(t[n])<0&&o.push(t[n]);return o},e.getValue=function(e,t,o){return""===e[t]||null===e[t]||void 0===e[t]?o:e[t]},e}();o.default=i,cc._RF.pop()},{"./MathUtil":"MathUtil"}],AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"4fd31cuiKBAkI896NGa51Ca","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../plugins/fb/FBInstantData"),i=function(){function e(){}return Object.defineProperty(e,"RealMusicVolume",{get:function(){return e._MusicEnable?e._MusicVolume:0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"RealEffectVolume",{get:function(){return e._EffectEnable?e._EffectVolume:0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MusicVolume",{get:function(){return e._MusicVolume},set:function(t){e._MusicVolume=t,e.arrAudioPlayer.forEach(function(e){e.setMusicVolume(t)})},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EffectVolume",{get:function(){return e._EffectVolume},set:function(t){e._EffectVolume=t,e.arrAudioPlayer.forEach(function(e){e.setEffectVolume(t)})},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EffectEnable",{get:function(){return n.FBInstantData.getData(["sound_effect"],function(t){e._EffectEnable=t.sound_effect},null),e._EffectEnable},set:function(t){e._EffectEnable=t,n.FBInstantData.setData({sound_effect:e._EffectEnable});var o=t?e._EffectVolume:0;e.arrAudioPlayer.forEach(function(e){e.setEffectVolume(o)})},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MusicEnable",{get:function(){return n.FBInstantData.getData(["sound_music"],function(t){e._MusicEnable=t.sound_music},null),e._MusicEnable},set:function(t){e._MusicEnable=t,n.FBInstantData.setData({sound_music:e._MusicEnable});var o=t?e._MusicVolume:0;e.arrAudioPlayer.forEach(function(e){e.setMusicVolume(o)})},enumerable:!1,configurable:!0}),e.add=function(t){e.arrAudioPlayer.push(t)},e.remove=function(t){var o=e.arrAudioPlayer.indexOf(t);-1!==o&&e.arrAudioPlayer.splice(o,1)},e._MusicVolume=1,e._EffectVolume=1,e._MusicEnable=!0,e._EffectEnable=!0,e.arrAudioPlayer=[],e}();o.default=i,cc._RF.pop()},{"../../plugins/fb/FBInstantData":"FBInstantData"}],AudioPlayId:[function(e,t,o){"use strict";cc._RF.push(t,"64605gIrJdCDoFRiN/cHV+6","AudioPlayId"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioPlayId=void 0,function(e){e[e.none=0]="none",e[e.home_music=1]="home_music",e[e.game_play_music=2]="game_play_music",e[e.button_click=20]="button_click",e[e.button_open=21]="button_open",e[e.game_lose=22]="game_lose",e[e.game_win=23]="game_win",e[e.boss_crying=50]="boss_crying",e[e.boss_die=51]="boss_die",e[e.boss_take_stick=52]="boss_take_stick",e[e.boss_die_fire=53]="boss_die_fire",e[e.boss_jump_win=54]="boss_jump_win",e[e.boss_super_attack=55]="boss_super_attack",e[e.boss_stick_attack=56]="boss_stick_attack",e[e.stealer_attack=60]="stealer_attack",e[e.stealer_die=61]="stealer_die",e[e.demon_punch=62]="demon_punch",e[e.dog_bite=70]="dog_bite",e[e.dog_die=71]="dog_die",e[e.dragon_die=80]="dragon_die",e[e.dragon_fire=81]="dragon_fire",e[e.dragon_fire_ball=82]="dragon_fire_ball",e[e.girl_die=90]="girl_die",e[e.girl_help=91]="girl_help",e[e.effect_lava_appear=100]="effect_lava_appear",e[e.effect_lava_x_water=101]="effect_lava_x_water",e[e.effect_rock1=102]="effect_rock1",e[e.effect_gems=103]="effect_gems",e[e.stick_block=150]="stick_block",e[e.stick_move=151]="stick_move",e[e.rope_cut=152]="rope_cut",e[e.shoot=153]="shoot",e[e.chest_open=154]="chest_open",e[e.ghoster_attack=170]="ghoster_attack",e[e.ghoster_die=171]="ghoster_die",e[e.castle_background=180]="castle_background",e[e.effect_build=181]="effect_build"}(o.AudioPlayId||(o.AudioPlayId={})),cc._RF.pop()},{}],AudioPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"9bfc9UVsnVBHbXGh3Z4oKcE","AudioPlayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.AudioPlay=o.AudioObject=void 0;var a=e("./AudioManager"),c=e("../../config/AudioPlayId"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(){function e(){this.name=c.AudioPlayId.none,this.audioClip=null,this.isMusic=!1}return r([u({type:cc.Enum(c.AudioPlayId)})],e.prototype,"name",void 0),r([u({type:cc.AudioClip})],e.prototype,"audioClip",void 0),r([u(cc.Boolean)],e.prototype,"isMusic",void 0),r([l("AudioObject")],e)}();o.AudioObject=p;var d=function(e,t,o){this.audioId=e,this.volume=t,this.isMusic=o};o.AudioPlay=d;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arrayAudioObj=[],t.maps=null,t.arrayMusic=[],t.arrayEffect=[],t}return i(t,e),t.prototype.playAudio=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=1);var n,i=this.getAudioObject(e);if(!i)return cc.error("playAudio: "+e),null;if(i.isMusic){var r=cc.audioEngine.play(i.audioClip,t,o*a.default.RealMusicVolume);n=new d(r,o,!0),this.arrayMusic.push(n)}else r=cc.audioEngine.play(i.audioClip,t,o*a.default.RealEffectVolume),n=new d(r,o,!1),this.arrayEffect.push(n);return n},t.prototype.stopAudioPlay=function(e){var t;e.isMusic?-1!==(t=this.arrayMusic.indexOf(e))&&(cc.audioEngine.stop(e.audioId),this.arrayMusic.splice(t,1)):-1!==(t=this.arrayEffect.indexOf(e))&&(cc.audioEngine.stop(e.audioId),this.arrayEffect.splice(t,1))},t.prototype.setAudioPlayVolume=function(e,t){e.volume=t,e.isMusic?cc.audioEngine.setVolume(e.audioId,t*a.default.RealMusicVolume):cc.audioEngine.setVolume(e.audioId,t*a.default.RealEffectVolume)},t.prototype.setVolume=function(e){this.setMusicVolume(e),this.setEffectVolume(e)},t.prototype.setMusicVolume=function(e){this.arrayMusic.forEach(function(t){cc.audioEngine.setVolume(t.audioId,t.volume*e)})},t.prototype.setEffectVolume=function(e){this.arrayEffect.forEach(function(t){cc.audioEngine.setVolume(t.audioId,t.volume*e)})},t.prototype.stopAllAudio=function(){this.stopAllEffect(),this.stopAllMusic()},t.prototype.stopAllMusic=function(){this.arrayMusic.forEach(function(e){cc.audioEngine.stop(e.audioId)}),this.arrayMusic=[]},t.prototype.stopAllEffect=function(){this.arrayEffect.forEach(function(e){cc.audioEngine.stop(e.audioId)}),this.arrayEffect=[]},t.prototype.getAudioObject=function(e){return this.maps||this.initMaps(),this.maps.get(e)},t.prototype.initMaps=function(){var e=this;this.maps=new Map,this.arrayAudioObj.forEach(function(t){e.maps.set(t.name,t)})},t.prototype.onLoad=function(){a.default.add(this)},t.prototype.onDestroy=function(){a.default.remove(this),this.stopAllAudio()},r([u([p])],t.prototype,"arrayAudioObj",void 0),r([l],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../config/AudioPlayId":"AudioPlayId","./AudioManager":"AudioManager"}],BackgroundLoader:[function(e,t,o){"use strict";cc._RF.push(t,"0ca53y9yWNEqKSKCjv53pUd","BackgroundLoader"),Object.defineProperty(o,"__esModule",{value:!0}),o.BackgroundLoader=void 0;var n=e("./config/GlobalSignals"),i=function(){function e(){}return e.removeTask=function(e){var t=this.tasks.indexOf(e);-1!=t&&this.tasks.splice(t,1),n.GlobalSignals.bgLoaderCompleted.dispatch()},e.addTask=function(e){var t=this;if(this.tasks.length>0){var o=this.tasks[this.tasks.length-1];o._completeCallback=function(){t.removeTask(o),e._callback()}}else e._callback();e._completeCallback=function(){t.removeTask(e)},this.tasks.push(e)},e.tasks=[],e}();o.BackgroundLoader=i,cc._RF.pop()},{"./config/GlobalSignals":"GlobalSignals"}],Base64:[function(e,t,o){"use strict";cc._RF.push(t,"fe7d21qbyVDDayHyj4vq4II","Base64"),Object.defineProperty(o,"__esModule",{value:!0}),o.Base64=void 0;var n=e("../lib/WordArray"),i=function(){function e(){}return e.stringify=function(e){e.clamp();for(var t=[],o=0;o<e.sigBytes;o+=3)for(var n=(e.words[o>>>2]>>>24-o%4*8&255)<<16|(e.words[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e.words[o+2>>>2]>>>24-(o+2)%4*8&255,i=0;i<4&&o+.75*i<e.sigBytes;i++)t.push(this._map.charAt(n>>>6*(3-i)&63));var r=this._map.charAt(64);if(r)for(;t.length%4;)t.push(r);return t.join("")},e.parse=function(e){var t=e.length;if(void 0===this._reverseMap){this._reverseMap=[];for(var o=0;o<this._map.length;o++)this._reverseMap[this._map.charCodeAt(o)]=o}var n=this._map.charAt(64);if(n){var i=e.indexOf(n);-1!==i&&(t=i)}return this.parseLoop(e,t,this._reverseMap)},e.parseLoop=function(e,t,o){for(var i=[],r=0,a=0;a<t;a++)if(a%4){var c=o[e.charCodeAt(a-1)]<<a%4*2,s=o[e.charCodeAt(a)]>>>6-a%4*2;i[r>>>2]|=(c|s)<<24-r%4*8,r++}return new n.WordArray(i,r)},e._map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e._reverseMap=void 0,e}();o.Base64=i,cc._RF.pop()},{"../lib/WordArray":"WordArray"}],Base:[function(e,t,o){"use strict";cc._RF.push(t,"6e617383w5PTrGEqN772dO6","Base"),Object.defineProperty(o,"__esModule",{value:!0}),o.Base=void 0;o.Base=function(){},cc._RF.pop()},{}],BgCustom:[function(e,t,o){"use strict";cc._RF.push(t,"ef321x83CVHx4biknCbwagX","BgCustom");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../base/utils/MathUtil"),c=e("../config/GlobalSignals"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listBgCustom=[],t.sp=null,t}return i(t,e),t.prototype.onLoad=function(){this.sp=this.node.getComponent(cc.Sprite)},t.prototype.onEnable=function(){this._onNextLevel=this.onNextLevel.bind(this),this.onNextLevel(),c.GlobalSignals.nextLevelSignal.add(this._onNextLevel)},t.prototype.onDisable=function(){c.GlobalSignals.nextLevelSignal.remove(this._onNextLevel)},t.prototype.onNextLevel=function(){var e=a.default.randomInt(this.listBgCustom.length);this.sp.spriteFrame=this.listBgCustom[e]},r([u([cc.SpriteFrame])],t.prototype,"listBgCustom",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../base/utils/MathUtil":"MathUtil","../config/GlobalSignals":"GlobalSignals"}],BigBang:[function(e,t,o){"use strict";cc._RF.push(t,"4b544/S0+VBi7Mf5oLI8B72","BigBang");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../MainScene"),c=e("../../config/AudioPlayId"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeAttack=.5,t.hitAttack=null,t.bumPrefab=null,t}return i(t,e),t.prototype.onEnable=function(){var e=this;this.scheduleOnce(function(){e.hitAttack.removeComponent(cc.CircleCollider),e.node.removeFromParent()},this.timeAttack),this.showBumEffect()},t.prototype.showBumEffect=function(){var e=cc.instantiate(this.bumPrefab);e.setPosition(this.node.getPosition()),e.scale=.66,this.node.getParent().addChild(e),a.default.instance.audioPlayer.playAudio(c.AudioPlayId.dragon_fire_ball),cc.tween(e).delay(2).call(function(){e.removeFromParent()}).start()},r([u(cc.Float)],t.prototype,"timeAttack",void 0),r([u(cc.Node)],t.prototype,"hitAttack",void 0),r([u(cc.Prefab)],t.prototype,"bumPrefab",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../MainScene":"MainScene","../../config/AudioPlayId":"AudioPlayId"}],BigFoot:[function(e,t,o){"use strict";cc._RF.push(t,"864ccLfh25I9J9aT7cExWE3","BigFoot");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Enemies"),c=e("../../../config/AudioPlayId"),s=e("../../../MainScene"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.playAttack=function(t){e.prototype.playAttack.call(this,t),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_attack)},t.prototype.onDieIce=function(){e.prototype.onDieIce.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},t.prototype.onDieNormal=function(){e.prototype.onDieNormal.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},t.prototype.onDieFire=function(){e.prototype.onDieFire.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},r([u],t)}(a.default));o.default=p,cc._RF.pop()},{"../../../MainScene":"MainScene","../../../config/AudioPlayId":"AudioPlayId","./Enemies":"Enemies"}],BigStone:[function(e,t,o){"use strict";cc._RF.push(t,"ae47diI/DNKZ6oYDkVlYShG","BigStone");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=e("../../MainScene"),s=e("../../config/AudioPlayId"),l=e("../../config/PhysicsConfig"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){l.PhysicsConfig.initPhysicConfig(this.node,"big_stone")},t.prototype.onCollisionEnter=function(e){e.node.group!==a.GroupConfig.BERRIE&&e.node.group!==a.GroupConfig.ROCK||c.default.instance.audioPlayer.playAudio(s.AudioPlayId.effect_rock1)},r([p],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../MainScene":"MainScene","../../config/AudioPlayId":"AudioPlayId","../../config/GroupConfig":"GroupConfig","../../config/PhysicsConfig":"PhysicsConfig"}],BlockCipherModeAlgorithm:[function(e,t,o){"use strict";cc._RF.push(t,"215dcJ9eM1NZ5FV34H+5WBP","BlockCipherModeAlgorithm"),Object.defineProperty(o,"__esModule",{value:!0}),o.BlockCipherModeAlgorithm=void 0;var n=function(){function e(e,t){this.init(e,t)}return e.prototype.init=function(e,t){this._cipher=e,this._iv=t},e}();o.BlockCipherModeAlgorithm=n,cc._RF.pop()},{}],BlockCipherMode:[function(e,t,o){"use strict";cc._RF.push(t,"2ccb35VwFBIlZEfT5t0TZkz","BlockCipherMode"),Object.defineProperty(o,"__esModule",{value:!0}),o.BlockCipherMode=void 0;var n=e("./BlockCipherModeAlgorithm"),i=function(){function e(){}return e.createEncryptor=function(e,t){return new(0,this.Encryptor)(e,t)},e.createDecryptor=function(e,t){return new(0,this.Decryptor)(e,t)},e.Encryptor=n.BlockCipherModeAlgorithm,e.Decryptor=n.BlockCipherModeAlgorithm,e}();o.BlockCipherMode=i,cc._RF.pop()},{"./BlockCipherModeAlgorithm":"BlockCipherModeAlgorithm"}],BlockCipher:[function(e,t,o){"use strict";cc._RF.push(t,"5c4e1pBgXZCvKCvVYX8KbUO","BlockCipher");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BlockCipher=void 0;var r=e("./Cipher"),a=e("../mode/CBC"),c=e("../pad/PKCS7"),s=function(e){function t(t,o,n){return e.call(this,t,o,Object.assign({blockSize:4,mode:a.CBC,padding:c.PKCS7},n))||this}return i(t,e),t.prototype.reset=function(){if(e.prototype.reset.call(this),void 0===this.cfg.mode)throw new Error("missing mode in config");var t;this._xformMode===this.constructor._ENC_XFORM_MODE?t=this.cfg.mode.createEncryptor:(t=this.cfg.mode.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator===t?this._mode.init(this,this.cfg.iv&&this.cfg.iv.words):(this._mode=t.call(this.cfg.mode,this,this.cfg.iv&&this.cfg.iv.words),this._mode.__creator=t)},t.prototype._doProcessBlock=function(e,t){this._mode.processBlock(e,t)},t.prototype._doFinalize=function(){if(void 0===this.cfg.padding)throw new Error("missing padding in config");var e;if(this._xformMode===this.constructor._ENC_XFORM_MODE){if(void 0===this.cfg.blockSize)throw new Error("missing blockSize in config");this.cfg.padding.pad(this._data,this.cfg.blockSize),e=this._process(!0)}else e=this._process(!0),this.cfg.padding.unpad(e);return e},t}(r.Cipher);o.BlockCipher=s,cc._RF.pop()},{"../mode/CBC":"CBC","../pad/PKCS7":"PKCS7","./Cipher":"Cipher"}],Bomb:[function(e,t,o){"use strict";cc._RF.push(t,"27a9fLgW7hIIrOK0rr5oTkV","Bomb");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=e("../../config/PhysicsConfig"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bigBangPrefab=null,t}return i(t,e),t.prototype.onLoad=function(){c.PhysicsConfig.initPhysicConfig(this.node,"bomb")},t.prototype.onCollisionEnter=function(e){e.node.group!==a.GroupConfig.CHARACTER&&e.node.group!==a.GroupConfig.BERRIE&&e.node.group!==a.GroupConfig.ROCK||this.attack()},t.prototype.attack=function(){this.node.removeComponent(cc.PhysicsCollider),this.node.removeComponent(cc.CircleCollider);var e=cc.instantiate(this.bigBangPrefab),t=this.node.getParent().getParent();e.position=t.convertToNodeSpaceAR(this.node.getParent().convertToWorldSpaceAR(this.node.position)),t.addChild(e),this.node.removeFromParent()},r([u(cc.Prefab)],t.prototype,"bigBangPrefab",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../config/GroupConfig":"GroupConfig","../../config/PhysicsConfig":"PhysicsConfig"}],BoomTimer:[function(e,t,o){"use strict";cc._RF.push(t,"fee23MC2HFFDLNhRTVmxvj7","BoomTimer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=e("../../config/PhysicsConfig"),s=e("./Bomb"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blastRadius=0,t.onSwitch=!1,t}return i(t,e),t.prototype.onLoad=function(){c.PhysicsConfig.initPhysicConfig(this.node,"boom_timer")},t.prototype.onCollisionEnter=function(e){e.node.group!==a.GroupConfig.CHARACTER&&e.node.group!==a.GroupConfig.BERRIE&&e.node.group!==a.GroupConfig.ROCK||(this.node.getComponent(cc.CircleCollider).radius=this.blastRadius)},t.prototype.detonActivation=function(){var e=this;this.node.getComponentInChildren(cc.Sprite).node.active=!1;var t=cc.instantiate(this.bigBangPrefab),o=this.node.getParent().getParent();t.position=o.convertToNodeSpaceAR(this.node.getParent().convertToWorldSpaceAR(this.node.position)),o.addChild(t),this.schedule(function(){e.node.removeComponent(cc.PhysicsCollider),e.node.removeComponent(cc.CircleCollider),e.node.removeFromParent(),o.getChildByName(t.name).active=!1},0,1,.4)},r([p(cc.Integer)],t.prototype,"blastRadius",void 0),r([u],t)}(s.default);o.default=d,cc._RF.pop()},{"../../config/GroupConfig":"GroupConfig","../../config/PhysicsConfig":"PhysicsConfig","./Bomb":"Bomb"}],Boss:[function(e,t,o){"use strict";cc._RF.push(t,"ce935JmeGhBwKF+5C9yvUHZ","Boss");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../config/GlobalSignals"),c=e("../../../config/GroupConfig"),s=e("../Character"),l=e("../../../base/ColliderCallback"),u=e("../../../config/TagObject"),p=e("../hostage/Girl"),d=e("../../../level/MapLevel"),f=e("../../../config/GameState"),h=e("../../more/ItemLoot"),y=e("../../../config/AudioPlayId"),g=e("../../../MainScene"),_=e("../../more/ItemChest"),v=e("../../../config/SkinConfig"),m=e("../../../GameData"),b=e("../../../base/utils/GUIUtil"),C=e("../../../pets/PetDataManager"),P=cc._decorator,S=P.ccclass,k=P.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sitAnim="open ( k kiem)",t.winAnim="win",t.failAnim="die2",t.failAnim1="die3",t.openLockAnim="open ( k kiem)",t.rewardAnim="Lixi",t.flowerAnim="Flower",t.flowerAnim2="quy goi",t.stickSkin="Base/kiem",t.idleStickAnim="idle",t.superSkin="Songoku",t.superAppearAnim="SuperAppear",t.superAttackAnim="SuperAttack",t.superIdleAnim="SuperIdle",t.superWinAnim="SuperWin",t.superOpenLockAnim="SuperChest",t.superFlowerAnim="SuperFlower",t.superFlowerAnim2="SuperFlower2",t.superRunAnim="SuperFly",t.attackAnim="attack (kiem)",t.jumpCollider=null,t.hit2=null,t.isAutoMove=!1,t}var o;return i(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._instance=this,e.prototype.onLoad.call(this),this.initBossSkin(),this.initPetSkin()},t.prototype.initBossSkin=function(){var e=v.SkinConfig.getSkinNameById(m.GameData.currentSkinBoss);e.split("/")[0],this.changeSkin(e);var t=v.SkinConfig.getSkinConfigById(m.GameData.currentSkinBoss);b.default.ativeSkinFeatureIfHave(t,this.node),this.stickSkin=t.stickName},t.prototype.initPetSkin=function(){m.GameData.CurrentPet&&b.default.addPetForCharacter(this.node,cc.v3(-39,0,0))},t.prototype.start=function(){this.hit.active=!1,this.hit2&&(this.hit2.active=!1),this.jumpCollider.setColliderCallback(this.onJumpCollider.bind(this))},t.prototype.onEnable=function(){this._onQuestFail=this.onQuestFail.bind(this),this._onQuestPass=this.onQuestPass.bind(this),this._onCollectGems=this.onCollectGems.bind(this),this._onAutoMove=this.onAutoMove.bind(this),a.GlobalSignals.questPassSignal.add(this._onQuestPass),a.GlobalSignals.questFailSignal.add(this._onQuestFail),a.GlobalSignals.collectGemsSignal.add(this._onCollectGems),a.GlobalSignals.autoMoveSignal.add(this._onAutoMove)},t.prototype.onDisable=function(){a.GlobalSignals.questPassSignal.remove(this._onQuestPass),a.GlobalSignals.questFailSignal.remove(this._onQuestFail),a.GlobalSignals.collectGemsSignal.remove(this._onCollectGems),a.GlobalSignals.autoMoveSignal.remove(this._onAutoMove)},t.prototype.onDestroy=function(){o._instance=null,this.unscheduleAllCallbacks()},t.prototype.onCollectGems=function(){this.stopMove(),this.playAnimation(this.sitAnim);var e=this.skeleton.findAnimation(this.sitAnim).duration;this.scheduleOnce(function(){d.default.instance.gameState!=f.GameState.LOSE&&a.GlobalSignals.questPassSignal.dispatch()},e)},t.prototype.onQuestPass=function(){this.isAlive&&(d.default.instance.isQuestSaveHostage||(this.playAnimation(this.winAnim,!0),g.default.instance.audioPlayer.playAudio(y.AudioPlayId.boss_jump_win)))},t.prototype.onQuestFail=function(){this.stopMove(),this.isAlive&&(this.playAnimation(this.failAnim).addAnimation(this.failAnim1,!0),g.default.instance.audioPlayer.playAudio(y.AudioPlayId.boss_crying))},t.prototype.onAutoMove=function(){var e=this;this.isAutoMove=!0,this.isAlive&&this.isGround&&d.default.instance.isPlaying&&(this.isAutoMove=!1,this.runToTarget(null),this.jumpCollider.node.active=!1,this.scheduleOnce(function(){e.jumpCollider.node.active=!0},.2))},t.prototype.walkToTarget=function(e){this.isSuper?this.moveToTarget(e,this.superRunAnim):this.moveToTarget(e,this.walkAnim)},t.prototype.onBodyColliderStay=function(e){this.isAlive&&e.node.group===c.GroupConfig.COLLIDER&&e.node.name==u.TagConfig.BOOM_TIMER&&1==e.node.getComponent("BoomTimer").onSwitch&&this.onDieNormal()},t.prototype.onGroundCollisionEnter=function(t){e.prototype.onGroundCollisionEnter.call(this,t),this.isAutoMove&&this.isAlive&&this.isGround&&d.default.instance.isPlaying&&(this.isAutoMove=!1,this.runToTarget(null))},t.prototype.onHeadCollider=function(e){if(this.isAlive&&this.getCurrentSkin()!==this.superSkin){if(e.node.group===c.GroupConfig.ROCK)return this.onDieNormal(),void this.disablePhysicsBody();if(e.node.group===c.GroupConfig.ITEM&&e.node.name==u.TagConfig.HOLY_WATER){try{e.node.removeComponent(cc.PhysicsCollider),e.node.removeComponent(cc.BoxCollider),e.node.removeFromParent()}catch(t){cc.warn(t)}return this.stopMove(),void this.changeSkinToSuperman()}}},t.prototype.onBodyCollider=function(e){if(this.isAlive&&d.default.instance.isPlaying)if(e.node.group!==c.GroupConfig.GEMS){if(this.getCurrentSkin()!==this.superSkin)if(e.node.group!==c.GroupConfig.LAVA)if(e.node.group!==c.GroupConfig.SNOW){if(e.node.group===c.GroupConfig.COLLIDER){if(e.node.name==u.TagConfig.REDIRECT_RIGHT)return void this.moveRight(this.runAnim);if(e.node.name==u.TagConfig.REDIRECT_LEFT)return void this.moveLeft(this.runAnim);if(e.node.name==u.TagConfig.REDIRECT_STOP)return void this.stopMove();if(e.node.name==u.TagConfig.BOMB)return void this.onDieNormal();(e.node.name==u.TagConfig.GAS||e.node.name==u.TagConfig.BOMB||e.node.name==u.TagConfig.HIT&&e.node!=this.hit)&&this.onDieNormal()}if(e.node.group===c.GroupConfig.ITEM&&e.node.name==u.TagConfig.HOLY_WATER){try{e.node.removeComponent(cc.PhysicsCollider),e.node.removeComponent(cc.BoxCollider),e.node.removeFromParent()}catch(t){cc.warn(t)}return this.stopMove(),void this.changeSkinToSuperman()}}else this.onDieIce();else this.onDieFire()}else d.default.instance.countGemsCollected++},t.prototype.onAttackCollider=function(e){var t=this;if(this.isAlive&&d.default.instance.isPlaying){if(e.node.group===c.GroupConfig.ITEM){if(e.node.name==u.TagConfig.STICK){cc.log("Boss onAttackCollider: STICK = "+e.node.name),a.GlobalSignals.bossAttackSignal.dispatch();try{e.node.removeComponent(cc.PhysicsCollider),e.node.removeComponent(cc.BoxCollider),e.node.removeFromParent()}catch(i){cc.warn(i)}return this.stopMove(),void this.changeSkinToStickBoss()}if(e.node.name==u.TagConfig.ITEM){if(cc.log("Boss onAttackCollider: ITEM = "+e.node.name),a.GlobalSignals.bossAttackSignal.dispatch(),!(n=e.node.getComponent(h.default)))return void cc.error("item is null");this.stopMove(),this.rotateFaceToTarget(e.node),this.playAnimation(this.openLockAnim),n.openItem(),g.default.instance.audioPlayer.playAudio(y.AudioPlayId.chest_open);var o=this.skeleton.findAnimation(this.openLockAnim).duration;return void this.scheduleOnce(function(){d.default.instance.isPlaying&&d.default.instance.isQuestCollectItem&&a.GlobalSignals.questPassSignal.dispatch()},o)}var n;if(e.node.name==u.TagConfig.CHEST)return a.GlobalSignals.bossAttackSignal.dispatch(),cc.log("Boss onAttackCollider: ITEM = "+e.node.name),(n=e.node.getComponent(_.default))?(this.stopMove(),this.rotateFaceToTarget(e.node),this.playAnimation(this.openLockAnim),n.openItem(),g.default.instance.audioPlayer.playAudio(y.AudioPlayId.chest_open),o=this.skeleton.findAnimation(this.openLockAnim).duration,void this.scheduleOnce(function(){t.isAlive&&d.default.instance.isPlaying&&(d.default.instance.isCollectGems=!0,a.GlobalSignals.collectGemsSignal.dispatch(),t.scheduleOnce(function(){t.isAlive&&d.default.instance.isPlaying&&(d.default.instance.gameState=f.GameState.WIN,d.default.instance.isPlaying&&d.default.instance.isQuestOpenChest&&a.GlobalSignals.questPassSignal.dispatch())},1.5))},o)):void cc.error("item is null")}return e.node.group===c.GroupConfig.CHARACTER?e.node.name==u.TagConfig.GIRL||e.node.name==u.TagConfig.GIRL_WONDER?(a.GlobalSignals.bossAttackSignal.dispatch(),void this.rescueTheGirl(e.node)):this.getCurrentSkin()===this.stickSkin&&(a.GlobalSignals.bossAttackSignal.dispatch(),e.node.name==u.TagConfig.STEALER)?void this.playAttack(e.node):this.isSuper&&(a.GlobalSignals.bossAttackSignal.dispatch(),e.node.name==u.TagConfig.DRAGON||e.node.name==u.TagConfig.STEALER||e.node.name==u.TagConfig.DEMON||e.node.name==u.TagConfig.DOG||e.node.name==u.TagConfig.GHOSTER)?void this.playAttack(e.node):void 0:void 0}},t.prototype.onJumpCollider=function(e){this.isAlive&&this.isGround&&e.node.group===c.GroupConfig.BERRIE&&(cc.log("Boss onJumpCollider"),this.moveJump())},t.prototype.onSearchCollider=function(e){if(this.isAlive&&d.default.instance.isPlaying)if(e.node.name!=u.TagConfig.GIRL){if(e.node.group!=c.GroupConfig.ITEM)return e.node.group===c.GroupConfig.CHARACTER&&e.node!=this.node?this.getCurrentSkin()!==this.stickSkin&&this.getCurrentSkin()!==this.superSkin||e.node.name!=u.TagConfig.STEALER&&e.node.name!=u.TagConfig.DEMON&&e.node.name!=u.TagConfig.DOG?void 0:(a.GlobalSignals.bossWalkToTargetSignal.dispatch(),void this.walkToTarget(e.node)):void 0;if(e.node.name==u.TagConfig.ITEM){var t=this;this.scheduleOnce(function(){t.runToTarget(e.node)},1)}if(e.node.name==u.TagConfig.HOLY_WATER){var o=this;this.scheduleOnce(function(){e.node&&o.runToTarget(e.node)},1)}e.node.name==u.TagConfig.STICK&&e.node&&this.runToTarget(e.node)}else this.runToTarget(e.node)},t.prototype.playAttack=function(e){var t=this;this.rotateFaceToTarget(e);var o=this;this.isSuper?(this.playAnimation(this.superAttackAnim),g.default.instance.audioPlayer.playAudio(y.AudioPlayId.boss_super_attack)):(this.playAnimation(this.attackAnim),g.default.instance.audioPlayer.playAudio(y.AudioPlayId.boss_stick_attack)),this.stopMove(),this.scheduleOnce(function(){t.hit.active=!0,t.hit2&&(t.hit2.active=!0)},.35),this.skeleton.setCompleteListener(function(){d.default.instance.isPlaying&&(t.skeleton.setCompleteListener(null),t.isSuper?t.playAnimation(t.superIdleAnim,!0):t.playAnimation(t.idleStickAnim,!0),t.hit.active=!1,t.hit2&&(t.hit2.active=!1),t.stopMove(),o.scheduleOnce(function(){o.searchCollider.refreshPingToTarget()},.1))})},t.prototype.changeSkinToStickBoss=function(){var e=this;this.changeSkin(this.stickSkin),this.playAnimation(this.idleStickAnim,!0),this.attackCollider.node.getComponent(cc.BoxCollider).size.width+=40,g.default.instance.audioPlayer.playAudio(y.AudioPlayId.boss_take_stick);var t=this.groundCollider.node.getComponent(u.default);t&&(t.setTag(u.TagConfig.BOSS_STICK),cc.log("changeSkinToStickBoss")),this.scheduleOnce(function(){e.searchCollider.refreshPingToTarget()},.1)},t.prototype.changeSkinToSuperman=function(){this.isSuper=!0,this.changeSkin(this.superSkin),this.playAnimation(this.superAppearAnim).addAnimation(this.superIdleAnim,!0);var e=this.skeleton.findAnimation(this.superAppearAnim).duration;cc.tween(this.skeleton.node).by(e,{position:new cc.Vec3(0,20,0)}).start(),this.attackCollider.node.getComponent(cc.BoxCollider).size.width+=40,this.hit.getComponent(cc.BoxCollider).size.width+=50,this.hit.getComponent(cc.BoxCollider).size.height+=50,this.hit2&&(this.hit2.getComponent(cc.BoxCollider).size.width+=50,this.hit2.getComponent(cc.BoxCollider).size.height+=50),g.default.instance.audioPlayer.playAudio(y.AudioPlayId.boss_take_stick);var t=this.groundCollider.node.getComponent(u.default);t&&t.setTag(u.TagConfig.BOSS_SUPER)},t.prototype.rescueTheGirl=function(e){var t=this,o=e.getParent().getParent().getComponent(p.default);if(o){this.stopMove(),cc.log("Boss: rotateFaceToTarget"),this.rotateFaceToTarget(e);var n=C.PetDataManager.pickRandomAEgg();this.getCurrentSkin()===this.superSkin?this.playAnimation(this.superOpenLockAnim).addAnimation(this.superWinAnim,!0):n?this.playAnimation(this.openLockAnim):this.playAnimation(this.openLockAnim).addAnimation(this.flowerAnim2,!0),this.scheduleOnce(function(){d.default.instance.isPlaying&&a.GlobalSignals.questPassSignal.dispatch()},3);var i=this.skeleton.findAnimation(this.openLockAnim).duration;this.scheduleOnce(function(){o.isAlive&&(n?o.playAnimationGiveEgg(t.node,n,function(){t.isAlive&&t.playAnimation(t.rewardAnim,!0)}):o.playOutAnimation(t.node))},i)}else cc.error("girl is null")},t.prototype.onDieNormal=function(){this.stopMove(),this.stun.node.active=!0,this.playAnimation(this.dieAnim),this.isAlive=!1,a.GlobalSignals.questFailSignal.dispatch(),g.default.instance.audioPlayer.playAudio(y.AudioPlayId.boss_die)},t.prototype.onDieFire=function(){this.stopMove(),this.stun.node.active=!0,this.playAnimation(this.dieFireAnim),this.isAlive=!1,a.GlobalSignals.questFailSignal.dispatch(),g.default.instance.audioPlayer.playAudio(y.AudioPlayId.boss_die_fire)},t.prototype.onDieIce=function(){this.stopMove(),this.stun.node.active=!0,this.playAnimation(this.dieIceAnim),this.isAlive=!1,a.GlobalSignals.questFailSignal.dispatch(),g.default.instance.audioPlayer.playAudio(y.AudioPlayId.boss_die)},t.prototype.stopMove=function(){e.prototype.stopMove.call(this),this.isAutoMove=!1},t._instance=null,r([k({override:!0})],t.prototype,"attackAnim",void 0),r([k(l.default)],t.prototype,"jumpCollider",void 0),r([k(cc.Node)],t.prototype,"hit2",void 0),o=r([S],t)}(s.default);o.default=O,cc._RF.pop()},{"../../../GameData":"GameData","../../../MainScene":"MainScene","../../../base/ColliderCallback":"ColliderCallback","../../../base/utils/GUIUtil":"GUIUtil","../../../config/AudioPlayId":"AudioPlayId","../../../config/GameState":"GameState","../../../config/GlobalSignals":"GlobalSignals","../../../config/GroupConfig":"GroupConfig","../../../config/SkinConfig":"SkinConfig","../../../config/TagObject":"TagObject","../../../level/MapLevel":"MapLevel","../../../pets/PetDataManager":"PetDataManager","../../more/ItemChest":"ItemChest","../../more/ItemLoot":"ItemLoot","../Character":"Character","../hostage/Girl":"Girl"}],BufferedBlockAlgorithmConfig:[function(e,t,o){"use strict";cc._RF.push(t,"bcd7aXTUztHaIlBMuneitvv","BufferedBlockAlgorithmConfig"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],BufferedBlockAlgorithm:[function(e,t,o){"use strict";cc._RF.push(t,"4389exlQERFmIkVyMSSB/Ub","BufferedBlockAlgorithm"),Object.defineProperty(o,"__esModule",{value:!0}),o.BufferedBlockAlgorithm=void 0;var n=e("../lib/WordArray"),i=e("../enc/Utf8"),r=function(){function e(e){this._minBufferSize=0,this.cfg=Object.assign({blockSize:1},e),this._data=new n.WordArray,this._nDataBytes=0}return e.prototype.reset=function(){this._data=new n.WordArray,this._nDataBytes=0},e.prototype._append=function(e){"string"==typeof e&&(e=i.Utf8.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},e.prototype._process=function(e){if(!this.cfg.blockSize)throw new Error("missing blockSize in config");var t,o=4*this.cfg.blockSize,i=this._data.sigBytes/o,r=(i=e?Math.ceil(i):Math.max((0|i)-this._minBufferSize,0))*this.cfg.blockSize,a=Math.min(4*r,this._data.sigBytes);if(r){for(var c=0;c<r;c+=this.cfg.blockSize)this._doProcessBlock(this._data.words,c);t=this._data.words.splice(0,r),this._data.sigBytes-=a}return new n.WordArray(t,a)},e.prototype.clone=function(){var e=this.constructor();for(var t in this)this.hasOwnProperty(t)&&(e[t]=this[t]);return e._data=this._data.clone(),e},e}();o.BufferedBlockAlgorithm=r,cc._RF.pop()},{"../enc/Utf8":"Utf8","../lib/WordArray":"WordArray"}],BuildHousePopup:[function(e,t,o){"use strict";cc._RF.push(t,"7e7e3zz44BHvoOZ5MjnesS3","BuildHousePopup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./HouseItem"),c=e("../GameData"),s=e("./KingdomBuilder"),l=e("../ResUtil"),u=e("../CastleScreen"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=null,t.itemPrefab=null,t.arrayItem=[],t.currentKingdom="",t}return i(t,e),t.prototype.onEnable=function(){this.loadKingdomBuilder(u.default.instance.visibleKingdom)},t.prototype.loadKingdomBuilder=function(e){var t=this;cc.log("setCurrentKingdom: "+e),this.currentKingdom!==e?(this.currentKingdom=e,l.ResUtil.loadKingdomBuilderByName(e,function(e){var o=cc.instantiate(e).getComponent(s.default);o&&(t.initKingdomBuilder(o),t.reloadData())})):this.reloadData()},t.prototype.initKingdomBuilder=function(e){this.container.removeAllChildren();for(var t=e.arrayConfig,o=0;o<t.length;o++)t[o].kingdomName=e.kingdomName,this.createItem(t[o])},t.prototype.createItem=function(e){var t=cc.instantiate(this.itemPrefab);this.container.addChild(t);var o=t.getComponent(a.default);this.arrayItem.push(o),o.initHouseItem(e,this.node)},t.prototype.reloadData=function(){var e=c.GameData.kingdoms[this.currentKingdom];e||(console.warn("Kingdom name = "+this.currentKingdom+" is undefined"),e={}),this.arrayItem.forEach(function(t){var o=t.config.houseName,n=e[o];null!=n?t.updateBuild(n):t.updateBuild(0)})},r([f(cc.Node)],t.prototype,"container",void 0),r([f(cc.Prefab)],t.prototype,"itemPrefab",void 0),r([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../CastleScreen":"CastleScreen","../GameData":"GameData","../ResUtil":"ResUtil","./HouseItem":"HouseItem","./KingdomBuilder":"KingdomBuilder"}],Bullet:[function(e,t,o){"use strict";cc._RF.push(t,"ce76b+UskFF5pu2I3GghrjS","Bullet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onCollisionEnter=function(e){var t=this;e.node.group===a.GroupConfig.CHARACTER&&(this.scheduleOnce(function(){t.node.opacity=0,cc.Tween.stopAllByTarget(t.node)},.05),this.scheduleOnce(function(){t.node.active=!1,t.node.removeFromParent()},.2))},t.velocityHit=500,r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../config/GroupConfig":"GroupConfig"}],ButtonRewardVideo:[function(e,t,o){"use strict";cc._RF.push(t,"c48cat8LANAC6ORdR0rjt3c","ButtonRewardVideo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loading=null,t.btn=null,t}return i(t,e),t.prototype.onLoad=function(){this.btn=this.getComponent(cc.Button),this.loading.active=!1},r([s(cc.Node)],t.prototype,"loading",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],CBCDecryptor:[function(e,t,o){"use strict";cc._RF.push(t,"f9d4fl6l0ZOfKWQbNvYaQ8m","CBCDecryptor");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.CBCDecryptor=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.processBlock=function(e,t){if(void 0===this._cipher.cfg.blockSize)throw new Error("missing blockSize in cipher config");var o=e.slice(t,t+this._cipher.cfg.blockSize);this._cipher.decryptBlock(e,t),this.xorBlock(e,t,this._cipher.cfg.blockSize),this._prevBlock=o},t.prototype.xorBlock=function(e,t,o){var n;if(this._iv?(n=this._iv,this._iv=void 0):n=this._prevBlock,void 0!==n)for(var i=0;i<o;i++)e[t+i]^=n[i]},t}(e("./BlockCipherModeAlgorithm").BlockCipherModeAlgorithm);o.CBCDecryptor=r,cc._RF.pop()},{"./BlockCipherModeAlgorithm":"BlockCipherModeAlgorithm"}],CBCEncryptor:[function(e,t,o){"use strict";cc._RF.push(t,"3156akD5EtMw61Y5xYGHwVX","CBCEncryptor");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.CBCEncryptor=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.processBlock=function(e,t){if(void 0===this._cipher.cfg.blockSize)throw new Error("missing blockSize in cipher config");this.xorBlock(e,t,this._cipher.cfg.blockSize),this._cipher.encryptBlock(e,t),this._prevBlock=e.slice(t,t+this._cipher.cfg.blockSize)},t.prototype.xorBlock=function(e,t,o){var n;if(this._iv?(n=this._iv,this._iv=void 0):n=this._prevBlock,void 0!==n)for(var i=0;i<o;i++)e[t+i]^=n[i]},t}(e("./BlockCipherModeAlgorithm").BlockCipherModeAlgorithm);o.CBCEncryptor=r,cc._RF.pop()},{"./BlockCipherModeAlgorithm":"BlockCipherModeAlgorithm"}],CBC:[function(e,t,o){"use strict";cc._RF.push(t,"397bcXouhFJRIwYe7GnQ3+D","CBC");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.CBC=void 0;var r=e("./BlockCipherMode"),a=e("./CBCEncryptor"),c=e("./CBCDecryptor"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.Encryptor=a.CBCEncryptor,t.Decryptor=c.CBCDecryptor,t}(r.BlockCipherMode);o.CBC=s,cc._RF.pop()},{"./BlockCipherMode":"BlockCipherMode","./CBCDecryptor":"CBCDecryptor","./CBCEncryptor":"CBCEncryptor"}],CaptureTexture:[function(e,t,o){"use strict";cc._RF.push(t,"dc9488+uhhO8Y82xoRnlwML","CaptureTexture");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t}return i(t,e),t.prototype.getImgBase64=function(){var e=cc.view.getVisibleSize(),t=e.width,o=e.height,n=new cc.RenderTexture,i=cc.game._renderContext;n.initWithSize(cc.visibleRect.width,cc.visibleRect.height,i.STENCIL_INDEX8),this.camera.targetTexture=n;var r=document.createElement("canvas"),a=r.getContext("2d");r.width=t,r.height=o,this.camera.render();var c=new Uint8Array(t*o*4);n.readPixels(c);for(var s=4*t,l=0;l<o;l++){var u=o-1-l,p=new Uint8ClampedArray(c.buffer,u*t*4,s),d=new ImageData(p,t,1);a.putImageData(d,0,l)}return r.toDataURL("image/png")},r([s(cc.Camera)],t.prototype,"camera",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],CastleScreen:[function(e,t,o){"use strict";cc._RF.push(t,"5371cdaBe5Ff5P2DaYrD8SO","CastleScreen");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ResUtil"),c=e("./MainScene"),s=e("./config/AudioPlayId"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.visibleKingdom="",t.buildPopupPrefab=null,t.kingdomNode=null,t.backgroundMusic=null,t}var o;return i(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._instance=this},t.prototype.onEnable=function(){this.backgroundMusic||(this.backgroundMusic=c.default.instance.audioPlayer.playAudio(s.AudioPlayId.castle_background,!0)),this.showCastleByName(o.KingdomDefault)},t.prototype.onDisable=function(){this.backgroundMusic&&(c.default.instance.audioPlayer.stopAudioPlay(this.backgroundMusic),this.backgroundMusic=null)},t.prototype.onClickBack=function(){c.default.instance.showHomeScreen()},t.prototype.onClickBuild=function(){c.default.instance.showBuildKingdomPopup()},t.prototype.onClickMap=function(){c.default.instance.showSelectKingdomPopup()},t.prototype.showCastleByName=function(e,t){void 0===t&&(t=null),this.visibleKingdom===e?t&&t():this.loadCastleByName(e,t)},t.prototype.loadCastleByName=function(e,t){var o=this;void 0===t&&(t=null),c.default.instance.showLoading(),a.ResUtil.loadKingdomByName(e,function(n){c.default.instance.hideLoading(),o.kingdomNode&&(o.kingdomNode.removeFromParent(),o.kingdomNode=null),o.visibleKingdom=e,o.kingdomNode=cc.instantiate(n),o.node.addChild(o.kingdomNode,-1),a.ResUtil.loadKingdomBuilderByName(e),t&&t()},function(){})},t.KingdomDefault="earth",t._instance=null,r([p(cc.Prefab)],t.prototype,"buildPopupPrefab",void 0),o=r([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./MainScene":"MainScene","./ResUtil":"ResUtil","./config/AudioPlayId":"AudioPlayId"}],Character:[function(e,t,o){"use strict";cc._RF.push(t,"028fayw1+FMb5Lyi+B6DgJG","Character");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../base/ColliderCallback"),c=e("./MoveCtrl"),s=e("./ColliderSearch"),l=e("./ColliderGround"),u=e("../../config/TagObject"),p=e("../../config/GroupConfig"),d=e("../../config/PhysicsConfig"),f=cc._decorator,h=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.stun=null,t.hit=null,t.idleAnim="idle",t.runAnim="run",t.walkAnim="Walk",t.attackAnim="Attack",t.dieAnim="Die",t.dieFireAnim="DieFire",t.dieIceAnim="Ice",t.rootCollider=null,t.groundCollider=null,t.headCollider=null,t.bodyCollider=null,t.attackCollider=null,t.searchCollider=null,t.ignoreFluids=[],t.attackDistance=0,t.currentSkin="",t.deadCallback=null,t.isGround=!0,t.isSuper=!1,t._isAlive=!0,t.isRunning=!1,t.moveCtrl=null,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"isAlive",{get:function(){return this._isAlive},set:function(e){var t=this;this._isAlive=e,this._isAlive||(cc.log(this.node.name+" isAlive = false"),this.deadCallback&&this.deadCallback(this.node),this.moveCtrl&&(this.moveCtrl.stopMove(),this.moveCtrl.enabled=!1),this.scheduleOnce(function(){try{t.rootCollider.active=!1}catch(e){cc.warn(e)}},.2))},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){if(this.searchCollider&&(this.searchCollider.node.active=!0,this.searchCollider.setColliderCallback(this.onSearchCollider.bind(this))),this.hit){var e=this.hit.getComponent(u.default);e&&(this.tagHit=e.tag2)}this.groundCollider.setGroundColliderCallback(this.onGroundCollisionEnter.bind(this)),this.headCollider.setColliderCallback(this.onHeadCollider.bind(this)),this.bodyCollider.setColliderCallback(this.onBodyCollider.bind(this),this.onBodyColliderStay.bind(this)),this.attackCollider.setColliderCallback(this.onAttackCollider.bind(this)),this.moveCtrl=this.getComponent(c.default),this.attackDistance=this.attackCollider.getComponent(cc.BoxCollider).size.width/2,this.currentSkin=this.skeleton.defaultSkin,this.playAnimation(this.idleAnim,!0),this.stun.node.active=!1,d.PhysicsConfig.initPhysicConfig(this.node,"character")},t.prototype.setDeadCallback=function(e){this.deadCallback=e},t.prototype.checkIgnoreFluid=function(e){return-1!=this.ignoreFluids.indexOf(e)},t.prototype.addToIgnoreSearchCollier=function(e){this.searchCollider&&this.searchCollider.addToIgnore(e)},t.prototype.playAnimation=function(e,t){return void 0===t&&(t=!1),this.skeleton.setAnimation(0,e,t),this},t.prototype.addAnimation=function(e,t,o){return void 0===t&&(t=!1),void 0===o&&(o=0),this.skeleton.addAnimation(0,e,t,o),this},t.prototype.changeSkin=function(e){this.currentSkin=e,this.skeleton.setSkin(e),this.skeleton.setSlotsToSetupPose()},t.prototype.getCurrentSkin=function(){return this.currentSkin},t.prototype.runToTarget=function(e){this.moveToTarget(e,this.runAnim)},t.prototype.walkToTarget=function(e){this.moveToTarget(e,this.walkAnim)},t.prototype.moveToTarget=function(e,t){var n=!0;if(e){var i=this.node.getParent().convertToNodeSpaceAR(e.getParent().convertToWorldSpaceAR(e.position)),r=e.getComponent(cc.BoxCollider),a=r?r.offset.x+r.size.width/2:0;if(Math.abs(this.node.position.x-i.x)<this.attackDistance+a)return;n=this.node.position.x<i.x}else n=this.node.scaleX===o.SCALE_RIGHT;n?this.moveRight(t):this.moveLeft(t)},t.prototype.rotateFaceToTarget=function(e){var t=this.node.getParent().convertToNodeSpaceAR(e.getParent().convertToWorldSpaceAR(e.position));this.node.position.x<t.x?this.node.scaleX=o.SCALE_RIGHT:this.node.scaleX=o.SCALE_LEFT},t.prototype.moveLeft=function(e){this.moveCtrl&&(this.isRunning=!0,this.node.scaleX=o.SCALE_LEFT,this.moveCtrl.moveLeft(),""!=e&&this.playAnimation(e,!0))},t.prototype.moveRight=function(e){this.moveCtrl&&(this.isRunning=!0,this.node.scaleX=o.SCALE_RIGHT,this.moveCtrl.moveRight(),""!=e&&this.playAnimation(e,!0))},t.prototype.moveJump=function(){this.moveCtrl&&this.moveCtrl.moveJump()},t.prototype.stopMove=function(){this.moveCtrl&&(this.isRunning=!1,this.moveCtrl.stopMove())},t.prototype.onAttackCollider=function(){},t.prototype.onBodyCollider=function(){},t.prototype.onBodyColliderStay=function(){},t.prototype.onHeadCollider=function(){},t.prototype.onSearchCollider=function(){},t.prototype.onGroundCollisionEnter=function(e){this.isGround=e,this.attackCollider.node.active=e,this.searchCollider&&(this.searchCollider.node.active=e)},t.prototype.disablePhysicsBody=function(){var e=this.node.getComponent(cc.PhysicsCollider);e&&(e.enabled=!1,e.node.group=p.GroupConfig.DEAD,e.enabled=!0)},t.SCALE_RIGHT=1,t.SCALE_LEFT=-1,r([y(sp.Skeleton)],t.prototype,"skeleton",void 0),r([y(sp.Skeleton)],t.prototype,"stun",void 0),r([y(cc.Node)],t.prototype,"hit",void 0),r([y(cc.String)],t.prototype,"idleAnim",void 0),r([y(cc.String)],t.prototype,"runAnim",void 0),r([y(cc.String)],t.prototype,"walkAnim",void 0),r([y(cc.String)],t.prototype,"attackAnim",void 0),r([y(cc.String)],t.prototype,"dieAnim",void 0),r([y(cc.String)],t.prototype,"dieFireAnim",void 0),r([y(cc.String)],t.prototype,"dieIceAnim",void 0),r([y(cc.Node)],t.prototype,"rootCollider",void 0),r([y(l.default)],t.prototype,"groundCollider",void 0),r([y(a.default)],t.prototype,"headCollider",void 0),r([y(a.default)],t.prototype,"bodyCollider",void 0),r([y(a.default)],t.prototype,"attackCollider",void 0),r([y(s.default)],t.prototype,"searchCollider",void 0),r([y([cc.String])],t.prototype,"ignoreFluids",void 0),o=r([h],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../base/ColliderCallback":"ColliderCallback","../../config/GroupConfig":"GroupConfig","../../config/PhysicsConfig":"PhysicsConfig","../../config/TagObject":"TagObject","./ColliderGround":"ColliderGround","./ColliderSearch":"ColliderSearch","./MoveCtrl":"MoveCtrl"}],ChooseCountryPopup:[function(e,t,o){"use strict";cc._RF.push(t,"96b46e07CpEdqhRzqgThTd9","ChooseCountryPopup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/CountryConfig"),c=e("../GameData"),s=e("../MainScene"),l=e("../ResUtil"),u=e("../UserPlayFab"),p=e("./ItemChooseCountry"),d=cc._decorator,f=d.ccclass,h=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbName=null,t.lbNameCountry=null,t.iconCountry=null,t.nodeChooseCountry=null,t.itemChooseCountry=null,t.scrollView=null,t._countryCode="",t._itemPrevious=null,t._itemCurrent=null,t}return i(t,e),t.prototype.onEnable=function(){try{this.lbName.string=FBInstant.player.getName()}catch(e){}},t.prototype.onDisable=function(){},t.prototype.start=function(){this.InitListCountry()},t.prototype.Show=function(e){this._cfg=e,this.node.active=!0},t.prototype.Hide=function(){this.node.active=!1},t.prototype.onClickOk=function(){var e=this;if(""!=this.lbName.string){var t=this.lbName.string+"_"+this._countryCode;u.default.UpdateDisPlayName(t,function(o,n){n||(e.node.active=!1,u.default.UserCountryCode=e._countryCode,u.default.DisplayName=t,u.default.setLeaderborad(c.GameData.currentLevelId,u.StatisticNameConfig.BEST_LEVEL,function(){s.default.instance.showRankPopup(e._cfg)}),u.default.setLeaderborad(c.GameData.currentLevelId,u.StatisticNameConfig.BEST_LEVEL+"_"+e._countryCode,function(){u.default.UpdateUserCountryCode(e._countryCode)}))})}},t.prototype.InitListCountry=function(){var e=this,t=a.countryCodes,o="vi_VN";try{FBInstant&&(o=FBInstant.getLocale())}catch(c){}for(var n=function(n){var r=t[n],c=a.countryName[n],s=i.scrollView.content.children[n];s||(s=cc.instantiate(i.itemChooseCountry),i.scrollView.content.addChild(s));var l=s.getComponent(p.default);o.includes(r)&&i.UpdateInfo(c,r),l.InitInfor(c,r,function(){e._itemPrevious=e._itemCurrent,e._itemPrevious&&e._itemPrevious.deActiveIconCheck(),e._itemCurrent=l,e._itemCurrent.activeIconCheck(),e.UpdateInfo(c,r)})},i=this,r=0;r<t.length;r++)n(r)},t.prototype.onClickChooseCountry=function(){this.nodeChooseCountry.active=!0},t.prototype.onClickSelectCountry=function(){this.nodeChooseCountry.active=!1},t.prototype.UpdateInfo=function(e,t){var o=this;this._countryCode=t,this.lbNameCountry.string=e,l.ResUtil.getIconCountry(t,function(e,t){e||(o.iconCountry.spriteFrame=t)})},t.prototype.onClickClose=function(){this.node.active=!1},r([h(cc.EditBox)],t.prototype,"lbName",void 0),r([h(cc.Label)],t.prototype,"lbNameCountry",void 0),r([h(cc.Sprite)],t.prototype,"iconCountry",void 0),r([h(cc.Node)],t.prototype,"nodeChooseCountry",void 0),r([h(cc.Node)],t.prototype,"itemChooseCountry",void 0),r([h(cc.ScrollView)],t.prototype,"scrollView",void 0),r([f],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../GameData":"GameData","../MainScene":"MainScene","../ResUtil":"ResUtil","../UserPlayFab":"UserPlayFab","../config/CountryConfig":"CountryConfig","./ItemChooseCountry":"ItemChooseCountry"}],CipherParamsInterface:[function(e,t,o){"use strict";cc._RF.push(t,"c75daeSX3JNJ6BVRuAL5QQB","CipherParamsInterface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],CipherParams:[function(e,t,o){"use strict";cc._RF.push(t,"04f98j4UgVD3rdnqkB3IuGk","CipherParams");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.CipherParams=void 0;var r=function(e){function t(t){var o=e.call(this)||this;return o.ciphertext=t.ciphertext,o.key=t.key,o.iv=t.iv,o.salt=t.salt,o.algorithm=t.algorithm,o.mode=t.mode,o.padding=t.padding,o.blockSize=t.blockSize,o.formatter=t.formatter,o}return i(t,e),t.prototype.extend=function(e){return void 0!==e.ciphertext&&(this.ciphertext=e.ciphertext),void 0!==e.key&&(this.key=e.key),void 0!==e.iv&&(this.iv=e.iv),void 0!==e.salt&&(this.salt=e.salt),void 0!==e.algorithm&&(this.algorithm=e.algorithm),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.padding&&(this.padding=e.padding),void 0!==e.blockSize&&(this.blockSize=e.blockSize),void 0!==e.formatter&&(this.formatter=e.formatter),this},t.prototype.toString=function(e){if(e)return e.stringify(this);if(this.formatter)return this.formatter.stringify(this);throw new Error("cipher needs a formatter to be able to convert the result into a string")},t}(e("../lib/Base").Base);o.CipherParams=r,cc._RF.pop()},{"../lib/Base":"Base"}],Cipher:[function(e,t,o){"use strict";cc._RF.push(t,"0822aDCGLVF/oR5hzoNBCgx","Cipher");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Cipher=void 0;var r=e("./BufferedBlockAlgorithm"),a=e("./SerializableCipher"),c=e("./PasswordBasedCipher"),s=function(e){function t(t,o,n){var i=e.call(this,Object.assign({blockSize:1},n))||this;return i._xformMode=t,i._key=o,i.reset(),i}return i(t,e),t.createEncryptor=function(e,t){return new this(this._ENC_XFORM_MODE,e,t)},t.createDecryptor=function(e,t){return new this(this._DEC_XFORM_MODE,e,t)},t._createHelper=function(e){return{encrypt:function(t,o,n){return"string"==typeof o?c.PasswordBasedCipher.encrypt(e,t,o,n):a.SerializableCipher.encrypt(e,t,o,n)},decrypt:function(t,o,n){return"string"==typeof o?c.PasswordBasedCipher.decrypt(e,t,o,n):a.SerializableCipher.decrypt(e,t,o,n)}}},t.prototype.process=function(e){return this._append(e),this._process()},t.prototype.finalize=function(e){return e&&this._append(e),this._doFinalize()},t._ENC_XFORM_MODE=1,t._DEC_XFORM_MODE=2,t.keySize=4,t.ivSize=4,t}(r.BufferedBlockAlgorithm);o.Cipher=s,cc._RF.pop()},{"./BufferedBlockAlgorithm":"BufferedBlockAlgorithm","./PasswordBasedCipher":"PasswordBasedCipher","./SerializableCipher":"SerializableCipher"}],ColliderCallback:[function(e,t,o){"use strict";cc._RF.push(t,"972fagnS5RCV7DBQ88ri4Nf","ColliderCallback");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.colliderEnterCb=null,t.CollisionStayCb=null,t.colliderExitCb=null,t}return i(t,e),t.prototype.setColliderCallback=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null),this.colliderEnterCb=e,this.CollisionStayCb=t,this.colliderExitCb=o},t.prototype.onCollisionEnter=function(e,t){this.colliderEnterCb&&this.colliderEnterCb(e,t)},t.prototype.onCollisionStay=function(e,t){this.CollisionStayCb&&this.CollisionStayCb(e,t)},t.prototype.onCollisionExit=function(e,t){this.colliderExitCb&&this.colliderExitCb(e,t)},r([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],ColliderGround:[function(e,t,o){"use strict";cc._RF.push(t,"addec/A/HVEDbijn4GbN/Wg","ColliderGround");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=e("../../base/utils/ArrayUtil"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.groundConfig=[a.GroupConfig.BERRIE,a.GroupConfig.ROCK],t.arrayGround=[],t.callback=null,t.isGround=!1,t}return i(t,e),t.prototype.setGroundColliderCallback=function(e){this.callback=e},t.prototype.onCollisionEnter=function(e){if(-1!==this.groundConfig.indexOf(e.node.group)&&-1==this.arrayGround.indexOf(e.node))return this.arrayGround.push(e.node),this.isGround?void 0:(this.isGround=!0,void(this.callback&&this.callback(!0)))},t.prototype.onCollisionExit=function(e){-1!==this.groundConfig.indexOf(e.node.group)&&(c.default.removeElement(this.arrayGround,e.node),0===this.arrayGround.length&&(this.callback&&this.callback(!1),this.isGround=!1))},r([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../base/utils/ArrayUtil":"ArrayUtil","../../config/GroupConfig":"GroupConfig"}],ColliderSearch:[function(e,t,o){"use strict";cc._RF.push(t,"fbc57yBL25Jzpq6ppx2EzJN","ColliderSearch");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../base/ColliderCallback"),c=e("../../config/GroupConfig"),s=e("../../base/utils/ArrayUtil"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.signalCollider=null,t.listIgnore=[],t.isDebug=!1,t.rootPosition=null,t.searchCallback=null,t.listColliderEnter=[],t}return i(t,e),t.prototype.onLoad=function(){var e=this.signalCollider.node;e.getComponent(cc.Sprite).enabled=this.isDebug,this.rootPosition=e.position,this.signalCollider.setColliderCallback(this.onSignalCollider.bind(this)),this.listIgnore.push(e)},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.signalCollider.node)},t.prototype.addToIgnore=function(e){-1===this.listIgnore.indexOf(e)&&(cc.log("addToIgnore: "+e.name),this.listIgnore.push(e))},t.prototype.checkSearchTarget=function(e){return e.node.group==c.GroupConfig.CHARACTER&&-1==this.listIgnore.indexOf(e.node)},t.prototype.setColliderCallback=function(e){this.searchCallback=e},t.prototype.onCollisionEnter=function(e){this.checkSearchTarget(e)&&(-1==this.listColliderEnter.indexOf(e)&&this.listColliderEnter.push(e),cc.Tween.stopAllByTarget(this.signalCollider.node),this.pingToTarget(e))},t.prototype.onCollisionExit=function(e){this.checkSearchTarget(e)&&s.default.removeElement(this.listColliderEnter,e),this.refreshPingToTarget()},t.prototype.pingToTarget=function(e,t){var o=this;void 0===t&&(t=!0);var n=this.signalCollider.node;n.position=this.rootPosition;var i=n.getParent().convertToNodeSpaceAR(e.node.getParent().convertToWorldSpaceAR(e.node.position));i.y+=e.offset.y-e.size.height/2+20,i.x+=e.offset.x-e.size.width/2+20,cc.tween(n).to(.1,{position:i}).delay(.5).call(function(){t&&o.pingToTarget(e)}).start()},t.prototype.refreshPingToTarget=function(){this.listColliderEnter.length>0&&this.pingToTarget(this.listColliderEnter[0],!1)},t.prototype.onSignalCollider=function(e){if(-1==this.listIgnore.indexOf(e.node)){var t=this.signalCollider.node;t.position=this.rootPosition,cc.Tween.stopAllByTarget(t),this.searchCallback&&this.searchCallback(e)}},r([p(a.default)],t.prototype,"signalCollider",void 0),r([p([cc.Node])],t.prototype,"listIgnore",void 0),r([p(cc.Boolean)],t.prototype,"isDebug",void 0),r([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../base/ColliderCallback":"ColliderCallback","../../base/utils/ArrayUtil":"ArrayUtil","../../config/GroupConfig":"GroupConfig"}],CountryConfig:[function(e,t,o){"use strict";cc._RF.push(t,"80c57RLh7dHkL5lvZCC3W81","CountryConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.GetNameContryWithCode=o.countryName=o.countryCodes=void 0,o.countryCodes=["AF","AX","AL","DZ","AS","AD","AO","AI","AG","AR","AM","AW","AU","AT","AZ","BS","BH","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BQ","BA","BW","BR","BN","BG","BF","BI","KH","CM","CA","CV","KY","CF","TD","CL","CN","CO","KM","CG","CD","CK","CR","CI","HR","CU","CW","CY","CZ","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","ET","FO","FJ","FI","FR","GF","PF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IL","IT","JM","JP","JE","JO","KZ","KE","KI","KR","XK","KW","KG","LA","LV","LB","LS","LR","LY","LI","LT","LU","MO","MK","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL","NC","NZ","NI","NE","NG","NU","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PL","PT","PR","QA","RE","RO","RU","RW","BL","KN","LC","MF","VC","WS","SM","ST","SA","SN","RS","SC","SL","SG","SX","SK","SI","SB","SO","ZA","SS","ES","LK","SD","SR","SZ","SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TO","TT","TN","TR","TM","TC","TV","UG","UA","AE","GB","US","UY","UZ","VU","VE","VN","VG","VI","EH","YE","ZM","ZW"],o.countryName=["Afghanistan","Aland Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia, Plurinational State of","Bonaire, Sint Eustatius and Saba","Bosnia and Herzegovina","Botswana","Brazil","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Democratic Republic of the Congo","Cook Islands","Costa Rica","Cote D'ivoire","Croatia","Cuba","Curacao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Islamic Republic of Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Republic of Korea","Kosovo","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao","The Former Yugoslav Republic of Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Federated States of Micronesia","Republic of Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territory, Occupied","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russian Federation","Rwanda","Saint Barthelemy","Saint Kitts and Nevis","Saint Lucia","Saint Martin (French Part)","Saint Vincent and The Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten (Dutch Part)","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan","Tajikistan","United Republic of Tanzania","Thailand","Timor-leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Bolivarian Republic of Venezuela","Viet Nam","Virgin Islands, British","Virgin Islands, U.S.","Western Sahara","Yemen","Zambia","Zimbabwe"],o.GetNameContryWithCode=function(e){for(var t=0;t<o.countryCodes.length;t++)if(e==o.countryCodes[t])return o.countryName[t]},cc._RF.pop()},{}],DailyPopup:[function(e,t,o){"use strict";cc._RF.push(t,"14f48Nhe0dBnqHYRauDpkO4","DailyPopup");var n,i,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ReceiveConfig=void 0,function(e){e[e.RECEVIED=0]="RECEVIED",e[e.CAN_RECEVIE=1]="CAN_RECEVIE",e[e.CANT_NOT_RECEVIE=2]="CANT_NOT_RECEVIE"}(i=o.ReceiveConfig||(o.ReceiveConfig={}));var c=[{id:"hero_6",name:"hero_6"},{id:"hero_27",name:"hero_27"},{id:"hero_28",name:"hero_28"}],s=e("../GameData"),l=e("../UserPlayFab"),u=e("./ItemDaily"),p=e("./ItemDailyPlus"),d=cc._decorator,f=d.ccclass,h=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeContent=null,t.listItem=[],t.itemDailyPlus=null,t}return r(t,e),t.prototype.onEnable=function(){var e=this;setTimeout(function(){var t=l.default.DailyData,o={day:-1,time:new Date};console.log(t,"time");var n=!1;if(""!=t){var r=JSON.parse(t),a=new Date(r.time);o.day=r.day,a.getMonth()==o.time.getMonth()?a.getDate()<o.time.getDate()?n=!0:0==r.day&&(o.day=7):n=!0}else o.day=0,n=!0;if(0!=e.listItem.length)for(var c=0;c<7;c++){var s,u=e.listItem[c];s=c>o.day?i.CANT_NOT_RECEVIE:c==o.day?n?i.CAN_RECEVIE:i.CANT_NOT_RECEVIE:i.RECEVIED;var p=e.getSkinReward(c+1);6!=c?u.InitInfo({gold:p.gold,day:c,skin:p.skin},s,function(e){var t=e.day,o={day:t+=1,time:new Date};l.default.SaveDailyData(o)}):e.itemDailyPlus.InitInfo({gold:p.gold,day:c,skin:p.skin},s,function(e){e.day;var t={day:0,time:new Date};l.default.SaveDailyData(t)})}},200)},t.prototype.Show=function(){this.node.active=!0},t.prototype.Hide=function(){this.node.active=!1},t.prototype.getSkinReward=function(e){if(7!==e)return{gold:500,skin:null};for(var t=null,o=1,n=0;n<c.length;n++){var i=c[n];if(-1==(o=s.GameData.myBossSkins.indexOf(i.id))){t=i;break}}return 1==o?{gold:1e3,skin:null}:{gold:0,skin:t}},a([h(cc.Node)],t.prototype,"nodeContent",void 0),a([h([u.default])],t.prototype,"listItem",void 0),a([h(p.default)],t.prototype,"itemDailyPlus",void 0),a([f],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../GameData":"GameData","../UserPlayFab":"UserPlayFab","./ItemDaily":"ItemDaily","./ItemDailyPlus":"ItemDailyPlus"}],Demon:[function(e,t,o){"use strict";cc._RF.push(t,"115d2T2+exIPbUvPo0QVNGT","Demon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Enemies"),c=e("../../../config/AudioPlayId"),s=e("../../../MainScene"),l=e("../Character"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.superIdleAnim="Idle2",t.superAttackAnim="Attack2",t.superAppearAnim="Appear1",t.superRunAnim="Walk2",t.hit2=null,t}return i(t,e),t.prototype.start=function(){this.hit.active=!1,this.hit2&&(this.hit2.active=!1)},t.prototype.changeSkinToSuper=function(){this.isSuper=!0,this.idleAnim+="2",this.attackAnim+="2",this.walkAnim+="2",this.runAnim+="2";var e=this.hit.getComponent(cc.BoxCollider);this.hit.angle=this.attackCollider.node.angle,e.size.height+=50,e.size.width+=50,this.playAnimation(this.superAppearAnim).addAnimation(this.superIdleAnim,!0)},t.prototype.playAttack=function(e){var t=this;if(this.isAttack){var o=e.getComponent(l.default);if(o&&!o.isAlive)return}this.isAttack=!0,this.rotateFaceToTarget(e),this.isSuper?this.playAnimation(this.superAttackAnim):this.playAnimation(this.attackAnim),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.demon_punch),this.stopMove(),this.scheduleOnce(function(){t.hit.active=!0,t.hit2&&(t.hit2.active=!0)},.2),this.skeleton.setCompleteListener(function(){t.isAlive&&(t.skeleton.setCompleteListener(null),t.isSuper?t.playAnimation(t.superIdleAnim,!0):t.playAnimation(t.idleAnim,!0),t.hit.active=!1,t.hit2&&(t.hit2.active=!1),t.isAttack=!1,t.stopMove(),t.searchCollider.refreshPingToTarget())})},t.prototype.onDieIce=function(){e.prototype.onDieIce.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},t.prototype.onDieNormal=function(){e.prototype.onDieNormal.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},t.prototype.onDieFire=function(){e.prototype.onDieFire.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},r([d(cc.Node)],t.prototype,"hit2",void 0),r([p],t)}(a.default);o.default=f,cc._RF.pop()},{"../../../MainScene":"MainScene","../../../config/AudioPlayId":"AudioPlayId","../Character":"Character","./Enemies":"Enemies"}],Dog:[function(e,t,o){"use strict";cc._RF.push(t,"3f19e8Qk9JDqLr7LacnS5JF","Dog");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Enemies"),c=e("../../../config/GroupConfig"),s=e("../../../config/TagObject"),l=e("../../../config/AudioPlayId"),u=e("../../../MainScene"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.superIdleAnim="Idle2",t.superAttackAnim="Attack2",t.superAppearAnim="Appear1",t.superRunAnim="Walk2",t.eatAnim="eat",t.isEating=!1,t}return i(t,e),t.prototype.onAttackCollider=function(t,o){this.isEating||(e.prototype.onAttackCollider.call(this,t,o),t.node.group===c.GroupConfig.ITEM&&t.node.name==s.TagConfig.MEAT&&(this.isEating=!0,this.stopMove(),this.rotateFaceToTarget(t.node),this.skeleton.setCompleteListener(null),this.playAnimation(this.eatAnim,!0)))},t.prototype.onSearchCollider=function(t){this.isEating||e.prototype.onSearchCollider.call(this,t)},t.prototype.playAttack=function(t){e.prototype.playAttack.call(this,t),u.default.instance.audioPlayer.playAudio(l.AudioPlayId.dog_bite)},t.prototype.changeSkinToSuper=function(){this.isSuper=!0,this.playAnimation(this.superAppearAnim).addAnimation(this.superIdleAnim,!0)},t.prototype.onDieIce=function(){e.prototype.onDieIce.call(this),u.default.instance.audioPlayer.playAudio(l.AudioPlayId.dog_die)},t.prototype.onDieNormal=function(){e.prototype.onDieNormal.call(this),u.default.instance.audioPlayer.playAudio(l.AudioPlayId.dog_die)},t.prototype.onDieFire=function(){e.prototype.onDieFire.call(this),u.default.instance.audioPlayer.playAudio(l.AudioPlayId.dog_die)},r([f(cc.String)],t.prototype,"eatAnim",void 0),r([d],t)}(a.default);o.default=h,cc._RF.pop()},{"../../../MainScene":"MainScene","../../../config/AudioPlayId":"AudioPlayId","../../../config/GroupConfig":"GroupConfig","../../../config/TagObject":"TagObject","./Enemies":"Enemies"}],Dragon:[function(e,t,o){"use strict";cc._RF.push(t,"7388cKfYv1BAYkY1DMqH1dv","Dragon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Character"),c=e("../../../config/GroupConfig"),s=e("../../../level/MapLevel"),l=e("../../../config/AudioPlayId"),u=e("../../../MainScene"),p=e("../../../config/TagObject"),d=e("../../more/FireBall"),f=cc._decorator,h=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.superIdleAnim="Idle2",t.superAttackAnim="Attack2",t.superAppearAnim="Appear1",t.fireBallPrefab=null,t.isAttack=!1,t.isSuper=!1,t}return i(t,e),t.prototype.start=function(){this.hit.active=!0},t.prototype.onHeadCollider=function(e){this.isAlive&&(e.node.group!==c.GroupConfig.ROCK&&(e.node.group!==c.GroupConfig.ITEM||e.node.name!=p.TagConfig.CHEST)||this.onDieNormal())},t.prototype.onBodyCollider=function(e){if(this.isAlive&&!this.checkIgnoreFluid(e.node.group))if(e.node.group!==c.GroupConfig.SNOW){if(e.node.group===c.GroupConfig.COLLIDER){if(e.node.name==p.TagConfig.GAS||e.node.name==p.TagConfig.BOMB)return void this.onDieNormal();e.node.name==p.TagConfig.HIT&&e.node.getComponent(p.default).tag2==p.TagConfig.BOSS&&this.onDieNormal()}}else this.onDieIce()},t.prototype.onAttackCollider=function(e){if(cc.log("onAttackCollider: group: "+e.node.group+", name: "+e.node.name+", "+(new Date).getTime()),e.node.group===c.GroupConfig.ITEM&&e.node.name==p.TagConfig.HOLY_WATER){try{e.node.removeComponent(cc.PhysicsCollider),e.node.removeComponent(cc.BoxCollider),e.node.removeFromParent()}catch(t){cc.warn(t)}return this.isSuper=!0,this.stopMove(),void this.changeSkinToSuperDragon()}},t.prototype.onSearchCollider=function(e){this.isAlive&&s.default.instance.isPlaying&&(e.node.group!==c.GroupConfig.CHARACTER||e.node.name!=p.TagConfig.BOSS_SUPER&&this.playAttack(e))},t.prototype.playAttack=function(){var e=this;if(!this.isAttack){this.isAttack=!0,1==this.isSuper?this.playAnimation(this.superAttackAnim):(this.playAnimation(this.attackAnim),u.default.instance.audioPlayer.playAudio(l.AudioPlayId.dragon_fire));var t=cc.instantiate(this.fireBallPrefab);this.hit.addChild(t);var o=800/d.default.velocityHit,n=cc.jumpBy(o,cc.v2(800,-400),800/7,1);t.runAction(cc.sequence(n,cc.callFunc(function(){t.active&&(t.active=!1,t.removeFromParent())}))),this.scheduleOnce(function(){e.isAlive&&(1==e.isSuper?e.playAnimation(e.superIdleAnim,!0):e.playAnimation(e.idleAnim,!0))},.5),this.scheduleOnce(function(){e.isAlive&&(e.isAttack=!1,e.searchCollider.refreshPingToTarget())},1)}},t.prototype.changeSkinToSuperDragon=function(){this.playAnimation(this.superAppearAnim).addAnimation(this.superIdleAnim,!0)},t.prototype.onDieNormal=function(){this.stun.node.active=!0,this.playAnimation(this.dieAnim),this.isAlive=!1,u.default.instance.audioPlayer.playAudio(l.AudioPlayId.dragon_die)},t.prototype.onDieIce=function(){this.stun.node.active=!0,this.playAnimation(this.dieIceAnim),this.isAlive=!1,u.default.instance.audioPlayer.playAudio(l.AudioPlayId.dragon_die)},r([y(cc.Prefab)],t.prototype,"fireBallPrefab",void 0),r([h],t)}(a.default);o.default=g,cc._RF.pop()},{"../../../MainScene":"MainScene","../../../config/AudioPlayId":"AudioPlayId","../../../config/GroupConfig":"GroupConfig","../../../config/TagObject":"TagObject","../../../level/MapLevel":"MapLevel","../../more/FireBall":"FireBall","../Character":"Character"}],ECBDecryptor:[function(e,t,o){"use strict";cc._RF.push(t,"53721N5X5hL05JMW5vEveD7","ECBDecryptor");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ECBDecryptor=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.processBlock=function(e,t){this._cipher.decryptBlock(e,t)},t}(e("./BlockCipherModeAlgorithm").BlockCipherModeAlgorithm);o.ECBDecryptor=r,cc._RF.pop()},{"./BlockCipherModeAlgorithm":"BlockCipherModeAlgorithm"}],ECBEncryptor:[function(e,t,o){"use strict";cc._RF.push(t,"33df0fiPsBKOI139kHKRo/3","ECBEncryptor");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ECBEncryptor=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.processBlock=function(e,t){this._cipher.encryptBlock(e,t)},t}(e("./BlockCipherModeAlgorithm").BlockCipherModeAlgorithm);o.ECBEncryptor=r,cc._RF.pop()},{"./BlockCipherModeAlgorithm":"BlockCipherModeAlgorithm"}],ECB:[function(e,t,o){"use strict";cc._RF.push(t,"e4f9dlfXlNDnbs5KDhCFA3G","ECB");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ECB=void 0;var r=e("./BlockCipherMode"),a=e("./ECBEncryptor"),c=e("./ECBDecryptor"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.Encryptor=a.ECBEncryptor,t.Decryptor=c.ECBDecryptor,t}(r.BlockCipherMode);o.ECB=s,cc._RF.pop()},{"./BlockCipherMode":"BlockCipherMode","./ECBDecryptor":"ECBDecryptor","./ECBEncryptor":"ECBEncryptor"}],Encoding:[function(e,t,o){"use strict";cc._RF.push(t,"9a7fefikc9FvrKzR1AkV9Fc","Encoding"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Enemies:[function(e,t,o){"use strict";cc._RF.push(t,"c0d19Q53chFxZ8/bnKcdE1A","Enemies");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Character"),c=e("../../../config/GroupConfig"),s=e("../../../config/TagObject"),l=e("../../../level/MapLevel"),u=e("../../more/AnimalTrap"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.superIdleAnim="Idle2",t.superAttackAnim="Attack2",t.superAppearAnim="Appear1",t.superRunAnim="Walk2",t.isSuper=!1,t.isAttack=!1,t}return i(t,e),t.prototype.start=function(){this.hit.active=!1},t.prototype.playAttack=function(e){var t=this;if(this.isAttack){var o=e.getComponent(a.default);if(o&&!o.isAlive)return}this.isAttack=!0,this.rotateFaceToTarget(e),this.isSuper?this.playAnimation(this.superAttackAnim):this.playAnimation(this.attackAnim),this.stopMove(),this.scheduleOnce(function(){t.hit.active=!0},.2),this.skeleton.setCompleteListener(function(){t.isAlive&&(t.skeleton.setCompleteListener(null),t.isSuper?t.playAnimation(t.superIdleAnim,!0):t.playAnimation(t.idleAnim,!0),t.hit.active=!1,t.isAttack=!1,t.stopMove(),t.searchCollider.refreshPingToTarget())})},t.prototype.onHeadCollider=function(e){if(this.isAlive)return e.node.group===c.GroupConfig.ROCK?(this.onDieNormal(),void this.disablePhysicsBody()):e.node.group!==c.GroupConfig.ITEM||e.node.name!=s.TagConfig.CHEST&&e.node.name!=s.TagConfig.ITEM&&e.node.name!=s.TagConfig.STICK?void 0:(this.onDieNormal(),void this.disablePhysicsBody())},t.prototype.onBodyCollider=function(e){if(this.isAlive&&!this.checkIgnoreFluid(e.node.group)&&!this.isSuper)if(e.node.group!==c.GroupConfig.LAVA)if(e.node.group!==c.GroupConfig.SNOW){if(e.node.group===c.GroupConfig.COLLIDER){if(e.node.name==s.TagConfig.HIT){var t=e.node.getComponent(s.default).tag2;return cc.log(this.node.name+" onBodyCollider: "+e.node.group+" tag2 = "+t),this.tagHit==s.TagConfig.DOG?t!=s.TagConfig.DOG&&this.onDieNormal():t!=s.TagConfig.FIRE_BALL&&t!=s.TagConfig.BOSS&&t!=s.TagConfig.STICK&&t!=s.TagConfig.ITEM&&t!=s.TagConfig.TRAP&&t!=s.TagConfig.ROCK&&t!=s.TagConfig.BIG_ROCK&&t!=s.TagConfig.BULLET&&t!=s.TagConfig.POW&&t!=s.TagConfig.SAW&&t!=s.TagConfig.LAZE||this.onDieNormal(),void(t==s.TagConfig.GHOSTER&&this.onDieNormal())}if(e.node.name==s.TagConfig.GAS||e.node.name==s.TagConfig.BOMB)return void this.onDieNormal();if(e.node.name==s.TagConfig.TRAP_ANIMAL)return e.node.getComponent(u.default).trapActive(),void this.onDieNormal()}}else this.onDieIce();else this.onDieFire()},t.prototype.onBodyColliderStay=function(e){this.isAlive&&e.node.group===c.GroupConfig.COLLIDER&&e.node.name==s.TagConfig.BOOM_TIMER&&1==e.node.getComponent("BoomTimer").onSwitch&&this.onDieNormal()},t.prototype.onAttackCollider=function(e){if(this.isAlive){if(cc.log(this.node.name+" onAttackCollider: "+e.node.name),e.node.group===c.GroupConfig.CHARACTER&&e.node!=this.groundCollider.node)return e.node.name==s.TagConfig.BOSS||e.node.name==s.TagConfig.GIRL||e.node.name==s.TagConfig.DOG?void this.playAttack(e.node):(this.stopMove(),void(this.isSuper?this.playAnimation("Idle2",!0):this.playAnimation(this.idleAnim,!0)));if(e.node.group===c.GroupConfig.ITEM&&e.node.name==s.TagConfig.HOLY_WATER){try{e.node.removeComponent(cc.PhysicsCollider),e.node.removeComponent(cc.BoxCollider),e.node.removeFromParent()}catch(t){cc.warn(t)}return this.stopMove(),void this.changeSkinToSuper()}}},t.prototype.changeSkinToSuper=function(){},t.prototype.onSearchCollider=function(e){this.isAlive&&l.default.instance.isPlaying&&!this.isAttack&&(e.node.group!==c.GroupConfig.CHARACTER||e.node==this.groundCollider.node||(e.node.name==s.TagConfig.BOSS||e.node.name==s.TagConfig.GIRL||e.node.name==s.TagConfig.GIRL_WONDER||e.node.name==s.TagConfig.DOG?this.walkToTarget(e.node):this.addToIgnoreSearchCollier(e.node)))},t.prototype.walkToTarget=function(e){this.isSuper?this.moveToTarget(e,this.superRunAnim):this.moveToTarget(e,this.walkAnim)},t.prototype.onAutoMove=function(){this.isAlive&&this.walkToTarget(null)},t.prototype.onDieFire=function(){this.isSuper||(this.stun.node.active=!0,this.playAnimation(this.dieFireAnim),this.isAlive=!1)},t.prototype.onDieNormal=function(){this.stun.node.active=!0,this.playAnimation(this.dieAnim),this.isAlive=!1},t.prototype.onDieIce=function(){this.stun.node.active=!0,this.playAnimation(this.dieIceAnim),this.isAlive=!1},r([d],t)}(a.default));o.default=f,cc._RF.pop()},{"../../../config/GroupConfig":"GroupConfig","../../../config/TagObject":"TagObject","../../../level/MapLevel":"MapLevel","../../more/AnimalTrap":"AnimalTrap","../Character":"Character"}],EventHomePinManger:[function(e,t,o){"use strict";cc._RF.push(t,"8bc8cNd7q9HmLgciT5tKIaG","EventHomePinManger");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../UserPlayFab"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameHelperComponent="",t.helperEvent=null,t.nodeEvent=null,t}var o;return i(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){o._instance=this,this.helperEvent=this.nodeEvent.getComponent(this.nameHelperComponent.toString()),this.helperEvent.Init(),this._onStartEventHomePin=this.onStartEventHomePin.bind(this);try{FBInstant.player.getName()}catch(e){a.default.SetUp(),a.default.LoginWithCustomID()}a.default.LoginCallBackSignal.add(this._onStartEventHomePin,this)},t.prototype.onStartEventHomePin=function(){this.helperEvent.StartEventHomePin()},t._instance=null,r([l(cc.String)],t.prototype,"nameHelperComponent",void 0),r([l(cc.Node)],t.prototype,"nodeEvent",void 0),o=r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../UserPlayFab":"UserPlayFab"}],EventPopup:[function(e,t,o){"use strict";cc._RF.push(t,"f406b+nFShLwIUcDV44c6hk","EventPopup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.Show=function(){this.node.active=!0},t.prototype.Hide=function(){this.node.active=!1},t.prototype.onClickClose=function(){this.Hide()},r([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],EvpKDF:[function(e,t,o){"use strict";cc._RF.push(t,"9a3b4WMLaRGGoHpkrr1WBEx","EvpKDF"),Object.defineProperty(o,"__esModule",{value:!0}),o.EvpKDF=void 0;var n=e("../lib/WordArray"),i=e("../algo/MD5"),r=function(){function e(e){this.cfg=Object.assign({keySize:4,hasher:i.MD5,iterations:1},e)}return e.prototype.compute=function(e,t){for(var o,i=new this.cfg.hasher,r=new n.WordArray;r.words.length<this.cfg.keySize;){o&&i.update(o),o=i.update(e).finalize(t),i.reset();for(var a=1;a<this.cfg.iterations;a++)o=i.finalize(o),i.reset();r.concat(o)}return r.sigBytes=4*this.cfg.keySize,r},e}();o.EvpKDF=r,cc._RF.pop()},{"../algo/MD5":"MD5","../lib/WordArray":"WordArray"}],FBInstantAds:[function(e,t,o){"use strict";cc._RF.push(t,"9b225Vh0pZHuKqzpKXmPnJH","FBInstantAds"),Object.defineProperty(o,"__esModule",{value:!0}),o.FBInstantAds=void 0;var n=e("../../GameData"),i=e("../../base/Signal"),r=e("../tracking/GameTracking"),a=function(){function e(){}return Object.defineProperty(e,"isRewardedVideoReady",{get:function(){return null!=e._preloadedRewardedVideo},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isInterstitialReady",{get:function(){return null!=e._preloadedInterstitial},enumerable:!1,configurable:!0}),e.checkInitFBInstant=function(){return"undefined"==typeof FBInstant?(console.warn("FBInstant is undefined"),!1):!!e.enableAds||(console.warn("FBInstant is not enable"),!1)},e.preloadInterstitialAd=function(t){if(void 0===t&&(t=null),e.checkInitFBInstant())return e.isInterstitialReady?(console.warn("Interstitial ad ready to show"),void(t&&t())):void FBInstant.getInterstitialAdAsync(e.adsConfig.Interstitial).then(function(t){return e._preloadedInterstitial=t,e._preloadedInterstitial.loadAsync()}).then(function(){console.log("Interstitial preloaded"),t&&t()}).catch(function(o){console.warn("Interstitial failed to preload: "+o.message),r.GameTracking.logEventAdLoadFailed(e.typeAd.Interstitial,o.code),e._preloadedInterstitial=null,t&&t(o)});t&&t()},e.showInterstitialAd=function(t){if(e.checkInitFBInstant())if(n.GameData.currentLevelId-e.lastLevelShowAds<e.adsConfig.distanceLevel)t();else{var o=(new Date).getTime(),i=(o-e.lastTimeShowAds)/1e3;if(i<e.adsConfig.distanceTime)return console.warn("Too many ads shown recently: dt = "+i),void t();e.isInterstitialReady?e._preloadedInterstitial.showAsync().then(function(){console.log("Interstitial ad finished successfully"),e._preloadedInterstitial=null,e.lastTimeShowAds=o,e.lastLevelShowAds=n.GameData.currentLevelId,e.preloadInterstitialAd(),r.GameTracking.logEventShowAd(e.typeAd.Interstitial),t()}).catch(function(o){console.warn("Interstitial ad is not shown: "+o.message),e._preloadedInterstitial=null,e.preloadInterstitialAd(),r.GameTracking.logEventShowAdFailed(o.code),t(o)}):e.preloadInterstitialAd(function(o){o?t(o):e.showInterstitialAd(t)})}else t()},e.preloadRewardedVideoAd=function(t){if(void 0===t&&(t=null),e.checkInitFBInstant()){if(e.isRewardedVideoReady)return console.warn("Rewarded Video Ad ready to show"),void(t&&t());e.LoadingRewardedVideoSignal.dispatch(!0),FBInstant.getRewardedVideoAsync(e.adsConfig.Rewarded).then(function(t){return e._preloadedRewardedVideo=t,e._preloadedRewardedVideo.loadAsync()}).then(function(){console.log("Rewarded video preloaded"),e.LoadingRewardedVideoSignal.dispatch(!1),t&&t()}).catch(function(o){console.warn("Rewarded video failed to preload: "+o.message),r.GameTracking.logEventAdLoadFailed(e.typeAd.Rewarded,o.code),e._preloadedRewardedVideo=null,t&&t(o)})}else t&&t()},e.showRewardedVideoAd=function(t){e.checkInitFBInstant()&&(e.isRewardedVideoReady?e._preloadedRewardedVideo.showAsync().then(function(){console.log("Rewarded video watched successfully"),e._preloadedRewardedVideo=null,e.lastTimeShowAds=(new Date).getTime(),e.preloadRewardedVideoAd(),r.GameTracking.logEventShowAd(e.typeAd.Rewarded),t()}).catch(function(o){console.warn("Rewarded video error: "+JSON.stringify(o)),e._preloadedRewardedVideo=null,e.lastTimeShowAds=(new Date).getTime(),e.preloadRewardedVideoAd(),r.GameTracking.logEventShowAdFailed(o.code),t(o)}):e.preloadRewardedVideoAd(function(o){o?t(o):e.showRewardedVideoAd(t)}))},e.typeAd={Interstitial:"Interstitial",Rewarded:"Rewarded"},e._preloadedInterstitial=null,e._preloadedRewardedVideo=null,e.lastTimeShowAds=0,e.lastLevelShowAds=0,e.LoadingRewardedVideoSignal=new i.Signal,e}();o.FBInstantAds=a,cc._RF.pop()},{"../../GameData":"GameData","../../base/Signal":"Signal","../tracking/GameTracking":"GameTracking"}],FBInstantData:[function(e,t,o){"use strict";cc._RF.push(t,"09452fizKlBLom5nLmzsz3a","FBInstantData"),Object.defineProperty(o,"__esModule",{value:!0}),o.FBInstantData=void 0;var n=e("../../base/LocalStorageManager"),i=function(){function e(){}return e.getData=function(e,t){for(var o={},i=0;i<=e.length;i++)o[e[i]]=JSON.parse(n.LocalStorageManager.getItem(e[i]));t&&t(o)},e.setData=function(e,t){for(var o in void 0===t&&(t=null),e){var i=e[o];n.LocalStorageManager.setItem(o,JSON.stringify(i))}t&&t(null)},e}();o.FBInstantData=i,cc._RF.pop()},{"../../base/LocalStorageManager":"LocalStorageManager"}],FBInstantGames:[function(e,t,o){"use strict";cc._RF.push(t,"98294WxLiFKG6IBecqMuD3C","FBInstantGames"),Object.defineProperty(o,"__esModule",{value:!0}),o.FBInstantGames=void 0;var n=e("../../base/utils/GUIUtil"),i=e("../tracking/GameTracking"),r=function(){function e(){}return e.onQuitGame=function(){"undefined"!=typeof FBInstant&&FBInstant.quit()},e.onShareGame=function(t){if(void 0===t&&(t=null),"undefined"!=typeof FBInstant){var o=window.templateShare;o||(o=e.templateShare);var i=n.default.getImgBase64();FBInstant.shareAsync({intent:"SHARE",image:i,text:o,data:{myReplayData:"..."}}).then(function(){t&&t()})}},e.inviteFriends=function(t){if(void 0===t&&(t=null),"undefined"!=typeof FBInstant){var o=n.default.getImgBase64(),i=window.templateInvite;i||(i=e.templateInvite),FBInstant.context.chooseAsync().then(function(){console.log("chooseAsync: "+FBInstant.context.getID()),FBInstant.updateAsync({action:"CUSTOM",cta:i.cta,image:o,text:i.text,template:"VILLAGE_INVASION",data:{myReplayData:"..."},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){console.log("inviteFriends DONE"),t&&t()})})}},e.createShortcut=function(e){void 0===e&&(e=null),"undefined"!=typeof FBInstant&&FBInstant.canCreateShortcutAsync().then(function(t){t&&FBInstant.createShortcutAsync().then(function(){e&&e()}).catch(function(){})})},e.subscribeMessengerBot=function(e){void 0===e&&(e=null),"undefined"!=typeof FBInstant&&FBInstant.player.canSubscribeBotAsync().then(function(e){e&&FBInstant.player.subscribeBotAsync().then(function(){FBInstant.setSessionData({optin:!0}),i.GameTracking.logEventOptinMessage(!0)}).catch(function(){FBInstant.setSessionData({optin:!1}),i.GameTracking.logEventOptinMessage(!1)})})},e.sendSessionData=function(e,t){void 0===t&&(t=null),"undefined"!=typeof FBInstant&&FBInstant.setSessionData({currentLevel:e})},e.getPayloadData=function(e){(void 0===e&&(e=null),"undefined"!=typeof FBInstant)&&e(FBInstant.getEntryPointData()||null)},e.templateShare="Try Home Pin Now",e.templateInvite={cta:"Play",text:{default:"Try Home Pin Now",localizations:{ar_AR:"Try Home Pin Now",en_US:"Try Home Pin Now",es_LA:"Try Home Pin Now"}}},e}();o.FBInstantGames=r,cc._RF.pop()},{"../../base/utils/GUIUtil":"GUIUtil","../tracking/GameTracking":"GameTracking"}],FeatureSkinConfig:[function(e,t,o){"use strict";cc._RF.push(t,"bc158fvtABA75BUJTcghBx6","FeatureSkinConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.FeatureSkinConfig=o.ItemFeatureConfig=void 0;var n=function(e,t,o){void 0===o&&(o=""),this.skinId=e,this.skins=t,this.pathDir=o};o.ItemFeatureConfig=n;var i=function(){function e(){}return e.getSkinConfigById=function(t){for(var o=e.arrayFeatureBoss,n=0;n<o.length;n++)if(o[n].skinId===t)return o[n];return null},e.arrayFeatureBoss=[new n("feature_1","Angel","spines/FeatureSkins/ExportPet"),new n("feature_2","Demon","spines/FeatureSkins/ExportPet"),new n("feature_3","Dragon","spines/FeatureSkins/ExportPet"),new n("feature_4","Halloween","spines/FeatureSkins/ExportPet"),new n("feature_5","Lunar","spines/FeatureSkins/ExportPet"),new n("feature_6","Noel","spines/FeatureSkins/ExportPet"),new n("feature_7","Noel2021","spines/FeatureSkins/ExportPet"),new n("feature_8","Pumkin","spines/FeatureSkins/ExportPet"),new n("feature_9","Thanksgiving","spines/FeatureSkins/ExportPet")],e}();o.FeatureSkinConfig=i,cc._RF.pop()},{}],FeatureUi:[function(e,t,o){"use strict";cc._RF.push(t,"18c42X0lKNGn4BvfzABVtnU","FeatureUi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Tag=null,t.Type=null,t}return i(t,e),t.prototype.RemoveSelf=function(){this.node.destroy()},r([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],FireBall:[function(e,t,o){"use strict";cc._RF.push(t,"3b75aNqdaNIOIPzvHQpdNPY","FireBall");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=e("../../MainScene"),s=e("../../config/AudioPlayId"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bumPrefab=null,t}return i(t,e),t.prototype.onCollisionEnter=function(e){var t=this;if(e.node.group===a.GroupConfig.BERRIE)return this.showBumEffect(),this.node.active=!1,this.node.stopAllActions(),void this.node.removeFromParent();e.node.group===a.GroupConfig.CHARACTER&&(this.showBumEffect(),this.scheduleOnce(function(){t.node.opacity=0,t.node.stopAllActions(),cc.Tween.stopAllByTarget(t.node)},.05),this.scheduleOnce(function(){t.node.active=!1,t.node.removeFromParent()},.2))},t.prototype.showBumEffect=function(){var e=cc.instantiate(this.bumPrefab);e.setPosition(this.node.getPosition()),e.scale=.66,this.node.getParent().addChild(e),c.default.instance.audioPlayer.playAudio(s.AudioPlayId.dragon_fire_ball),cc.tween(e).delay(.8).call(function(){e.removeFromParent()}).start()},t.velocityHit=500,r([p(cc.Prefab)],t.prototype,"bumPrefab",void 0),r([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../MainScene":"MainScene","../../config/AudioPlayId":"AudioPlayId","../../config/GroupConfig":"GroupConfig"}],FirebaseTracking:[function(e,t,o){"use strict";cc._RF.push(t,"34936qb+P1KVquQ2Or7qiy/","FirebaseTracking"),Object.defineProperty(o,"__esModule",{value:!0}),o.FirebaseTracking=void 0;var n=function(){function e(){}return e.logEvent=function(e,t){"undefined"!=typeof firebase&&firebase.analytics().logEvent(e,t)},e.logEventPlayLevel=function(t,o){e.logEvent(e.event_play_level,{level:t,success:o})},e.logEventUnlockSkin=function(t){e.logEvent(e.event_unlock_skin,{skin:t})},e.logEventCreateShortCut=function(t){e.logEvent(e.event_create_shortcut,{level:t})},e.logEventInviteFriend=function(t){e.logEvent(e.event_invite_friends,{level:t})},e.logEventShareGame=function(t){e.logEvent(e.event_share_game,{level:t})},e.logEventQuitGame=function(t){e.logEvent(e.event_quit_game,{level:t})},e.logEventAdLoadFailed=function(t,o){e.logEvent(e.event_ad_load_failed,{ad_type:t,error_type:o})},e.logEventShowAdFailed=function(t){e.logEvent(e.event_show_ad_failed,{error_type:t})},e.logEventShowAd=function(t){e.logEvent(e.event_show_ad,{type:t})},e.logEventOptinMessage=function(t){e.logEvent(e.event_optin_message,{optin:t})},e.logEventUserFromAd=function(t){e.logEvent("ad_user",{ad_id:t})},e.event_create_shortcut="create_shortcut",e.event_invite_friends="invite_friends",e.event_share_game="share_game",e.event_quit_game="quit_game",e.event_play_level="play_level",e.event_unlock_skin="unlock_skin",e.event_show_ad="show_ad",e.event_ad_load_failed="ad_load_failed",e.event_show_ad_failed="show_ad_failed",e.event_optin_message="optin_message",e}();o.FirebaseTracking=n,cc._RF.pop()},{}],Formatter:[function(e,t,o){"use strict";cc._RF.push(t,"5d9f3i32EdJWKUr6F3ttVqY","Formatter"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],FrameByFrame:[function(e,t,o){"use strict";cc._RF.push(t,"37b91uSOkFFCrubu+v1hcc9","FrameByFrame");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.arrayFrames=[],t.dt=.12,t.reverse=!1,t.autoPlay=!0,t.loop=!1,t.time=0,t.anim=null,t.repeatCb=null,t.animDefault="default",t}return i(t,e),t.prototype.onLoad=function(){if(this.sprite||(this.sprite=this.node.getComponent(cc.Sprite),this.sprite)){var e=this.arrayFrames.length,t=Math.round(1/this.dt);this.time=e/t,this.reverse&&this.arrayFrames.reverse();var o=cc.AnimationClip.createWithSpriteFrames(this.arrayFrames,t);this.anim=this.sprite.node.addComponent(cc.Animation),this.anim.addClip(o,this.animDefault)}else cc.error("SpriteFrameBF: Please add Sprite Component")},t.prototype.onEnable=function(){this.autoPlay&&this.play()},t.prototype.onDisable=function(){this.stop()},t.prototype.play=function(e,t){var o=this;void 0===e&&(e=this.loop),void 0===t&&(t=1),this.anim&&(this.anim.stop(),this.anim.play(this.animDefault,0),t--,(e||t>0)&&(this.repeatCb=function(){o.play(e,t)},this.scheduleOnce(this.repeatCb,this.time)))},t.prototype.stop=function(){this.anim&&(this.anim.stop(),this.unschedule(this.repeatCb))},r([s(cc.Sprite)],t.prototype,"sprite",void 0),r([s([cc.SpriteFrame])],t.prototype,"arrayFrames",void 0),r([s(cc.Float)],t.prototype,"dt",void 0),r([s(cc.Boolean)],t.prototype,"reverse",void 0),r([s(cc.Boolean)],t.prototype,"autoPlay",void 0),r([s(cc.Boolean)],t.prototype,"loop",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],GATracking:[function(e,t,o){"use strict";cc._RF.push(t,"50b8e9RVvVLDJaxUjgX6bKV","GATracking"),Object.defineProperty(o,"__esModule",{value:!0}),o.GATracking=void 0;var n=function(){function e(){}return e.logEventUserFromAd=function(e){null!=typeof GameAnalytics&&GameAnalytics("addDesignEvent","ad_id:"+e)},e}();o.GATracking=n,cc._RF.pop()},{}],GUIUtil:[function(e,t,o){"use strict";cc._RF.push(t,"96d7dsVwBhBvojHmMxxWpVf","GUIUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../config/FeatureSkinConfig"),i=e("../../config/SkinConfig"),r=e("../../feature/FeatureUi"),a=e("../../ResUtil"),c=function(){function e(){}return e.addClickListener=function(e,t,o,n,i){void 0===i&&(i="");var r=new cc.Component.EventHandler;r.target=t,r.component=o,r.handler=n,r.customEventData=i,e.getComponent(cc.Button).clickEvents.push(r)},e.addToggleListener=function(e,t,o,n,i){void 0===i&&(i="");var r=new cc.Component.EventHandler;r.target=t,r.component=o,r.handler=n,r.customEventData=i,e.getComponent(cc.Toggle).clickEvents.push(r)},e.addFeatureForCharacter=function(e,t,o){a.ResUtil.getSpineAnimFeature(o,function(t,i){if(!t){var a=e.getComponentInChildren(r.default),c=n.FeatureSkinConfig.getSkinConfigById(o);if(a){if(a.Tag==o)return;var s=a.node.children[0].getComponent(sp.Skeleton);return s.skeletonData=i,s.setSkin(c.skins),s.setAnimation(0,"Fly",!0),void(a.Tag=o)}var l=cc.find("Canvas/Feature"),u=cc.instantiate(l),p=u.children[0].getComponent(sp.Skeleton);u.setScale(Math.abs(e.scaleX),e.scaleY),e.addChild(u),p.skeletonData=i,p.setSkin(c.skins),p.setAnimation(0,"Fly",!0),u.getComponent(r.default).Tag=o,u.active=!0}})},e.addPetForCharacter=function(e,t){a.ResUtil.loadRes("prefabs/pets/Pet",cc.Prefab,function(o,n){if(!o){var i=cc.instantiate(n);e.addChild(i),i.position=t}})},e.getDistancePoints=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.getImgBase64=function(){var e=new cc.Node;e.x=cc.visibleRect.width/2,e.y=cc.visibleRect.height/2,e.parent=cc.director.getScene();var t=e.addComponent(cc.Camera);t.backgroundColor=cc.Color.TRANSPARENT,t.clearFlags=cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL|cc.Camera.ClearFlags.COLOR,t.cullingMask=4294967295;var o=new cc.RenderTexture,n=cc.game._renderContext;o.initWithSize(cc.visibleRect.width,cc.visibleRect.height,n.STENCIL_INDEX8),t.targetTexture=o,t.render();var i=o.readPixels(),r=document.createElement("canvas"),a=r.getContext("2d"),c=r.width=o.width,s=r.height=o.height;r.width=o.width,r.height=o.height;for(var l=4*c,u=0;u<s;u++){for(var p=s-1-u,d=a.createImageData(c,1),f=p*c*4,h=0;h<l;h++)d.data[h]=i[f+h];a.putImageData(d,0,u)}return r.toDataURL("image/jpeg")},e.ativeSkinFeatureIfHave=function(t,o){if(i.SkinConfig.CheckSkinHaveFeature(t))for(var n=t,a=0;a<n.idFeatures.length;a++){var c=n.idFeatures[a];e.addFeatureForCharacter(o,cc.v3(0,0),c,sp.Skeleton)}else{var s=o.getComponentInChildren(r.default);s&&s.node.destroy()}},e}();o.default=c,cc._RF.pop()},{"../../ResUtil":"ResUtil","../../config/FeatureSkinConfig":"FeatureSkinConfig","../../config/SkinConfig":"SkinConfig","../../feature/FeatureUi":"FeatureUi"}],GameConfig:[function(e,t,o){"use strict";cc._RF.push(t,"ea29aooc1FGnJ0IG5Bu1aAz","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameConfig=void 0;var n=function(){function e(){}return e.boss_skin_default="hero_0",e.wife_skin_default="wife_0",e.coin_default=0,e.coin_level_up=100,e.coin_level_bonus=500,e}();o.GameConfig=n,cc._RF.pop()},{}],GameData:[function(e,t,o){"use strict";cc._RF.push(t,"25501QmpYxCcZCkmxSR9tuZ","GameData"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameData=void 0;var n=e("./base/LocalStorageManager"),i=e("./plugins/fb/FBInstantData"),r=e("./config/KingdomData"),a=e("./config/GlobalSignals"),c=e("./config/RoomConfig"),s=e("./config/GameConfig"),l=e("./config/LevelConfig"),u=e("./UserPlayFab"),p=e("./pets/PetDataManager"),d=function(){function e(){}return e.initPlayerData=function(t){var o=this;cc.log("initPlayerData"),n.LocalStorageManager.getItem(e.KEY_DATA),cc.log("init Data from Local"),i.FBInstantData.getData([e.KEY_LEVEL,e.KEY_LEVEL_REAL,e.KEY_ROOM,e.KEY_ITEMS,e.KEY_COIN,e.KEY_BOSS_CURRENT_SKIN,e.KEY_BOSS_SKINS,e.KEY_WIFE_CURRENT_SKIN,e.KEY_WIFE_SKINS,e.KEY_KINGDOM_EARTH,e.KEY_KINGDOM_ICELAND,e.KEY_PETS_DATA,e.KEY_EGGS_DATA,e.KEY_CURRENT_PET],function(e){console.log(e),o.setPlayerData(e),t&&t()},function(){o.setPlayerData({}),t&&t()})},e.setPlayerData=function(t){this.currentLevelId=this.getValue(t,e.KEY_LEVEL,0),this.currentRoomId=this.getValue(t,e.KEY_ROOM,0),this.arrayItem=this.getValue(t,e.KEY_ITEMS,[]),this.playerCoin=this.getValue(t,e.KEY_COIN,0),this.currentSkinBoss=this.getValue(t,e.KEY_BOSS_CURRENT_SKIN,s.GameConfig.boss_skin_default),this.myBossSkins=this.getValue(t,e.KEY_BOSS_SKINS,[]),this.myWifeSkins=this.getValue(t,e.KEY_WIFE_SKINS,[]),this.kingdoms=r.KingdomData.getKingdomData(t),this.currentSkinWife=this.getValue(t,e.KEY_WIFE_CURRENT_SKIN,s.GameConfig.wife_skin_default),this.currentLevelReal=this.getValue(t,e.KEY_LEVEL_REAL,this.currentLevelId),this.levelSize=this.getValue(t,e.KEY_LEVEL_SIZE,l.LevelConfig.realLevelSize),this.CurrentPet=p.PetDataManager.ConvertDataPet(this.getValue(t,e.KEY_CURRENT_PET,"")),this.myPets=p.PetDataManager.ConvertToArrDataPet(this.getValue(t,e.KEY_PETS_DATA,"")),this.myEggs=p.PetDataManager.ConvertToArrDataEgg(this.getValue(t,e.KEY_EGGS_DATA,""))},e.saveKingdomItem=function(e,t,o,n){void 0===n&&(n=null),this.kingdoms[e]||(this.kingdoms[e]={}),this.kingdoms[e][t]=o,r.KingdomData.saveKingdomData(e,this.kingdoms[e],n)},e.saveLevelUp=function(){this.currentLevelId++,this.currentLevelId<this.levelSize?this.currentLevelReal=this.currentLevelId:this.currentLevelReal=0,""!=u.default.DisplayName&&""!=u.default.UserCountryCode&&u.default.setLeaderborad(this.currentLevelId,u.StatisticNameConfig.BEST_LEVEL,function(){}),n.LocalStorageManager.setItem(e.KEY_LEVEL,JSON.stringify(this.currentLevelId)),n.LocalStorageManager.setItem(e.KEY_LEVEL_REAL,JSON.stringify(this.currentLevelReal))},e.saveLevel=function(){n.LocalStorageManager.setItem(e.KEY_LEVEL,JSON.stringify(this.currentLevelId)),n.LocalStorageManager.setItem(e.KEY_LEVEL_REAL,JSON.stringify(this.currentLevelReal))},e.setLevelReal=function(t){this.currentLevelReal=t,n.LocalStorageManager.setItem(e.KEY_LEVEL_REAL,JSON.stringify(t))},e.saveCoin=function(t){this.playerCoin=t,a.GlobalSignals.coinUpdateSignal.dispatch();var o={};o[e.KEY_COIN]=t,i.FBInstantData.setData(o)},e.addCoin=function(e){this.saveCoin(this.playerCoin+e)},e.addRoomItem=function(t,o){if(-1==this.arrayItem.indexOf(t)){this.arrayItem.push(t),this.currentRoomId=o,this.arrayItem.length===c.RoomConfig.rooms[o].size&&(this.currentRoomId=o+1,this.arrayItem=[],cc.log("unlock roomId = "+this.currentRoomId));var n={};n[e.KEY_ITEMS]=this.arrayItem,n[e.KEY_ROOM]=this.currentRoomId,i.FBInstantData.setData(n)}else cc.log("ArrayItems already contains this id")},e.setSkinBoss=function(t,o){if(this.currentSkinBoss!==t){this.currentSkinBoss=t;var n={};n[e.KEY_BOSS_CURRENT_SKIN]=this.currentSkinBoss,i.FBInstantData.setData(n,o)}},e.setSkinWife=function(t,o){if(this.currentSkinWife!==t){this.currentSkinWife=t;var n={};n[e.KEY_WIFE_CURRENT_SKIN]=this.currentSkinWife,i.FBInstantData.setData(n,o)}},e.addSkinBoss=function(t,o){if(-1==this.myBossSkins.indexOf(t)){this.myBossSkins.push(t);var n={};n[e.KEY_BOSS_SKINS]=this.myBossSkins,i.FBInstantData.setData(n,o)}else cc.log("myBossSkins already contains this skinId")},e.addSkinWife=function(t,o){if(-1==this.myWifeSkins.indexOf(t)){this.myWifeSkins.push(t);var n={};n[e.KEY_WIFE_SKINS]=this.myWifeSkins,i.FBInstantData.setData(n,o)}else cc.log("myBossSkins already contains this skinId")},e.clearData=function(){var t={};t[e.KEY_LEVEL]=0,t[e.KEY_ROOM]=0,t[e.KEY_ITEMS]=[],t[e.KEY_COIN]=0,i.FBInstantData.setData(t),n.LocalStorageManager.removeItem(e.KEY_DATA)},e.checkItemCollected=function(t){var o=t.itemConfig;return o.roomId-1<e.currentRoomId||o.roomId-1===e.currentRoomId&&-1!=e.arrayItem.indexOf(o.itemId)},Object.defineProperty(e,"isCreatShortcut",{get:function(){var t=n.LocalStorageManager.getItem(e.KEY_SHORTCUT);return!!t&&"true"===t},set:function(t){n.LocalStorageManager.setItem(e.KEY_SHORTCUT,t?"true":"false")},enumerable:!1,configurable:!0}),e.getValue=function(e,t,o){return""===e[t]||null===e[t]||void 0===e[t]?o:e[t]},e.addPet=function(t,o){if(!this.checkHavePet(t.petId)){this.myPets.push(t);var n={};n[e.KEY_PETS_DATA]=JSON.stringify(this.myPets),i.FBInstantData.setData(n,o)}},e.addExpPet=function(t,o,n,r){for(var c=null,s=!1,l=0;l<this.myPets.length;l++){var u=this.myPets[l];if(u.petId==t){c=u,u.petExp++;var d="Level"+u.petLevel,f=p.PetDataManager.getMaxExpLevel(d);u.petExp==f&&(u.petLevel++,u.petExp=0,s=!0);break}}var h={};n(c,s),r&&(this.playerCoin+=r,h[e.KEY_COIN]=this.playerCoin,a.GlobalSignals.coinUpdateSignal.dispatch()),h[e.KEY_PETS_DATA]=JSON.stringify(this.myPets),i.FBInstantData.setData(h,o)},e.addLevelPet=function(t,o,n){void 0===n&&(n=!0);for(var r=0;r<this.myPets.length;r++){var a=this.myPets[r];a.petId==t&&a.petLevel++}var c={};c[e.KEY_PETS_DATA]=JSON.stringify(this.myPets),i.FBInstantData.setData(c,o)},e.checkHavePet=function(e){for(var t=0;t<this.myPets.length;t++)if(this.myPets[t].petId==e)return!0;return!1},e.addEggNumber=function(t,o){if(!this.checkHaveEgg(t)){var n=new p.EggData;return n.eggId=t,n.eggNumber=1,void this.addEgg(n,o)}for(var r=0;r<this.myEggs.length;r++){var a=this.myEggs[r];a.eggId==t&&a.eggNumber++}var c={};c[e.KEY_EGGS_DATA]=JSON.stringify(this.myEggs),i.FBInstantData.setData(c,o)},e.addEgg=function(t,o){this.myEggs.push(t);var n={};n[e.KEY_EGGS_DATA]=JSON.stringify(this.myEggs),i.FBInstantData.setData(n,o)},e.checkHaveEgg=function(e){for(var t=0;t<this.myEggs.length;t++)if(this.myEggs[t].eggId==e)return!0;return!1},e.getNumberEgg=function(e){for(var t=0;t<this.myEggs.length;t++){var o=this.myEggs[t];if(o.eggId==e)return o.eggNumber}return 0},e.getMyPetWithId=function(t){for(var o=0;o<e.myPets.length;o++){var n=e.myPets[o];if(n.petId==t)return n}return null},e.setCurrentPet=function(t,o){this.CurrentPet=t;var n={};n[e.KEY_CURRENT_PET]=JSON.stringify(this.CurrentPet),i.FBInstantData.setData(n,function(){o()})},e.KEY_DATA="hp_data",e.KEY_SHORTCUT="hp_shortcut",e.KEY_LEVEL="hp_level",e.KEY_LEVEL_REAL="hp_level_real",e.KEY_LEVEL_SIZE="hp_level_size",e.KEY_ROOM="hp_room",e.KEY_ITEMS="hp_items",e.KEY_COIN="hp_coin",e.KEY_BOSS_CURRENT_SKIN="hp_boss_current_skin",e.KEY_BOSS_SKINS="hp_boss_skins",e.KEY_WIFE_CURRENT_SKIN="hp_wife_current_skin",e.KEY_WIFE_SKINS="hp_wife_skins",e.KEY_KINGDOM_EARTH="hp_kingdom_earth",e.KEY_KINGDOM_ICELAND="hp_kingdom_iceland",e.KEY_PETS_DATA="pet_data",e.KEY_EGGS_DATA="egg_data",e.KEY_CURRENT_PET="current_pet",e.currentLevelReal=0,e.currentLevelId=0,e.currentRoomId=0,e.levelSize=0,e.myBossSkins=["boss_52","boss_23","boss_24","boss_25"],e.myWifeSkins=[],e.currentSkinBoss=s.GameConfig.boss_skin_default,e.currentSkinWife=s.GameConfig.wife_skin_default,e.arrayItem=[],e.playerCoin=1e3,e.kingdoms={},e.CURRENT_VERSION_CODE=2,e.DELTA_TIME=1/60,e.CurrentPet=null,e.myPets=[],e.myEggs=[],e}();o.GameData=d,cc._RF.pop()},{"./UserPlayFab":"UserPlayFab","./base/LocalStorageManager":"LocalStorageManager","./config/GameConfig":"GameConfig","./config/GlobalSignals":"GlobalSignals","./config/KingdomData":"KingdomData","./config/LevelConfig":"LevelConfig","./config/RoomConfig":"RoomConfig","./pets/PetDataManager":"PetDataManager","./plugins/fb/FBInstantData":"FBInstantData"}],GameState:[function(e,t,o){"use strict";cc._RF.push(t,"dacfbcWrcNM+o3V07171I9u","GameState"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameState=void 0,function(e){e[e.BEGIN=0]="BEGIN",e[e.PLAYING=1]="PLAYING",e[e.WIN=2]="WIN",e[e.LOSE=3]="LOSE"}(o.GameState||(o.GameState={})),cc._RF.pop()},{}],GameTracking:[function(e,t,o){"use strict";cc._RF.push(t,"3cdce238o1AYa7iveGlHdJU","GameTracking"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameTracking=void 0;var n=e("../firebase/FirebaseTracking"),i=e("../gameanalytics/GATracking"),r=function(){function e(){}return e.logEvent=function(e,t){n.FirebaseTracking.logEvent(e,t)},e.logEventPlayLevel=function(e,t){n.FirebaseTracking.logEventPlayLevel(e,t)},e.logEventUnlockSkin=function(e){n.FirebaseTracking.logEventUnlockSkin(e)},e.logEventCreateShortCut=function(e){n.FirebaseTracking.logEventCreateShortCut(e)},e.logEventInviteFriend=function(e){n.FirebaseTracking.logEventInviteFriend(e)},e.logEventShareGame=function(e){n.FirebaseTracking.logEventShareGame(e)},e.logEventQuitGame=function(e){n.FirebaseTracking.logEventQuitGame(e)},e.logEventAdLoadFailed=function(e,t){n.FirebaseTracking.logEventAdLoadFailed(e,t)},e.logEventShowAdFailed=function(e){n.FirebaseTracking.logEventShowAdFailed(e)},e.logEventShowAd=function(e){n.FirebaseTracking.logEventShowAd(e)},e.logEventOptinMessage=function(e){n.FirebaseTracking.logEventOptinMessage(e)},e.logEventUserFromAd=function(e){n.FirebaseTracking.logEventUserFromAd(e),i.GATracking.logEventUserFromAd(e)},e}();o.GameTracking=r,cc._RF.pop()},{"../firebase/FirebaseTracking":"FirebaseTracking","../gameanalytics/GATracking":"GATracking"}],GasGO:[function(e,t,o){"use strict";cc._RF.push(t,"588442xVPdBnYyvqUV0nR/N","GasGO");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.body=null,t.force=6e3,t.timeFly=0,t}return i(t,e),t.prototype.start=function(){this.timeFly=2*Math.random()},t.prototype.update=function(e){if(this.timeFly-=e,this.timeFly<=0){var t=this.force*(2*Math.random()-1),o=this.force*(2*Math.random()-1);this.body.applyForceToCenter(cc.v2(t,o),!0),this.timeFly=1}},r([s(cc.RigidBody)],t.prototype,"body",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],GemsGO:[function(e,t,o){"use strict";cc._RF.push(t,"49758X5lA1HN6r8+iXJWmeX","GemsGO");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc.Vec3,c=e("../../level/MapLevel"),s=e("../../config/AudioPlayId"),l=e("../../config/GroupConfig"),u=e("../../MainScene"),p=e("../../config/PhysicsConfig"),d=cc._decorator,f=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t.available=!0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){p.PhysicsConfig.initPhysicConfig(this.node,"gems")},t.prototype.start=function(){o.transformCount=0,o.colliderBarrieCount=0},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},t.prototype.onCollisionEnter=function(e){if(this.available)return e.node.group===l.GroupConfig.LAVA?(this.available=!1,c.default.instance.countGemsDestroyed++,this.startTransform(),void this.node.removeFromParent()):e.node.group===l.GroupConfig.BERRIE||e.node.group===l.GroupConfig.ROCK?(o.colliderBarrieCount++,void(6===o.colliderBarrieCount&&(u.default.instance.audioPlayer.playAudio(s.AudioPlayId.effect_gems),this.scheduleOnce(function(){o.colliderBarrieCount=0},2)))):void 0},t.prototype.startTransform=function(){o.transformCount++,8===o.transformCount&&c.default.instance.isPlaying&&u.default.instance.audioPlayer.playAudio(s.AudioPlayId.effect_lava_x_water)},t.prototype.updatePositionToTarget=function(){if(this.node.getParent()){var e=this.node.getParent().convertToNodeSpaceAR(this.target.getParent().convertToWorldSpaceAR(this.target.position)),t=new a(e.x,e.y+20,0),o=this.node.position;Math.abs(o.x-t.x)<10&&Math.abs(o.y-t.y)<10?this.node.removeFromParent():this.node.position=o.lerp(t,.1)}},t.prototype.moveToTarget=function(e,t){var o=this;this.scheduleOnce(function(){c.default.instance.isCollectGems&&(o.target=e,o.node.removeComponent(cc.RigidBody),o.node.removeComponent(cc.PhysicsCollider),o.schedule(o.updatePositionToTarget.bind(o)))},t)},t.transformCount=0,t.colliderBarrieCount=0,o=r([f],t)}(cc.Component));o.default=h,cc._RF.pop()},{"../../MainScene":"MainScene","../../config/AudioPlayId":"AudioPlayId","../../config/GroupConfig":"GroupConfig","../../config/PhysicsConfig":"PhysicsConfig","../../level/MapLevel":"MapLevel"}],GemsPool:[function(e,t,o){"use strict";cc._RF.push(t,"420batOFCJMka+Gx/ETcTXT","GemsPool");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GlobalSignals"),c=e("./GemsGO"),s=e("../character/Boss/Boss"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){this._collectByBoss=this.collectByBoss.bind(this),a.GlobalSignals.collectGemsSignal.add(this._collectByBoss)},t.prototype.onDisable=function(){a.GlobalSignals.collectGemsSignal.remove(this._collectByBoss)},t.prototype.collectByBoss=function(){cc.log("collectByBoss");var e=s.default.instance.node;this.node.children.forEach(function(t,o){t.getComponent(c.default).moveToTarget(e,.25+.02*o)})},r([u],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../../config/GlobalSignals":"GlobalSignals","../character/Boss/Boss":"Boss","./GemsGO":"GemsGO"}],Ghoster:[function(e,t,o){"use strict";cc._RF.push(t,"1b9e4VflSROqpu1QfkSkMlJ","Ghoster");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Enemies"),c=e("../../../config/AudioPlayId"),s=e("../../../MainScene"),l=e("../Character"),u=e("../../../config/GroupConfig"),p=e("../../../config/TagObject"),d=cc._decorator,f=d.ccclass,h=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hit2=null,t}return i(t,e),t.prototype.start=function(){this.hit.active=!1,this.hit2.active=!1},t.prototype.playAttack=function(e){var t=this;if(this.isAttack){var o=e.getComponent(l.default);if(o&&!o.isAlive)return}this.isAttack=!0,this.rotateFaceToTarget(e),this.playAnimation(this.attackAnim),this.scheduleOnce(function(){t.hit.active=!0,t.hit2.active=!0},.15),this.skeleton.setCompleteListener(function(){t.isAlive&&(t.skeleton.setCompleteListener(null),t.playAnimation(t.idleAnim,!0),t.hit.active=!1,t.hit2.active=!1,t.isAttack=!1,t.stopMove(),t.searchCollider.refreshPingToTarget())}),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.ghoster_attack)},t.prototype.onAttackCollider=function(e){this.isAlive&&(cc.log(this.node.name+" onAttackCollider: "+e.node.name),e.node.group!==u.GroupConfig.CHARACTER||e.node==this.groundCollider.node||e.node.name!=p.TagConfig.BOSS&&e.node.name!=p.TagConfig.GIRL&&e.node.name!=p.TagConfig.DOG&&e.node.name!=p.TagConfig.DEMON&&e.node.name!=p.TagConfig.STEALER||this.playAttack(e.node))},t.prototype.onBodyCollider=function(e){if(this.isAlive&&!this.checkIgnoreFluid(e.node.group)&&!this.isSuper)if(e.node.group!==u.GroupConfig.LAVA)if(e.node.group!==u.GroupConfig.SNOW){if(e.node.group===u.GroupConfig.COLLIDER){if(e.node.name==p.TagConfig.HIT){var t=e.node.getComponent(p.default).tag2;return cc.log(this.node.name+" onBodyCollider: "+e.node.group+" tag2 = "+t),void(this.tagHit==p.TagConfig.DOG?t!=p.TagConfig.DOG&&this.onDieNormal():t!=p.TagConfig.FIRE_BALL&&t!=p.TagConfig.BOSS&&t!=p.TagConfig.STICK&&t!=p.TagConfig.ITEM&&t!=p.TagConfig.TRAP&&t!=p.TagConfig.ROCK&&t!=p.TagConfig.BIG_ROCK&&t!=p.TagConfig.BULLET&&t!=p.TagConfig.POW&&t!=p.TagConfig.SAW&&t!=p.TagConfig.LAZE||this.onDieNormal())}if(e.node.name==p.TagConfig.GAS||e.node.name==p.TagConfig.BOMB)return void this.onDieNormal()}}else this.onDieIce();else this.onDieFire()},t.prototype.onDieIce=function(){e.prototype.onDieIce.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},t.prototype.onDieNormal=function(){e.prototype.onDieNormal.call(this),this.hit.active=!1,this.hit2.active=!1,s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},t.prototype.onDieFire=function(){e.prototype.onDieFire.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},r([h(cc.Node)],t.prototype,"hit2",void 0),r([f],t)}(a.default);o.default=y,cc._RF.pop()},{"../../../MainScene":"MainScene","../../../config/AudioPlayId":"AudioPlayId","../../../config/GroupConfig":"GroupConfig","../../../config/TagObject":"TagObject","../Character":"Character","./Enemies":"Enemies"}],Girl:[function(e,t,o){"use strict";cc._RF.push(t,"9c8d7UPKxhHT5I6+bJ4H9t8","Girl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Character"),c=e("../../../config/GroupConfig"),s=e("../../../config/GlobalSignals"),l=e("../../../config/TagObject"),u=e("../../../config/AudioPlayId"),p=e("../../../MainScene"),d=e("../../../config/SkinConfig"),f=e("../../../GameData"),h=e("../../../base/utils/GUIUtil"),y=cc._decorator,g=y.ccclass,_=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.outAnim="win",t.winAnim="win 2",t.flowerAnim="heart",t.wonderSkin="Wonder",t.wonderAppearAnim="WonderAppear",t.wonderIdleAnim="WonderIdle",t.wonderAttackAnim="WonderAttack",t.wonderOutAnim="WonderOut",t.wonderWinAnim="WonderWin",t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.node.zIndex=100,this.initGirlSkin(),this.hit&&(this.hit.active=!1)},t.prototype.initGirlSkin=function(){var e=d.SkinConfig.getSkinGirlConfigById(f.GameData.currentSkinWife);this.changeSkin(e.skins[0]);var t=d.SkinConfig.getSkinGirlConfigById(f.GameData.currentSkinWife);h.default.ativeSkinFeatureIfHave(t,this.node)},t.prototype.onEnable=function(){p.default.instance.audioPlayer.playAudio(u.AudioPlayId.girl_help)},t.prototype.onAttackCollider=function(t,o){if(e.prototype.onAttackCollider.call(this,t,o),t.node.group===c.GroupConfig.ITEM&&t.node.name==l.TagConfig.HOLY_WATER){try{t.node.removeComponent(cc.PhysicsCollider),t.node.removeComponent(cc.BoxCollider),t.node.removeFromParent()}catch(n){cc.warn(n)}return this.stopMove(),void this.changeSkinToWonder()}if(t.node.group===c.GroupConfig.CHARACTER)return this.getCurrentSkin()===this.wonderSkin&&t.node.name!=l.TagConfig.BOSS?void this.playAttack(t.node):void 0},t.prototype.playOutAnimation=function(e){this.rotateFaceToTarget(e),this.getCurrentSkin()===this.wonderSkin?this.playAnimation(this.wonderOutAnim).addAnimation(this.wonderWinAnim,!0):this.playAnimation(this.outAnim).addAnimation(this.winAnim).addAnimation(this.flowerAnim,!0)},t.prototype.playAnimationGiveEgg=function(e,t,o){this.rotateFaceToTarget(e);var n=this.flowerAnim,i=n;t&&(n=t.skins,i=this.getNameAnimGive2(n),s.GlobalSignals.girlGiveEggSignal.dispatch(t.eggId)),this.playAnimation(this.outAnim).addAnimation(this.winAnim).addAnimation(n).addAnimation(i,!0);var r=this.skeleton.findAnimation(this.outAnim).duration;this.scheduleOnce(function(){o()},r+2.2)},t.prototype.changeSkinToWonder=function(){this.changeSkin(this.wonderSkin),this.playAnimation(this.wonderAppearAnim).addAnimation(this.wonderIdleAnim,!0);var e=this.skeleton.findAnimation(this.wonderAppearAnim).duration;cc.tween(this.skeleton.node).by(e,{position:new cc.Vec3(0,20,0)}).start(),this.attackCollider.node.getComponent(cc.BoxCollider).size.width+=40,p.default.instance.audioPlayer.playAudio(u.AudioPlayId.boss_take_stick);var t=this.groundCollider.node.getComponent(l.default);t&&(t.setTag(l.TagConfig.GIRL_WONDER),cc.log("changeSkinToWonder"))},t.prototype.playAttack=function(e){var t=this;this.hit&&(cc.log("wonder playAttack"),this.rotateFaceToTarget(e),this.playAnimation(this.wonderAttackAnim),this.stopMove(),this.scheduleOnce(function(){t.hit.active=!0},.35),this.skeleton.setCompleteListener(function(){t.skeleton.setCompleteListener(null),t.playAnimation(t.wonderIdleAnim,!0),t.hit.active=!1,t.stopMove()}))},t.prototype.onHeadCollider=function(e){this.isAlive&&this.getCurrentSkin()!==this.wonderSkin&&(e.node.group!==c.GroupConfig.ROCK?e.node.group!==c.GroupConfig.ITEM||e.node.name!=l.TagConfig.CHEST&&e.node.name!=l.TagConfig.ITEM||this.onDieNormal():e.node.name==l.TagConfig.BIG_ROCK&&(this.onDieNormal(),this.disablePhysicsBody()))},t.prototype.onBodyCollider=function(e){if(this.isAlive&&this.getCurrentSkin()!==this.wonderSkin)if(e.node.group!==c.GroupConfig.LAVA)if(e.node.group!==c.GroupConfig.SNOW){if(e.node.group===c.GroupConfig.COLLIDER){if(e.node.name==l.TagConfig.REDIRECT_RIGHT||e.node.name==l.TagConfig.REDIRECT_LEFT)return void e.node.removeFromParent();if(e.node.name==l.TagConfig.GAS||e.node.name==l.TagConfig.BOMB)return void this.onDieNormal();if(e.node.name==l.TagConfig.HIT)return void this.onDieNormal()}}else this.onDieIce();else this.onDieFire()},t.prototype.onDieNormal=function(){this.stun.node.active=!0,this.playAnimation(this.dieAnim),this.isAlive=!1,s.GlobalSignals.questFailSignal.dispatch(),p.default.instance.audioPlayer.playAudio(u.AudioPlayId.girl_die)},t.prototype.onDieFire=function(){this.stun.node.active=!0,this.playAnimation(this.dieFireAnim),this.isAlive=!1,s.GlobalSignals.questFailSignal.dispatch(),p.default.instance.audioPlayer.playAudio(u.AudioPlayId.girl_die)},t.prototype.onDieIce=function(){this.stun.node.active=!0,this.playAnimation(this.dieIceAnim),this.isAlive=!1,s.GlobalSignals.questFailSignal.dispatch(),p.default.instance.audioPlayer.playAudio(u.AudioPlayId.girl_die)},t.prototype.getNameAnimGive2=function(e){var t=e.split(/(\d+)/),o=t[0],n=t[1];return o+n+n},r([g],t)}(a.default));o.default=_,cc._RF.pop()},{"../../../GameData":"GameData","../../../MainScene":"MainScene","../../../base/utils/GUIUtil":"GUIUtil","../../../config/AudioPlayId":"AudioPlayId","../../../config/GlobalSignals":"GlobalSignals","../../../config/GroupConfig":"GroupConfig","../../../config/SkinConfig":"SkinConfig","../../../config/TagObject":"TagObject","../Character":"Character"}],GlobalSignals:[function(e,t,o){"use strict";cc._RF.push(t,"d7e33gGPwZO5rCuV5Ept4/A","GlobalSignals"),Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalSignals=void 0;var n=e("../base/Signal"),i=function(){function e(){}return e.coinUpdateSignal=new n.Signal,e.collectGemsSignal=new n.Signal,e.autoMoveSignal=new n.Signal,e.questFailSignal=new n.Signal,e.questPassSignal=new n.Signal,e.castleUpgradeSignal=new n.Signal,e.changeSkinBossSignal=new n.Signal,e.changeSkinPetSignal=new n.Signal,e.girlGiveEggSignal=new n.Signal,e.bossAttackSignal=new n.Signal,e.bossWalkToTargetSignal=new n.Signal,e.nextLevelSignal=new n.Signal,e.updateToggleSound=new n.Signal,e.bgLoaderCompleted=new n.Signal,e}();o.GlobalSignals=i,cc._RF.pop()},{"../base/Signal":"Signal"}],GroupConfig:[function(e,t,o){"use strict";cc._RF.push(t,"fa95d9uKKlENZRSJSsK4VfL","GroupConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.GroupConfig=void 0;var n=function(){function e(){}return e.DEFAULT="default",e.LAVA="lava",e.BERRIE="berrie",e.GEMS="gems",e.TOUCH="touch",e.CHARACTER="character",e.WATER="water",e.SNOW="snow",e.ROCK="rock",e.ITEM="item",e.COLLIDER="collider",e.GAS="gas",e.DEAD="dead",e}();o.GroupConfig=n,cc._RF.pop()},{}],HalloweenPopup:[function(e,t,o){"use strict";cc._RF.push(t,"3a406nHb5tMtpxco+Jx/60H","HalloweenPopup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../base/utils/MathUtil"),c=e("../config/SkinConfig"),s=e("../GameData"),l=e("./EventHomePinManger"),u=e("./ItemPopupHalloween"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbPumkin=null,t.scrollViewSkinBoss=null,t.scrollViewSkinGirl=null,t.progressBarEvent=null,t.nodeItemBoss=null,t.nodeItemGirl=null,t.listItemScrollView=[],t}return i(t,e),t.prototype.onEnable=function(){this.node.active=!0;var e=l.default.instance.helperEvent.getDataEvent();this.updateItem(e),this.updateProgessBar(e),this.updateLbPumkin(e)},t.prototype.onDisable=function(){},t.prototype.updateItem=function(e){for(var t=e.List_Skin_collect_need,o=e.List_Skin_My_Collect,n=e.List_Skin_Girl_Collect,i=0;i<o.length;i++){var r=t[p=o[i]],a=c.SkinConfig.getSkinConfigById(p);(d=this.scrollViewSkinBoss.content.children[i])||(d=cc.instantiate(this.nodeItemBoss),this.scrollViewSkinBoss.content.addChild(d),d.active=!0);var s=d.getComponent(u.default),l=this.checkSkinCanCollect(p,e);s.InitInfo({skinId:p,Value:r,tag:a},l)}for(i=0;i<n.length;i++){var p,d;r=t[p=n[i]],a=c.SkinConfig.getSkinGirlConfigById(p),(d=this.scrollViewSkinGirl.content.children[i])||(d=cc.instantiate(this.nodeItemGirl),this.scrollViewSkinGirl.content.addChild(d),d.active=!0),s=d.getComponent(u.default),l=this.checkSkinCanCollect(p,e),s.InitInfo({skinId:p,Value:r,tag:a},l)}},t.prototype.updateProgessBar=function(e){var t=e.List_Skin_collect_need,o=e.My_Pumpkin_have,n=this.getMaxValueItems(t);this.progressBarEvent.progress=o/n},t.prototype.updateLbPumkin=function(e){var t=e.My_Pumpkin_have;this.lbPumkin.string="Balls:"+t},t.prototype.getMaxValueItems=function(e){var t=0;return Object.keys(e).forEach(function(o){var n=e[o];n>=t&&(t=n)}),t},t.prototype.checkSkinCollected=function(e){return s.GameData.myBossSkins.includes(e)},t.prototype.checkSkinWifeCollected=function(e){return s.GameData.myWifeSkins.includes(e)},t.prototype.checkSkinCanCollect=function(e,t){if(e.includes("boss")){if(this.checkSkinCollected(e))return 2}else if(this.checkSkinWifeCollected(e))return 2;var o=t,n=o.List_Skin_collect_need[e];if(-1==n){var i=a.default.getTimeRest(new Date,t.DateEventReward);return t.DateEventReward.getDay(),i<=0&&t.my_Rank_Event<=100?3:-1}return o.My_Pumpkin_have>=n?3:1},r([f(cc.Label)],t.prototype,"lbPumkin",void 0),r([f(cc.ScrollView)],t.prototype,"scrollViewSkinBoss",void 0),r([f(cc.ScrollView)],t.prototype,"scrollViewSkinGirl",void 0),r([f(cc.ProgressBar)],t.prototype,"progressBarEvent",void 0),r([f(cc.Node)],t.prototype,"nodeItemBoss",void 0),r([f(cc.Node)],t.prototype,"nodeItemGirl",void 0),r([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../GameData":"GameData","../base/utils/MathUtil":"MathUtil","../config/SkinConfig":"SkinConfig","./EventHomePinManger":"EventHomePinManger","./ItemPopupHalloween":"ItemPopupHalloween"}],Halloween:[function(e,t,o){"use strict";cc._RF.push(t,"d291en5K/1L0pZsXMuFeNE/","Halloween");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.scrollViewSkinBoss=null,t.scrollViewSkinGirl=null,t}return i(t,e),t.prototype.start=function(){},r([s(cc.Label)],t.prototype,"label",void 0),r([s(cc.Label)],t.prototype,"scrollViewSkinBoss",void 0),r([s(cc.Label)],t.prototype,"scrollViewSkinGirl",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Hasher:[function(e,t,o){"use strict";cc._RF.push(t,"1ce7bQAEo5GwqN1P8O2GU7b","Hasher");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Hasher=void 0;var r=function(e){function t(t){var o=e.call(this,Object.assign({blockSize:16},t))||this;return o.reset(),o}return i(t,e),t._createHelper=function(e){return function(t,o){return new e(o).finalize(t)}},t.prototype.update=function(e){return this._append(e),this._process(),this},t.prototype.finalize=function(e){return e&&this._append(e),this._doFinalize()},t}(e("../lib/BufferedBlockAlgorithm").BufferedBlockAlgorithm);o.Hasher=r,cc._RF.pop()},{"../lib/BufferedBlockAlgorithm":"BufferedBlockAlgorithm"}],HelperDataHalloween:[function(e,t,o){"use strict";cc._RF.push(t,"c548eW53MVCt7TgJVmxhPMp","HelperDataHalloween"),Object.defineProperty(o,"__esModule",{value:!0}),o.HelperDataHalloween=o.DataHalloween=void 0;var n=e("../UserPlayFab"),i=function(){this.My_Pumpkin_have=0,this.DateEventReward=new Date("2021-10-31T03:24:00"),this.DateEvent=new Date(2021,10,11),this.List_Idskin_Of_Event_Collected=[],this.List_Skin_collect_need={},this.List_Skin_My_Collect=[],this.List_Skin_Girl_Collect=[],this.my_Rank_Event=9999};o.DataHalloween=i;var r=[{skinId:"boss_52",value:50},{skinId:"boss_53",value:100},{skinId:"boss_54",value:150},{skinId:"wife_24",value:300},{skinId:"wife_25",value:500},{skinId:"wife_26",value:-1}],a=function(){function e(){this.dataHalloween=new i;for(var e=0;e<r.length;e++){var t=r[e];this.dataHalloween.List_Skin_collect_need[t.skinId]=t.value,t.skinId.includes("boss")?this.dataHalloween.List_Skin_My_Collect.push(t.skinId):this.dataHalloween.List_Skin_Girl_Collect.push(t.skinId)}}return e.prototype.getDataEvent=function(e){var t=this;n.default.loginsuccessful&&n.default.getMyRankLeadBoard("HalloweenEvent",function(o,n){if(!n){if(o.data.Leaderboard)for(var i=0;i<o.data.Leaderboard.length;i++){var r=o.data.Leaderboard[i];t.dataHalloween.My_Pumpkin_have=r.StatValue,t.dataHalloween.my_Rank_Event=r.Position}e&&e(null,t.dataHalloween)}})},e.prototype.setDataEvent=function(e,t){t&&t(null,this.dataHalloween)},e.prototype.SaveDataEvent=function(){n.default.setLeaderborad(this.dataHalloween.My_Pumpkin_have,"HalloweenEvent",function(){})},e.prototype.clearDataEvent=function(){},e}();o.HelperDataHalloween=a,cc._RF.pop()},{"../UserPlayFab":"UserPlayFab"}],HelperEventHalloween:[function(e,t,o){"use strict";cc._RF.push(t,"dc9fbizrwlBfLTksLYvKoFS","HelperEventHalloween");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/GlobalSignals"),c=e("../GameData"),s=e("./HelperDataHalloween"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.Init=function(){this.helperData=new s.HelperDataHalloween,this._questFailSignal=this.questFailSignal.bind(this),this._questPassSignal=this.questPassSignal.bind(this),this._collectGemsSignal=this.collectGemsSignal.bind(this)},t.prototype.StartEventHomePin=function(){this.helperData.getDataEvent(),a.GlobalSignals.questFailSignal.add(this._questFailSignal),a.GlobalSignals.questPassSignal.add(this._questPassSignal),a.GlobalSignals.collectGemsSignal.add(this._collectGemsSignal)},t.prototype.EndEventHomePin=function(){a.GlobalSignals.questFailSignal.remove(this._questFailSignal),a.GlobalSignals.questPassSignal.remove(this._questPassSignal),a.GlobalSignals.collectGemsSignal.remove(this._collectGemsSignal)},t.prototype.getDataEvent=function(e){return this.helperData.getDataEvent(e),this.helperData.dataHalloween},t.prototype.setDataEvent=function(e,t){this.helperData.dataHalloween.key&&(this.helperData.dataHalloween.key=t)},t.prototype.SaveDataEvent=function(e,t){this.helperData.SaveDataEvent(e,t)},t.prototype.questFailSignal=function(){},t.prototype.questPassSignal=function(){},t.prototype.collectGemsSignal=function(){this.helperData.dataHalloween.My_Pumpkin_have++,this.SaveDataEvent(null)},t.prototype.checkSkinCollected=function(e){return c.GameData.myBossSkins.includes(e)},t.prototype.checkSkinCanCollect=function(e){if(!this.checkSkinCollected(e))return!1;var t=this.helperData.dataHalloween,o=t.List_Skin_collect_need[e];return t.My_Pumpkin_have>=o},t.prototype.getYouInTop100=function(){},r([u],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../GameData":"GameData","../config/GlobalSignals":"GlobalSignals","./HelperDataHalloween":"HelperDataHalloween"}],Hex:[function(e,t,o){"use strict";cc._RF.push(t,"c6ade/e3RxN56M3AatxdO1q","Hex"),Object.defineProperty(o,"__esModule",{value:!0}),o.Hex=void 0;var n=e("../lib/WordArray"),i=function(){function e(){}return e.stringify=function(e){for(var t=[],o=0;o<e.sigBytes;o++){var n=e.words[o>>>2]>>>24-o%4*8&255;t.push((n>>>4).toString(16)),t.push((15&n).toString(16))}return t.join("")},e.parse=function(e){for(var t=e.length,o=[],i=0;i<t;i+=2)o[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new n.WordArray(o,t/2)},e}();o.Hex=i,cc._RF.pop()},{"../lib/WordArray":"WordArray"}],HomeScreen:[function(e,t,o){"use strict";cc._RF.push(t,"573e4h+CpRNaq7XKhg4C1Rb","HomeScreen");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./MainScene"),c=e("./config/AudioPlayId"),s=e("./GameData"),l=e("./ResUtil"),u=e("./room/MyRoom"),p=e("./plugins/fb/FBInstantGames"),d=e("./plugins/tracking/GameTracking"),f=e("./UserPlayFab"),h=e("./base/utils/StringUtil"),y=e("./base/LocalStorageManager"),g=e("./base/audio/AudioManager"),_=e("./base/glance_Global"),v=e("./config/GlobalSignals"),m=e("./SetLanguage"),b=cc._decorator,C=b.ccclass,P=b.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelLabel=null,t.roomRoot=null,t.uiRoot=null,t.backgroundMusic=null,t.firstInitStartGame=!0,t.visibleRoomId=-1,t}var o;return i(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){s.GameData.initPlayerData(null),o._instance=this,this.activeHomeUI()},t.prototype.start=function(){var e=JSON.parse(y.LocalStorageManager.getItem("sound_effect")),t=JSON.parse(y.LocalStorageManager.getItem("sound_music"));null==e?y.LocalStorageManager.setItem("sound_music",JSON.stringify(!0)):g.default.EffectEnable=e,null==t?y.LocalStorageManager.setItem("sound_effect",JSON.stringify(!0)):g.default.MusicEnable=t,v.GlobalSignals.updateToggleSound.dispatch()},t.prototype.onEnable=function(){cc.log("HomeScreen onEnable"),0===this.roomRoot.childrenCount&&this.loadCurrentRoom(),this.backgroundMusic||(this.backgroundMusic=a.default.instance.audioPlayer.playAudio(c.AudioPlayId.home_music,!0))},t.prototype.onDisable=function(){this.backgroundMusic&&(a.default.instance.audioPlayer.stopAudioPlay(this.backgroundMusic),this.backgroundMusic=null)},t.prototype.activeHomeUI=function(){cc.log("activeHomeUI"),this.uiRoot.active=!0,this.levelLabel.string=m.ChangeLanguage.getText("level")+(s.GameData.currentLevelId+1)},t.prototype.initOpenItem=function(e,t){var o=this;cc.log("initOpenItem: roomId = "+e.roomId+", idInRoom = "+e.itemId),this.uiRoot.active=!1;var n=e.roomId-1;if(cc.log("roomId = "+n+", currentRoomId = "+s.GameData.currentRoomId),n!=this.visibleRoomId)this.roomRoot.removeAllChildren(),this.loadCurrentRoom(function(){var n=o.roomRoot.children[0].getComponent(u.default);n&&n.openItem(e,t)});else if(this.roomRoot.childrenCount>0){var i=this.roomRoot.children[0].getComponent(u.default);i&&i.openItem(e,t)}},t.prototype.loadCurrentRoom=function(e){var t=this;void 0===e&&(e=null),console.log("loadCurrentRoom: "+s.GameData.currentRoomId),this.loadRoom(s.GameData.currentRoomId,function(){e&&e(),t.firstInitStartGame&&(t.firstInitStartGame=!1,t.activeHomeUI(),a.default.instance.initStartGame())})},t.prototype.loadRoom=function(e,t){var o=this;void 0===t&&(t=null),console.log("loadRoom: "+e),a.default.instance.showLoading(),l.ResUtil.loadRoomById(e,function(n){a.default.instance.hideLoading(),o.roomRoot.childrenCount>0&&o.roomRoot.removeAllChildren();var i=cc.instantiate(n);o.visibleRoomId=e,o.roomRoot.addChild(i),t&&t()})},t.prototype.playGame=function(){null!=a.default.instance.loadLevelCallback?(a.default.instance.showLoading(),a.default.instance.loadLevelCallback=function(){a.default.instance.showGamePlayScreen(),a.default.instance.hideLoading()}):a.default.instance.showGamePlayScreen(),JSON.parse(cc.sys.localStorage.getItem("firstTime"))?(_.default.instance.sendEventStart(),cc.sys.localStorage.setItem("firstTime",JSON.stringify(!1))):_.default.instance.sendEventReplay(s.GameData.currentLevelId+1),_.default.instance.sendEventLevel(s.GameData.currentLevelId+1)},t.prototype.onClickSetting=function(){a.default.instance.showSettingPopup()},t.prototype.onClickSelectRoom=function(){a.default.instance.showSelectRoomPopup()},t.prototype.onClickOutfit=function(){a.default.instance.showSkinPopup()},t.prototype.onClickHouse=function(){null!=a.default.instance.loadKingdomBuilderCallback?(a.default.instance.showLoading(),a.default.instance.loadKingdomBuilderCallback=function(){a.default.instance.showCastleScreen(),a.default.instance.hideLoading()}):a.default.instance.showCastleScreen()},t.prototype.onClickShare=function(){p.FBInstantGames.onShareGame(function(){d.GameTracking.logEventShareGame(s.GameData.currentLevelId)})},t.prototype.onClickInvite=function(){p.FBInstantGames.inviteFriends(function(){d.GameTracking.logEventInviteFriend(s.GameData.currentLevelId)})},t.prototype.onClickEvent=function(){a.default.instance.showEventPopup()},t.prototype.onClickRank=function(){null!=h.StringUtil.splitCountry(f.default.DisplayName).countryCodes||""!=f.default.UserCountryCode?a.default.instance.showRankPopup({type:"normal",StatisticName:"",StatValue:"Level"}):a.default.instance.showEntryYourNamePopup({type:"normal",StatisticName:"",StatValue:"Level"})},t.prototype.onClickGift=function(){a.default.instance.showDailyPopup()},t.prototype.onClickPet=function(){a.default.instance.showPetPopup()},t._instance=null,r([P(cc.Label)],t.prototype,"levelLabel",void 0),r([P(cc.Node)],t.prototype,"roomRoot",void 0),r([P(cc.Node)],t.prototype,"uiRoot",void 0),o=r([C],t)}(cc.Component);o.default=S,cc._RF.pop()},{"./GameData":"GameData","./MainScene":"MainScene","./ResUtil":"ResUtil","./SetLanguage":"SetLanguage","./UserPlayFab":"UserPlayFab","./base/LocalStorageManager":"LocalStorageManager","./base/audio/AudioManager":"AudioManager","./base/glance_Global":"glance_Global","./base/utils/StringUtil":"StringUtil","./config/AudioPlayId":"AudioPlayId","./config/GlobalSignals":"GlobalSignals","./plugins/fb/FBInstantGames":"FBInstantGames","./plugins/tracking/GameTracking":"GameTracking","./room/MyRoom":"MyRoom"}],HouseBuilder:[function(e,t,o){"use strict";cc._RF.push(t,"6244a54NMBCBY/tZl80v46P","HouseBuilder");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.houseName="",t.imageSprite=null,t.arrayLevels=[],t.level=0,t}return i(t,e),t.prototype.showLevel=function(e){this.level=e,this.imageSprite.spriteFrame=0==e?null:this.arrayLevels[e-1]},r([s(cc.String)],t.prototype,"houseName",void 0),r([s(cc.Sprite)],t.prototype,"imageSprite",void 0),r([s([cc.SpriteFrame])],t.prototype,"arrayLevels",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],HouseItem:[function(e,t,o){"use strict";cc._RF.push(t,"669b64o5WxCU4MshLeUtVEB","HouseItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameData"),c=e("../base/utils/StringUtil"),s=e("../config/GlobalSignals"),l=e("../config/KingdomConfig"),u=e("../config/AudioPlayId"),p=e("../MainScene"),d=cc._decorator,f=d.ccclass,h=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.coinLabel=null,t.completeLabel=null,t.progressBar=null,t.starFrames=[],t.arrayStars=[],t.icon1=null,t.icon2=null,t.arrow=null,t.btnBuild=null,t.btnUpgrade=null,t.level=0,t.icon1Pos=null,t.config=null,t.prices=null,t.rootPopup=null,t}return i(t,e),t.prototype.onLoad=function(){this.icon1Pos=this.icon1.node.position},t.prototype.initHouseItem=function(e,t){this.config=e,this.rootPopup=t,this.prices=l.KingdomConfig.getKingdomCfg(e.kingdomName).prices,this.updateBuild(0)},t.prototype.updateBuild=function(e){var t=this;this.level=e,this.arrayStars.forEach(function(o,n){o.spriteFrame=n<e?t.starFrames[1]:t.starFrames[0]}),this.progressBar.fillRange=(e-1)/(this.arrayStars.length-1),e>0&&e<this.arrayStars.length?(this.icon2.node.active=!0,this.arrow.node.active=!0,this.icon1.node.position=this.icon1Pos,this.icon1.spriteFrame=this.config.houseFrames[e-1],this.icon2.spriteFrame=this.config.houseFrames[e]):(this.icon2.node.active=!1,this.arrow.node.active=!1,this.icon1.node.position=this.arrow.node.position,this.icon1.spriteFrame=0===e?this.config.houseFrames[0]:this.config.houseFrames[e-1],this.icon1.node.y=-25),this.btnBuild.node.active=0===e,this.btnUpgrade.node.active=e>0&&e<this.arrayStars.length,this.completeLabel.node.active=e===this.arrayStars.length,this.coinLabel.node.active=e<this.arrayStars.length;var o=!1;if(e<this.arrayStars.length){var n=this.prices[e];this.coinLabel.string=c.StringUtil.preprocessingMoney(n),a.GameData.playerCoin>=n&&(o=!0)}this.coinLabel.node.color=o?cc.Color.WHITE:cc.Color.RED,this.btnBuild.interactable=o,this.btnUpgrade.interactable=o},t.prototype.onClickBuild=function(){var e=this;if(!(this.level>=this.arrayStars.length)){var t=this.prices[this.level];if(a.GameData.playerCoin<t)cc.warn("not enough coin to build");else{p.default.instance.audioPlayer.playAudio(u.AudioPlayId.effect_build,!1,.5);var o=this.level+1;a.GameData.saveKingdomItem(this.config.kingdomName,this.config.houseName,o,function(n){n?console.warn("Build failure!"):(console.log("Build Success!"),a.GameData.addCoin(-t),e.rootPopup.active=!1,s.GlobalSignals.castleUpgradeSignal.dispatch(e.config.houseName,o))})}}},r([h(cc.Label)],t.prototype,"coinLabel",void 0),r([h(cc.Label)],t.prototype,"completeLabel",void 0),r([h(cc.Sprite)],t.prototype,"progressBar",void 0),r([h([cc.SpriteFrame])],t.prototype,"starFrames",void 0),r([h([cc.Sprite])],t.prototype,"arrayStars",void 0),r([h(cc.Sprite)],t.prototype,"icon1",void 0),r([h(cc.Sprite)],t.prototype,"icon2",void 0),r([h(cc.Sprite)],t.prototype,"arrow",void 0),r([h(cc.Button)],t.prototype,"btnBuild",void 0),r([h(cc.Button)],t.prototype,"btnUpgrade",void 0),r([f],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../GameData":"GameData","../MainScene":"MainScene","../base/utils/StringUtil":"StringUtil","../config/AudioPlayId":"AudioPlayId","../config/GlobalSignals":"GlobalSignals","../config/KingdomConfig":"KingdomConfig"}],ICharacterCollider:[function(e,t,o){"use strict";cc._RF.push(t,"155836eOTtDl5t03fvj3xTX","ICharacterCollider"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IHelperDataEvent:[function(e,t,o){"use strict";cc._RF.push(t,"86aece7hjNHPrBvx4VQECQK","IHelperDataEvent"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator;n.ccclass,n.property,cc._RF.pop()},{}],IHelperEventHomePin:[function(e,t,o){"use strict";cc._RF.push(t,"f7a00f91hZN2qcnRmwgVKO+","IHelperEventHomePin");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.StartEventHomePin=function(){},t.prototype.EndEventHomePin=function(){},t.prototype.Init=function(){},t.prototype.getDataEvent=function(){},t.prototype.setDataEvent=function(){},t.prototype.SaveDataEvent=function(){},r([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],IconQuest:[function(e,t,o){"use strict";cc._RF.push(t,"2a68fO1KYZNaruNiQMRMCHc","IconQuest");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.IconQuest=void 0;var i=e("../config/QuestType"),r=cc._decorator,a=r.ccclass,c=r.property,s=function(){function e(){this.questType=i.QuestType.COLLECT_GEMS,this.icon=null}return n([c({type:cc.Enum(i.QuestType)})],e.prototype,"questType",void 0),n([c(cc.SpriteFrame)],e.prototype,"icon",void 0),n([a("IconQuest")],e)}();o.IconQuest=s,cc._RF.pop()},{"../config/QuestType":"QuestType"}],ItemChest:[function(e,t,o){"use strict";cc._RF.push(t,"681e1NSsvhH4pIVVIjWga3a","ItemChest");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=e("../../config/GlobalSignals"),s=e("../../base/ColliderCallback"),l=e("../../config/PhysicsConfig"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.dieAnim="Fire",t.openAnim="Animation",t.gemsPrefab=null,t.firePrefab2=null,t.collider=null,t.isAlive=!0,t}return i(t,e),t.prototype.onLoad=function(){l.PhysicsConfig.initPhysicConfig(this.node,"chest")},t.prototype.start=function(){this.collider.setColliderCallback(this.onCollisionEnter.bind(this))},t.prototype.onCollisionEnter=function(e){if(this.isAlive)return e.node.group===a.GroupConfig.LAVA?(this.isAlive=!1,this.skeleton.node.color=new cc.Color(10,10,10,255),this.showFireEffect(),void c.GlobalSignals.questFailSignal.dispatch()):void 0},t.prototype.openItem=function(){var e=this;this.playAnimation(this.openAnim,!1);var t=this.skeleton.findAnimation(this.openAnim).duration;this.node.getComponent(cc.BoxCollider).enabled=!1,this.scheduleOnce(function(){var t=cc.instantiate(e.gemsPrefab);t.position=cc.Vec3.ZERO,e.node.addChild(t)},t)},t.prototype.playAnimation=function(e,t){return void 0===t&&(t=!1),this.skeleton.setAnimation(0,e,t),this},t.prototype.addAnimation=function(e,t,o){return void 0===t&&(t=!1),void 0===o&&(o=0),this.skeleton.addAnimation(0,e,t,o),this},t.prototype.showFireEffect=function(){if(this.firePrefab2){var e=cc.instantiate(this.firePrefab2);e.setPosition(0,0),e.scale=1,this.node.addChild(e),cc.tween(e).delay(2).call(function(){e.removeFromParent()}).start()}else cc.warn("firePrefab is null")},r([d(sp.Skeleton)],t.prototype,"skeleton",void 0),r([d(cc.String)],t.prototype,"dieAnim",void 0),r([d(cc.String)],t.prototype,"openAnim",void 0),r([d(cc.Prefab)],t.prototype,"gemsPrefab",void 0),r([d(cc.Prefab)],t.prototype,"firePrefab2",void 0),r([d(s.default)],t.prototype,"collider",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../base/ColliderCallback":"ColliderCallback","../../config/GlobalSignals":"GlobalSignals","../../config/GroupConfig":"GroupConfig","../../config/PhysicsConfig":"PhysicsConfig"}],ItemChooseCountry:[function(e,t,o){"use strict";cc._RF.push(t,"913d53v9+1AoJelSi/CnA3T","ItemChooseCountry");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../base/utils/GUIUtil"),c=e("../ResUtil"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconCountry=null,t.lbnameConntry=null,t.nodeCheck=null,t.btn_click=null,t._isCheck=!1,t.chooseCountryClickCallback=null,t}return i(t,e),t.prototype.onLoad=function(){this.btn_click=this.node.getComponent(cc.Button),this.btn_click||(this.btn_click=this.node.addComponent(cc.Button)),a.default.addClickListener(this.btn_click,this.node,"ItemChooseCountry","onClickChooseCountry")},t.prototype.InitInfor=function(e,t,o){var n=this;this.lbnameConntry.string=e,c.ResUtil.getIconCountry(t,function(e,t){e||(n.iconCountry.spriteFrame=t)}),this.chooseCountryClickCallback=o},t.prototype.onClickChooseCountry=function(){this._isCheck=!0,this.activeIconCheck(),this.chooseCountryClickCallback()},t.prototype.activeIconCheck=function(){this.nodeCheck.active=!0},t.prototype.deActiveIconCheck=function(){this.nodeCheck.active=!1},r([u(cc.Sprite)],t.prototype,"iconCountry",void 0),r([u(cc.Label)],t.prototype,"lbnameConntry",void 0),r([u(cc.Node)],t.prototype,"nodeCheck",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../ResUtil":"ResUtil","../base/utils/GUIUtil":"GUIUtil"}],ItemDailyPlus:[function(e,t,o){"use strict";cc._RF.push(t,"890c6EnYHtOkLga5mSvzPXg","ItemDailyPlus");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../SetLanguage"),c=e("../base/utils/GUIUtil"),s=e("../config/SkinConfig"),l=e("./ItemDaily"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.lbNameAnim=null,t.nodeCoin=null,t}return i(t,e),t.prototype.InitInfo=function(t,o,n){e.prototype.InitInfo.call(this,t,o,n);var i=t.skin;i?(this.setAnim(i),this.nodeCoin.active=!1,this.lbNameAnim.string=a.ChangeLanguage.getText(""+i.name)):(this.lbNameAnim.node.active=!1,this.skeleton.node.active=!1,this.nodeCoin.active=!0)},t.prototype.setAnim=function(e){this.skeleton.node.active=!0;var t=s.SkinConfig.getSkinConfigById(e.id);this.skeleton.setSkin(t.skins[0]),c.default.ativeSkinFeatureIfHave(t,this.skeleton.node)},r([d(sp.Skeleton)],t.prototype,"skeleton",void 0),r([d(cc.Label)],t.prototype,"lbNameAnim",void 0),r([d(cc.Node)],t.prototype,"nodeCoin",void 0),r([p],t)}(l.default);o.default=f,cc._RF.pop()},{"../SetLanguage":"SetLanguage","../base/utils/GUIUtil":"GUIUtil","../config/SkinConfig":"SkinConfig","./ItemDaily":"ItemDaily"}],ItemDailySpecail:[function(e,t,o){"use strict";cc._RF.push(t,"55d14N0rStNfKRNUfrQxa4a","ItemDailySpecail");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return i(t,e),t.prototype.start=function(){},r([s(cc.Label)],t.prototype,"label",void 0),r([s],t.prototype,"text",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ItemDaily:[function(e,t,o){"use strict";cc._RF.push(t,"7f235CueopM6KoP5sx8OHgK","ItemDaily");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameData"),c=e("../SetLanguage"),s=e("../base/glance_Global"),l=e("./DailyPopup"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbGold=null,t.lbDay=null,t.spriteTick=null,t.spriteGreen=null,t.state=-1,t.clickCallback=null,t}return i(t,e),t.prototype.InitInfo=function(e,t,o){this.cfg=e,this.clickCallback=o,this.lbGold.string=e.gold+"",this.lbDay.string=c.ChangeLanguage.getText("dayTitle")+" "+(e.day+1),this.setState(t)},t.prototype.setState=function(e){switch(this.state=e,e){case l.ReceiveConfig.CANT_NOT_RECEVIE:this.spriteGreen.node.active=!1,this.spriteTick.node.active=!1;break;case l.ReceiveConfig.CAN_RECEVIE:this.spriteGreen.node.active=!0,this.spriteTick.node.active=!1;break;case l.ReceiveConfig.RECEVIED:this.spriteGreen.node.active=!0,this.spriteTick.node.active=!0}},t.prototype.onClickClaim=function(){if(this.state===l.ReceiveConfig.CAN_RECEVIE){a.GameData.addCoin(this.cfg.gold);var e=this.cfg.skin;e&&a.GameData.addSkinBoss(e.id,function(){s.default.instance.sendEventransactions(a.GameData.currentLevelId+1,"Hero daily_reward")}),this.setState(l.ReceiveConfig.RECEVIED),this.clickCallback(this.cfg)}},r([d(cc.Label)],t.prototype,"lbGold",void 0),r([d(cc.Label)],t.prototype,"lbDay",void 0),r([d(cc.Sprite)],t.prototype,"spriteTick",void 0),r([d(cc.Sprite)],t.prototype,"spriteGreen",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameData":"GameData","../SetLanguage":"SetLanguage","../base/glance_Global":"glance_Global","./DailyPopup":"DailyPopup"}],ItemLoot:[function(e,t,o){"use strict";cc._RF.push(t,"1fd7e2dGtBKjYNZzFe+WWuR","ItemLoot");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemConfig=void 0;var a=e("../../config/GroupConfig"),c=e("../../config/GlobalSignals"),s=e("../../base/ColliderCallback"),l=e("../../config/PhysicsConfig"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(){function e(){this.skin="",this.roomId=1,this.itemId=1}return r([d(cc.Integer)],e.prototype,"roomId",void 0),r([d(cc.Integer)],e.prototype,"itemId",void 0),r([p("ItemConfig")],e)}();o.ItemConfig=f;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.dieAnim="Die",t.openAnim="animation",t.collider=null,t.itemConfig=null,t.chestPrefab=null,t.flashPrefab=null,t.firePrefab=null,t.isAlive=!0,t}return i(t,e),t.prototype.onLoad=function(){l.PhysicsConfig.initPhysicConfig(this.node,"item")},t.prototype.start=function(){this.itemConfig.skin=this.skeleton.defaultSkin,this.collider.setColliderCallback(this.onCollisionEnter.bind(this))},t.prototype.onCollisionEnter=function(e){if(this.isAlive)return e.node.group===a.GroupConfig.LAVA?(this.isAlive=!1,this.skeleton.setAnimation(0,this.dieAnim,!1),this.showFireEffect(),void c.GlobalSignals.questFailSignal.dispatch()):void 0},t.prototype.openItem=function(){var e=this;this.playAnimation(this.openAnim,!1),this.node.getComponent(cc.BoxCollider).enabled=!1,this.scheduleOnce(function(){e.showFlashEffect()},.2)},t.prototype.playAnimation=function(e,t){return void 0===t&&(t=!1),this.skeleton.setAnimation(0,e,t),this},t.prototype.addAnimation=function(e,t,o){return void 0===t&&(t=!1),void 0===o&&(o=0),this.skeleton.addAnimation(0,e,t,o),this},t.prototype.showFireEffect=function(){if(this.firePrefab){var e=cc.instantiate(this.firePrefab);e.setPosition(0,0),e.scale=1,this.node.addChild(e),cc.tween(e).delay(2).call(function(){e.removeFromParent()}).start()}else cc.warn("firePrefab is null")},t.prototype.showFlashEffect=function(){if(this.flashPrefab){var e=cc.instantiate(this.flashPrefab);e.setPosition(0,70),this.node.addChild(e)}else cc.warn("flashPrefab is null")},r([d(sp.Skeleton)],t.prototype,"skeleton",void 0),r([d(cc.String)],t.prototype,"dieAnim",void 0),r([d(cc.String)],t.prototype,"openAnim",void 0),r([d(s.default)],t.prototype,"collider",void 0),r([d(f)],t.prototype,"itemConfig",void 0),r([d(cc.Prefab)],t.prototype,"chestPrefab",void 0),r([d(cc.Prefab)],t.prototype,"flashPrefab",void 0),r([d(cc.Prefab)],t.prototype,"firePrefab",void 0),r([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../base/ColliderCallback":"ColliderCallback","../../config/GlobalSignals":"GlobalSignals","../../config/GroupConfig":"GroupConfig","../../config/PhysicsConfig":"PhysicsConfig"}],ItemPetSwitch:[function(e,t,o){"use strict";cc._RF.push(t,"bbd1amz6QhGqLgHDsJ7XEIp","ItemPetSwitch");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/GlobalSignals"),c=e("../GameData"),s=e("../ResUtil"),l=e("./PetDataManager"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.skeleton=null,t.light=null,t.ClickCallback=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.onClickPet=function(){if(this.cfg.isHave){this.setActiveLight(!0);var e=c.GameData.getMyPetWithId(this.cfg.petCfg.petId);if(!e)return;var t=l.PetDataManager.cloneAPet(e);t.petLevel=this.cfg.level,c.GameData.setCurrentPet(t,function(){}),a.GlobalSignals.changeSkinPetSignal.dispatch()}this.ClickCallback(this.cfg)},t.prototype.initItemPetSwitch=function(e,t){var o=this;void 0===t&&(t=null),this.ClickCallback=t,this.cfg&&this.cfg.petCfg.petId==e.petCfg.petId||s.ResUtil.getSpineAnimPet(e.petCfg,function(t,n){if(!t){o.skeleton.skeletonData=n;var i="Level"+e.level;o.skeleton.setSkin(i),o.skeleton.setAnimation(0,"Idle",!0)}}),this.cfg=e,e.isHave?(e.isSelected?this.setActiveLight(!0):this.setActiveLight(!1),this.skeleton.node.color=new cc.Color(255,255,255,255)):(this.setActiveLight(!1),this.skeleton.node.color=new cc.Color(0,0,0,255))},t.prototype.setActiveLight=function(e){this.light.active=e},r([d(cc.Label)],t.prototype,"label",void 0),r([d(sp.Skeleton)],t.prototype,"skeleton",void 0),r([d(cc.Node)],t.prototype,"light",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameData":"GameData","../ResUtil":"ResUtil","../config/GlobalSignals":"GlobalSignals","./PetDataManager":"PetDataManager"}],ItemPopupHalloween:[function(e,t,o){"use strict";cc._RF.push(t,"ea434DtMp5ISrMXIihd/6DN","ItemPopupHalloween");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../base/utils/GUIUtil"),c=e("../base/utils/StringUtil"),s=e("../GameData"),l=e("../MainScene"),u=e("../UserPlayFab"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbCollect=null,t.nodeCollect=null,t.anim=null,t.iconClaim=null,t.listiconClaim=[],t.state=0,t}return i(t,e),t.prototype.start=function(){},t.prototype.setState=function(e){this.state=e,1==e?(this.nodeCollect.active=!0,this.iconClaim.node.active=!1):(this.nodeCollect.active=!1,this.iconClaim.node.active=!0),2==e&&(this.iconClaim.spriteFrame=this.listiconClaim[0]),3==e&&(this.iconClaim.spriteFrame=this.listiconClaim[1]),-1==e&&(this.iconClaim.spriteFrame=this.listiconClaim[2])},t.prototype.InitInfo=function(e,t){this.cfg=e,this.lbCollect.string=""+e.Value,this.setState(t),e.tag&&(this.anim.setSkin(e.tag.skins[0]),a.default.ativeSkinFeatureIfHave(e.tag,this.node))},t.prototype.onClickItem=function(){3!=this.state?-1!=this.state||this.onClickTop100():this.onClickClaim()},t.prototype.onClickClaim=function(){2!=this.state&&1!=this.state&&(this.setState(2),this.cfg.skinId.includes("boss")?s.GameData.addSkinBoss(this.cfg.skinId,function(){}):s.GameData.addSkinWife(this.cfg.skinId,function(){}))},t.prototype.onClickTop100=function(){null!=c.StringUtil.splitCountry(u.default.DisplayName).countryCodes||""!=u.default.UserCountryCode?l.default.instance.showRankPopup({type:"event",StatisticName:"HalloweenEvent",StatValue:"Balls"}):l.default.instance.showEntryYourNamePopup({type:"event",StatisticName:"HalloweenEvent",StatValue:"Ball"})},r([f(cc.Label)],t.prototype,"lbCollect",void 0),r([f(cc.Node)],t.prototype,"nodeCollect",void 0),r([f(sp.Skeleton)],t.prototype,"anim",void 0),r([f(cc.Sprite)],t.prototype,"iconClaim",void 0),r([f([cc.SpriteFrame])],t.prototype,"listiconClaim",void 0),r([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../GameData":"GameData","../MainScene":"MainScene","../UserPlayFab":"UserPlayFab","../base/utils/GUIUtil":"GUIUtil","../base/utils/StringUtil":"StringUtil"}],ItemRankPopup:[function(e,t,o){"use strict";cc._RF.push(t,"6a435KsRgdFbJWB2RoKz0r4","ItemRankPopup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbName=null,t.lbLevel=null,t.lbPos=null,t.iconCountry=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.InitInfo=function(e,t,o){switch(this.lbName.string=e,this.lbLevel.string=t+"",this.lbPos.string=o+1+"",o){case 0:this.node.color=(new cc.Color).fromHEX("#EB9400");break;case 1:this.node.color=(new cc.Color).fromHEX("#5192FF");break;case 2:this.node.color=(new cc.Color).fromHEX("#57BE59");break;default:this.node.color=(new cc.Color).fromHEX("#2C354A")}},r([s(cc.Label)],t.prototype,"lbName",void 0),r([s(cc.Label)],t.prototype,"lbLevel",void 0),r([s(cc.Label)],t.prototype,"lbPos",void 0),r([s(cc.Sprite)],t.prototype,"iconCountry",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],KDF:[function(e,t,o){"use strict";cc._RF.push(t,"843f5Wu4ulP/IdE+I9A+8Y8","KDF"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],KingdomBuilder:[function(e,t,o){"use strict";cc._RF.push(t,"5cd3e60dv1O+KEpmjqVRSZ0","KingdomBuilder");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.HouseItemConfig=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,l=function(){function e(){this.kingdomName="",this.houseName="",this.houseFrames=[]}return r([s(cc.String)],e.prototype,"houseName",void 0),r([s([cc.SpriteFrame])],e.prototype,"houseFrames",void 0),r([c("HouseItemConfig")],e)}();o.HouseItemConfig=l;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kingdomName="",t.arrayConfig=[],t}return i(t,e),r([s(cc.String)],t.prototype,"kingdomName",void 0),r([s([l])],t.prototype,"arrayConfig",void 0),r([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],KingdomConfig:[function(e,t,o){"use strict";cc._RF.push(t,"f9fc97JqjZBz4r8UHg3ZItR","KingdomConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.KingdomConfig=void 0;var n=function(){function e(){}return e.getKingdomCfg=function(t){for(var o=0;o<e.kingdoms.length;o++)if(e.kingdoms[o].name===t)return e.kingdoms[o];return null},e.kingdoms=[{name:"earth",builder:"EarthBuilder",kingdom:"EarthKingdom",prices:[500,1e3,2e3,3e3,4e3]},{name:"iceland",builder:"IceLandBuilder",kingdom:"IceLandKingdom",prices:[1e3,2e3,3e3,5e3,8e3]}],e}();o.KingdomConfig=n,cc._RF.pop()},{}],KingdomData:[function(e,t,o){"use strict";cc._RF.push(t,"e1843F5WQ1HjIIoEA7ubQBA","KingdomData"),Object.defineProperty(o,"__esModule",{value:!0}),o.KingdomData=void 0;var n=e("../plugins/fb/FBInstantData"),i=function(){function e(){}return e.getKingdomData=function(t){var o={};return e.arrConfig.forEach(function(n){var i=e.KEY_KINGDOM+"_"+n;t[i]?o[n]=t[i]:o[n]={}}),o},e.saveKingdomData=function(t,o,i){if(void 0===i&&(i=null),-1!==e.arrConfig.indexOf(t)){var r={};r[e.KEY_KINGDOM+"_"+t]=o,n.FBInstantData.setData(r,i)}else console.warn("saveKingdomData: "+t+" is not Kingdom")},e.KEY_KINGDOM="hp_kingdom",e.EARTH="earth",e.ICELAND="iceland",e.AUTUMN="autumn",e.FUTURE="future",e.TOY="toy",e.WINTER="winter",e.arrConfig=[e.EARTH,e.ICELAND,e.AUTUMN,e.FUTURE,e.TOY,e.WINTER],e}();o.KingdomData=i,cc._RF.pop()},{"../plugins/fb/FBInstantData":"FBInstantData"}],KingdomItem:[function(e,t,o){"use strict";cc._RF.push(t,"b4f8dfH/vNPlbUDa29iHr/4","KingdomItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../MainScene"),c=e("../GameData"),s=e("../CastleScreen"),l=e("../SetLanguage"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kingdomName="",t.levelUnlock=0,t.lock=null,t.label_unlock=null,t.btn_visit=null,t}return i(t,e),t.prototype.onEnable=function(){c.GameData.currentLevelId+1>=this.levelUnlock&&-1!=this.levelUnlock?(this.lock.active=!1,this.btn_visit.node.active=!0):(this.lock.active=!0,this.btn_visit.node.active=!1,-1==this.levelUnlock?this.label_unlock.string=l.ChangeLanguage.getText("comingsoon"):this.label_unlock.string=l.ChangeLanguage.getText("level")+" "+this.levelUnlock,this.label_unlock.fontSize=18)},t.prototype.onVisit=function(){a.default.instance.selectKingdomPopup.active=!1,s.default.instance.showCastleByName(this.kingdomName)},r([d(cc.String)],t.prototype,"kingdomName",void 0),r([d(cc.Integer)],t.prototype,"levelUnlock",void 0),r([d(cc.Node)],t.prototype,"lock",void 0),r([d(cc.Label)],t.prototype,"label_unlock",void 0),r([d(cc.Button)],t.prototype,"btn_visit",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../CastleScreen":"CastleScreen","../GameData":"GameData","../MainScene":"MainScene","../SetLanguage":"SetLanguage"}],Kingdom:[function(e,t,o){"use strict";cc._RF.push(t,"ea71fSHFydO149brcrckKR+","Kingdom");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./HouseBuilder"),c=e("../GameData"),s=e("../config/GlobalSignals"),l=cc.easeIn,u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kingdomName="",t.toolBuild=null,t.effectPrefab=null,t.buildPopup=null,t.arrayHouse=[],t.onUpgradeHouse=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.toolBuild.active=!1,this.toolBuild.zIndex=10,this.onUpgradeHouse=this.upgradeHouse.bind(this),this.node.children.forEach(function(t){var o=t.getComponent(a.default);o&&e.arrayHouse.push(o)})},t.prototype.onEnable=function(){s.GlobalSignals.castleUpgradeSignal.add(this.onUpgradeHouse);var e=c.GameData.kingdoms[this.kingdomName];e||(console.warn("Kingdom name = "+this.kingdomName+" is undefined"),e={}),this.reloadData(e)},t.prototype.onDisable=function(){s.GlobalSignals.castleUpgradeSignal.remove(this.onUpgradeHouse)},t.prototype.reloadData=function(e){this.arrayHouse.forEach(function(t){var o=e[t.houseName];null!=o?t.showLevel(o):t.showLevel(0)})},t.prototype.getHouseBuilderByName=function(e){for(var t=0;t<this.arrayHouse.length;t++)if(this.arrayHouse[t].houseName===e)return this.arrayHouse[t];return null},t.prototype.upgradeHouse=function(e,t){var o=this.getHouseBuilderByName(e);o?this.showBuilderEffect(o.node.position,function(){o.showLevel(t)}):cc.warn("upgradeHouse houseName = "+e+" is null")},t.prototype.showBuilderEffect=function(e,t){var o=this;this.toolBuild.active=!0,this.toolBuild.angle=15,this.toolBuild.x=e.x-this.toolBuild.width,this.toolBuild.y=e.y-this.toolBuild.height/2,cc.Tween.stopAllByTarget(this.toolBuild),cc.tween(this.toolBuild).repeat(6,cc.tween().to(.12,{angle:-20},l(2)).delay(.08).to(.2,{angle:15})).call(function(){o.toolBuild.active=!1}).start(),this.scheduleOnce(function(){o.showAppearEffect(e),t&&t()},2)},t.prototype.showAppearEffect=function(e){var t=cc.instantiate(this.effectPrefab);t.position=e,t.scale=1,this.node.addChild(t),cc.tween(t).delay(.8).call(function(){t.removeFromParent()}).start()},r([d(cc.String)],t.prototype,"kingdomName",void 0),r([d(cc.Node)],t.prototype,"toolBuild",void 0),r([d(cc.Prefab)],t.prototype,"effectPrefab",void 0),r([d(cc.Prefab)],t.prototype,"buildPopup",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameData":"GameData","../config/GlobalSignals":"GlobalSignals","./HouseBuilder":"HouseBuilder"}],Language:[function(e,t,o){"use strict";cc._RF.push(t,"5eff4HoO4JG1IYLghdKOoVA","Language"),Object.defineProperty(o,"__esModule",{value:!0}),o.TextLanguage=void 0,o.TextLanguage={EN:{loading:"LOADING: ",start:"START",level:"LEVEL ",on:"On",off:"Off",daily_gift:"Daily Gift",day:"Day ",dayTitle:"DAY",continue:"Tap to continue",replay:"TAP TO REPLAY",skip:"SKIP",title_winpanel:"RESCUE SUCCESS",title_losepanel:"YOU LOSE",pets:"Pets",castle:"Castle",collect_the_gold:"COLLECT THE GOLD",collect_the_item:"COLLECT THE ITEM",take_down_enemies:"TAKE DOWN ENEMIES",save_your_princess:"SAVE YOUR PRINCESS",open_money_chest:"OPEN MONEY CHEST",do_nothing:"DO NOTHING",hero:"Hero",build:"Build",build2:"Build",map:"Map",buildhouse:"BUILD HOUSE",update:"UPGRADE",complete:"COMPLETE!",comingsoon:"COMING SOON",visit:"VISIT",kingdom:"KINGDOM",earth:"EARTH",iceland:"ICELAND",desert:"DESERT",inferno:"INFERNO",jade:"JADE MOUNTAIN",olympus:"OLYMPUS",dailyReward:"Daily Reward",dailyRewardTitle:"DAILY REWARD",dailyRewardTip:"DAILY REWARD",claim:"Claim",princess:"Princess",choosePrincess:"CHOOSE PRINCESS",match:"Match",switch:"Switch",selected:"Selected",settingTitle:"Setting",hero_6:"Dragon \n Knight",hero_27:"The\n Angle",hero_28:"The\n Demon",tip_level1:"Pull or touch the pin to move",tip_level5:"Rescue Princess",tip_level7:"Water + Lava = Rock",tip_level26:"Swipe to\ncut the rope",tip_level47:"Snow can freezze them"},JA:{loading:"\u8aad\u307f\u8fbc\u307f\u4e2d: ",start:"\u30b9\u30bf\u30fc\u30c8",level:"\u30ec\u30d9\u30eb",on:"\u30aa\u30f3",off:"\u30aa\u30d5",daily_gift:"\u6bce\u65e5\u306e\u8d08\u308a\u7269",day:"\u65e5\u76ee",dayTitle:"\u65e5\u76ee",continue:"\u30bf\u30c3\u30d7\u3057\u3066\u7d9a\u884c",replay:"\u30bf\u30c3\u30d7\u3057\u3066\u518d\u5ea6\u30d7\u30ec\u30a4\u3059\u308b",skip:"\u30b9\u30ad\u30c3\u30d7",title_winpanel:"\u6551\u52a9\u6210\u529f",title_losepanel:"\u3042\u306a\u305f\u306e\u8ca0\u3051\u3067\u3059",pets:"\u30a4\u30d9\u30f3\u30c8 ",castle:"\u57ce",collect_the_gold:"\u30b4\u30fc\u30eb\u30c9\u3092\u96c6\u3081\u308b",collect_the_item:"\u30a2\u30a4\u30c6\u30e0\u3092\u96c6\u3081\u308b",take_down_enemies:"\u6575\u3092\u5012\u3059",save_your_princess:"\u3042\u306a\u305f\u306e\u738b\u5973\u3092\u6551\u3046",open_money_chest:"\u304a\u91d1\u306e\u30c1\u30a7\u30b9\u30c8\u3092\u958b\u304f",do_nothing:"\u904a\u3076",hero:"\u82f1\u96c4",build:"\u5efa\u3066\u308b",build2:"\u5efa\u3066\u308b",map:"\u5730\u56f3",buildhouse:"\u5bb6\u3092\u5efa\u3066\u308b",update:"\u6539\u5584",complete:"\u5b8c\u4e86\uff01",comingsoon:"\u8fd1\u65e5\u516c\u958b",visit:"\u8a2a\u554f",kingdom:"\u738b\u56fd",earth:"\u30a2\u30fc\u30b9",iceland:"\u30a2\u30a4\u30b9\u30e9\u30f3\u30c9",desert:"\u7802\u6f20",inferno:"\u30a4\u30f3\u30d5\u30a7\u30eb\u30ce",jade:"\u5c71",olympus:"\u30aa\u30ea\u30f3\u30d1\u30b9",dailyReward:"\u6bce\u65e5\u306e\u8d08\u308a\u7269",dailyRewardTitle:"\u672c\u65e5\u306e\u5831\u916c",dailyRewardTip:"\u30c7\u30a4\u30ea\u30fc\u30ea\u30ef\u30fc\u30c9",claim:"\u4e3b\u5f35",princess:"\u59eb",choosePrincess:"\u30d7\u30ea\u30f3\u30bb\u30b9\u3092\u9078\u3076",match:"\u30de\u30c3\u30c1",switch:"\u30b9\u30a4\u30c3\u30c1",selected:"\u5165\u9078",settingTitle:"\u8a2d\u5b9a",hero_6:"\u30ca\u30a4\u30c8",hero_27:"\u30a2\u30f3\u30b0\u30eb",hero_28:"\u30c7\u30a3\u30fc\u30e2\u30f3",tip_level1:"\u30d4\u30f3\u3092\u5f15\u304f\u304b\u30bf\u30c3\u30c1\u3057\u3066\u79fb\u52d5\u3057\u307e\u3059",tip_level5:"\u30ec\u30b9\u30ad\u30e5\u30fc\u30d7\u30ea\u30f3\u30bb\u30b9",tip_level7:"\u6c34 + \u6eb6\u5ca9 = \u5ca9",tip_level26:"\u30b9\u30ef\u30a4\u30d7\u3057\u3066\n\u30ed\u30fc\u30d7\u3092\u5207\u308c",tip_level47:"\u6c37\u306f\u5f7c\u3089\u3092\u51cd\u3089\u305b\u307e\u3059"},ID:{loading:"MEMUAT: ",start:"AWAL",level:"Tingkat ",on:"HIDUP",off:"MATI",daily_gift:"Hadiah harian",day:"hari ",dayTitle:"HARI",continue:"Ketuk untuk melanjutkan",replay:"Ketuk untuk memutar ulang",skip:"LEWAT",title_winpanel:"MENYELAMATKAN",title_losepanel:"KAMUKALAH!",pets:"Hewan peliharaan",castle:"Kastil",collect_the_gold:"KUMPULKAN EMAS",collect_the_item:"KUMPULKAN BARANG",take_down_enemies:"MENGHILANGKAN MUSUH",save_your_princess:"SIMPAN PUTRI ANDA",open_money_chest:"BUKA DADA UANG",do_nothing:"TIDAK MELAKUKAN APAPUN",hero:"Pahlawan",build:"membangun",build2:"Membangun",map:"Peta",buildhouse:"MEMBANGUN RUMAH",update:"MENINGKATKAN",complete:"MENYELESAIKAN!",comingsoon:"SEGERA HADIR",visit:"MENGUNJUNGI",kingdom:"KERAJAAN",earth:"BUMI",iceland:"ISLANDIA",desert:"GURUN",inferno:"NERAKA",jade:"GUNUNG JADE",olympus:"OLYMPUS",dailyReward:"Hadiah harian",dailyRewardTitle:"HADIAH HARIAN",dailyRewardTip:"HADIAH HARIAN",claim:"Mengeklaim",princess:"PUTRI",choosePrincess:"MEMILIH PUTRI",match:"Cocok",switch:"Mengalihkan",selected:"Terpilih",settingTitle:"PENGATURAN",hero_6:"Ksatria \n Naga",hero_27:"Sudut",hero_28:"Iblis",tip_level1:"Tarik atau sentuh pin untuk bergerak",tip_level5:"Penyelamat Putri",tip_level7:"Air + Lava = Batuan",tip_level26:"Geser untuk\nmemotong talinya",tip_level47:"Salju dapat membekukannya"},DE:{loading:"WIRD GELADEN: ",start:"START",level:"EBENE ",on:"An",off:"Aus",daily_gift:"T\xe4gliches Geschenk",day:"Tag ",dayTitle:"TAG",continue:"Tippen Sie, um fortzufahren",replay:"TIPP ZUM WIEDERHOLEN",skip:"\xdcBERSPRINGEN",title_winpanel:"RETTUNGSERFOLG",title_losepanel:"DU VERLIERST",pets:"Haustiere",castle:"Schloss",collect_the_gold:"SAMMLE DAS GOLD",collect_the_item:"SAMMLE DEN GEGENSTAND",take_down_enemies:"BESIEGE FEINDE",save_your_princess:"RETTE DEINE PRINZESSIN",open_money_chest:"GELDKASTEN \xd6FFNEN",do_nothing:"NICHTS TUN",hero:"Held",build:"Bauen",build2:"Bauen",map:"Karte",buildhouse:"HAUS BAUEN",update:"AKTUALISIERUNG",complete:"VOLLST\xc4NDIG!",comingsoon:"DEMN\xc4CHST",visit:"BESUCHEN",kingdom:"K\xd6NIGREICH",earth:"ERDE",iceland:"ISLAND",desert:"W\xdcSTE",inferno:"INFERNO",jade:"JADE-BERG",olympus:"OLYMP",dailyReward:"T\xe4gliche Belohnung",dailyRewardTitle:"T\xc4GLICHE BELOHNUNG",dailyRewardTip:"T\xc4GLICHE BELOHNUNG",claim:"Beanspruchen",princess:"Prinzessin",choosePrincess:"W\xc4HLEN SIE PRINZESSIN",match:"\xdcbereinstimmen",switch:"Schalten",selected:"Ausgew\xe4hlt",settingTitle:"Einstellung",hero_6:"Ritter",hero_27:"Der Winkel",hero_28:"Der D\xe4mon",tip_level1:"Ziehen oder ber\xfchren Sie den Stift, um ihn zu bewegen",tip_level5:"Rette die Prinzessin",tip_level7:"Wasser + Lava = Gestein",tip_level26:"Wischen Sie, um das Seil zu durchtrennen",tip_level47:"Schnee kann sie einfrieren"}},cc._RF.pop()},{}],Latin1:[function(e,t,o){"use strict";cc._RF.push(t,"f6b0bnk3FNLBKHcYiu5V4Kz","Latin1"),Object.defineProperty(o,"__esModule",{value:!0}),o.Latin1=void 0;var n=e("../lib/WordArray"),i=function(){function e(){}return e.stringify=function(e){for(var t=[],o=0;o<e.sigBytes;o++){var n=e.words[o>>>2]>>>24-o%4*8&255;t.push(String.fromCharCode(n))}return t.join("")},e.parse=function(e){for(var t=e.length,o=[],i=0;i<t;i++)o[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new n.WordArray(o,t)},e}();o.Latin1=i,cc._RF.pop()},{"../lib/WordArray":"WordArray"}],LavaGO:[function(e,t,o){"use strict";cc._RF.push(t,"6e16a5QKp9Ak4alKXaGXEJE","LavaGO");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=e("../../config/TagObject"),s=e("../../MainScene"),l=e("../../config/AudioPlayId"),u=e("../../level/MapLevel"),p=e("../../config/PhysicsConfig"),d=cc._decorator,f=d.ccclass,h=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.border=null,t.drop=null,t.rockPrefab=null,t.available=!0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){p.PhysicsConfig.initPhysicConfig(this.node,"lava")},t.prototype.start=function(){this.border.active=!0,this.drop.active=!0,o.colliderBarrieCount=0;var e=this.getComponent(cc.Sprite);e&&(e.enabled=!1)},t.prototype.transformToRock=function(){var e=u.default.instance.rockContainer,t=cc.instantiate(this.rockPrefab);t.position=e.convertToNodeSpaceAR(this.node.getParent().convertToWorldSpaceAR(this.node.position)),t.parent=e,this.node.removeFromParent()},t.prototype.onCollisionEnter=function(e){if(this.available)return e.node.group===a.GroupConfig.WATER||e.node.group==a.GroupConfig.ROCK&&e.node.name==c.TagConfig.ROCK?(this.available=!1,void this.transformToRock()):e.node.group===a.GroupConfig.BERRIE?(o.colliderBarrieCount++,void(6===o.colliderBarrieCount&&(s.default.instance.audioPlayer.playAudio(l.AudioPlayId.effect_lava_appear),this.scheduleOnce(function(){o.colliderBarrieCount=0},2)))):void 0},t.colliderBarrieCount=0,r([h(cc.Node)],t.prototype,"border",void 0),r([h(cc.Node)],t.prototype,"drop",void 0),r([h(cc.Prefab)],t.prototype,"rockPrefab",void 0),o=r([f],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../MainScene":"MainScene","../../config/AudioPlayId":"AudioPlayId","../../config/GroupConfig":"GroupConfig","../../config/PhysicsConfig":"PhysicsConfig","../../config/TagObject":"TagObject","../../level/MapLevel":"MapLevel"}],LevelConfig:[function(e,t,o){"use strict";cc._RF.push(t,"2052avx87lG+Zk86UhkNUHw","LevelConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.LevelConfig=void 0;var n=function(){function e(){}return e.levels=["Level-1","Level-2","Level-3","Level-4","Level-5","Level-6","Level-7","Level-8","Level-9","Level-10","Level-11","Level-12","Level-13","Level-14","Level-15","Level-16","Level-17","Level-18","Level-19","Level-20","Level-21","Level-22","Level-23","Level-24","Level-25","Level-26","Level-27","Level-28","Level-29","Level-30","Level-31","Level-32","Level-33","Level-34","Level-35","Level-36","Level-37","Level-38","Level-39","Level-40","Level-41","Level-42","Level-43","Level-44","Level-45","Level-46","Level-47","Level-48","Level-49","Level-50","Level-51","Level-52","Level-53","Level-54","Level-55","Level-56","Level-57","Level-58","Level-59","Level-60","Level-61","Level-62","Level-63","Level-64","Level-65","Level-66","Level-67","Level-68","Level-69","Level-70","Level-71","Level-72","Level-73","Level-74","Level-75","Level-76","Level-77","Level-78","Level-79","Level-80","Level-81","Level-82","Level-83","Level-84","Level-85","Level-86","Level-87","Level-88","Level-89","Level-90","Level-91","Level-92","Level-93","Level-94","Level-95","Level-96","Level-97","Level-98","Level-99","Level-100","Level-101","Level-102","Level-103","Level-104","Level-105","Level-106","Level-107","Level-108","Level-109","Level-110","Level-111","Level-112","Level-113","Level-114","Level-115","Level-116","Level-117","Level-118","Level-119","Level-120","Level-121","Level-122","Level-123","Level-124","Level-125","Level-126","Level-127","Level-128","Level-129","Level-130","Level-131","Level-132","Level-133"],e.realLevelSize=e.levels.length,e}();o.LevelConfig=n,cc._RF.pop()},{}],LoadingScene:[function(e,t,o){"use strict";cc._RF.push(t,"6ec88+sGudOaLn+xFmafpy4","LoadingScene");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BackgroundLoader"),c=e("./MainScene"),s=e("./config/GlobalSignals"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingProcess=null,t.callback=null,t.totalProcess=0,t.countProcess=0,t.obj={a:0},t.delta=0,t}var o;return i(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._instance=this,s.GlobalSignals.bgLoaderCompleted.add(this.onLoading.bind(this)),c.default.instance.initStartGame(),this.totalProcess=a.BackgroundLoader.tasks.length},t.prototype.onLoading=function(e){this.countProcess+=1,this.updateProcess(),this.callback||(this.callback=e),0==a.BackgroundLoader.tasks.length&&this.callback()},t.prototype.updateProcess=function(){var e=Math.floor(this.countProcess/this.totalProcess*100);this.animRunProcess(e)},t.prototype.animRunProcess=function(e){var t=this,o={num:this.stringToInt(this.loadingProcess.string)};cc.tween(o).to(1,{num:e},{progress:function(e,o,n,i){t.loadingProcess.string=Math.floor(e+(o-e)*i).toString()+" %"}}).start()},t.prototype.stringToInt=function(e){var t=parseInt(e.replace(/\./g,"").replace(/,/g,""));return isNaN(t)&&(t=0),t},t._instance=null,r([p(cc.Label)],t.prototype,"loadingProcess",void 0),o=r([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./BackgroundLoader":"BackgroundLoader","./MainScene":"MainScene","./config/GlobalSignals":"GlobalSignals"}],Loading:[function(e,t,o){"use strict";cc._RF.push(t,"4ddc4u2lIpMcIhU8nQrvONl","Loading"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./base/Task"),i=e("./GameData"),r=e("./plugins/fb/FBInstantAds"),a=e("./plugins/tracking/GameTracking"),c=e("./UserPlayFab");window.Loading={preloadScene:function(e,t){var o=new n.TaskManager;o.addTask(new n.Task(function(){var e=this;i.GameData.initPlayerData(function(){e.completed()})})),o.addTask(new n.Task(function(){})),o.addTask(new n.Task(function(){c.default.SetUp(),c.default.LoginWithFacebookInstantGamesId(),this.completed()})),o.addTask(new n.Task(function(){var e=this,t=window.remoteConfig;t.fetchAndActivate().then(function(){var o=t.getValue("enable_ads");o&&(console.log("Fetch remote config: enable_ads = "+JSON.stringify(o)),r.FBInstantAds.enableAds=0!=o._value),e.completed()}).catch(function(t){console.warn("Fetch remote config: "+t),e.completed()})})),o.run(e,t)},preloadAds:function(){},onQuitGame:function(){a.GameTracking.logEventQuitGame(i.GameData.currentLevelId)}},cc._RF.pop()},{"./GameData":"GameData","./UserPlayFab":"UserPlayFab","./base/Task":"Task","./plugins/fb/FBInstantAds":"FBInstantAds","./plugins/tracking/GameTracking":"GameTracking"}],LocalStorageManager:[function(e,t,o){"use strict";cc._RF.push(t,"4dd86HTCsxBTbnZZjQJS4gi","LocalStorageManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStorageManager=void 0;var n=e("./crypto-ts/lib/WordArray"),i=e("./crypto-ts/crypto-ts"),r=function(){function e(){}return e.encryptKeyItem=function(e){return i.AES.encrypt(e+"",this.KEY_ENCRYPTION_KEY_ITEM,{iv:this.IV_ENCRYPTION_KEY_ITEM}).toString()},e.encryptValueItem=function(e){return i.AES.encrypt(e,this.KEY_ENCRYPTION_VALUE_ITEM,{iv:this.IV_ENCRYPTION_VALUE_ITEM}).toString()},e.decryptValueItem=function(e){return i.AES.decrypt(e,this.KEY_ENCRYPTION_VALUE_ITEM,{iv:this.IV_ENCRYPTION_VALUE_ITEM}).toString(i.enc.Utf8)},e.setItem=function(e,t){var o=this.encryptKeyItem(e),n=this.encryptValueItem(t);cc.sys.localStorage.setItem(o,n)},e.getItem=function(e){var t=this.encryptKeyItem(e),o=cc.sys.localStorage.getItem(t);return o?this.decryptValueItem(o):null},e.removeItem=function(e){cc.sys.localStorage.removeItem(this.encryptKeyItem(e))},e.KEY_ENCRYPTION_VALUE_ITEM=new n.WordArray([3721848651,3247274e3,1120155838,1670014210],16),e.IV_ENCRYPTION_VALUE_ITEM=new n.WordArray([4236774207,782364970,1158515808,2679783514],16),e.KEY_ENCRYPTION_KEY_ITEM=new n.WordArray([1541276774,3192629469,1059630479,1194558349],16),e.IV_ENCRYPTION_KEY_ITEM=new n.WordArray([1156797778,168578463,3342295823,1238504529],16),e}();o.LocalStorageManager=r,cc._RF.pop()},{"./crypto-ts/crypto-ts":"crypto-ts","./crypto-ts/lib/WordArray":"WordArray"}],MD5:[function(e,t,o){"use strict";cc._RF.push(t,"897afQFVB5Fx7Bx7+H5eL/0","MD5");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MD5=void 0;for(var r=e("../lib/Hasher"),a=e("../lib/WordArray"),c=[],s=0;s<64;s++)c[s]=4294967296*Math.abs(Math.sin(s+1))|0;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.FF=function(e,t,o,n,i,r,a){var c=e+(t&o|~t&n)+i+a;return(c<<r|c>>>32-r)+t},t.GG=function(e,t,o,n,i,r,a){var c=e+(t&n|o&~n)+i+a;return(c<<r|c>>>32-r)+t},t.HH=function(e,t,o,n,i,r,a){var c=e+(t^o^n)+i+a;return(c<<r|c>>>32-r)+t},t.II=function(e,t,o,n,i,r,a){var c=e+(o^(t|~n))+i+a;return(c<<r|c>>>32-r)+t},t.prototype.reset=function(){e.prototype.reset.call(this),this._hash=new a.WordArray([1732584193,4023233417,2562383102,271733878])},t.prototype._doProcessBlock=function(e,o){for(var n=0;n<16;n++){var i=o+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a=this._hash.words,s=e[o+0],l=e[o+1],u=e[o+2],p=e[o+3],d=e[o+4],f=e[o+5],h=e[o+6],y=e[o+7],g=e[o+8],_=e[o+9],v=e[o+10],m=e[o+11],b=e[o+12],C=e[o+13],P=e[o+14],S=e[o+15],k=a[0],O=a[1],A=a[2],R=a[3];k=t.FF(k,O,A,R,s,7,c[0]),R=t.FF(R,k,O,A,l,12,c[1]),A=t.FF(A,R,k,O,u,17,c[2]),O=t.FF(O,A,R,k,p,22,c[3]),k=t.FF(k,O,A,R,d,7,c[4]),R=t.FF(R,k,O,A,f,12,c[5]),A=t.FF(A,R,k,O,h,17,c[6]),O=t.FF(O,A,R,k,y,22,c[7]),k=t.FF(k,O,A,R,g,7,c[8]),R=t.FF(R,k,O,A,_,12,c[9]),A=t.FF(A,R,k,O,v,17,c[10]),O=t.FF(O,A,R,k,m,22,c[11]),k=t.FF(k,O,A,R,b,7,c[12]),R=t.FF(R,k,O,A,C,12,c[13]),A=t.FF(A,R,k,O,P,17,c[14]),O=t.FF(O,A,R,k,S,22,c[15]),k=t.GG(k,O,A,R,l,5,c[16]),R=t.GG(R,k,O,A,h,9,c[17]),A=t.GG(A,R,k,O,m,14,c[18]),O=t.GG(O,A,R,k,s,20,c[19]),k=t.GG(k,O,A,R,f,5,c[20]),R=t.GG(R,k,O,A,v,9,c[21]),A=t.GG(A,R,k,O,S,14,c[22]),O=t.GG(O,A,R,k,d,20,c[23]),k=t.GG(k,O,A,R,_,5,c[24]),R=t.GG(R,k,O,A,P,9,c[25]),A=t.GG(A,R,k,O,p,14,c[26]),O=t.GG(O,A,R,k,g,20,c[27]),k=t.GG(k,O,A,R,C,5,c[28]),R=t.GG(R,k,O,A,u,9,c[29]),A=t.GG(A,R,k,O,y,14,c[30]),O=t.GG(O,A,R,k,b,20,c[31]),k=t.HH(k,O,A,R,f,4,c[32]),R=t.HH(R,k,O,A,g,11,c[33]),A=t.HH(A,R,k,O,m,16,c[34]),O=t.HH(O,A,R,k,P,23,c[35]),k=t.HH(k,O,A,R,l,4,c[36]),R=t.HH(R,k,O,A,d,11,c[37]),A=t.HH(A,R,k,O,y,16,c[38]),O=t.HH(O,A,R,k,v,23,c[39]),k=t.HH(k,O,A,R,C,4,c[40]),R=t.HH(R,k,O,A,s,11,c[41]),A=t.HH(A,R,k,O,p,16,c[42]),O=t.HH(O,A,R,k,h,23,c[43]),k=t.HH(k,O,A,R,_,4,c[44]),R=t.HH(R,k,O,A,b,11,c[45]),A=t.HH(A,R,k,O,S,16,c[46]),O=t.HH(O,A,R,k,u,23,c[47]),k=t.II(k,O,A,R,s,6,c[48]),R=t.II(R,k,O,A,y,10,c[49]),A=t.II(A,R,k,O,P,15,c[50]),O=t.II(O,A,R,k,f,21,c[51]),k=t.II(k,O,A,R,b,6,c[52]),R=t.II(R,k,O,A,p,10,c[53]),A=t.II(A,R,k,O,v,15,c[54]),O=t.II(O,A,R,k,l,21,c[55]),k=t.II(k,O,A,R,g,6,c[56]),R=t.II(R,k,O,A,S,10,c[57]),A=t.II(A,R,k,O,h,15,c[58]),O=t.II(O,A,R,k,C,21,c[59]),k=t.II(k,O,A,R,d,6,c[60]),R=t.II(R,k,O,A,m,10,c[61]),A=t.II(A,R,k,O,u,15,c[62]),O=t.II(O,A,R,k,_,21,c[63]),a[0]=a[0]+k|0,a[1]=a[1]+O|0,a[2]=a[2]+A|0,a[3]=a[3]+R|0},t.prototype._doFinalize=function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;var i=Math.floor(o/4294967296),r=o;t[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,c=a.words,s=0;s<4;s++){var l=c[s];c[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},t}(r.Hasher);o.MD5=l,cc._RF.pop()},{"../lib/Hasher":"Hasher","../lib/WordArray":"WordArray"}],MMFollowTarget:[function(e,t,o){"use strict";cc._RF.push(t,"2b317ZQYhRI7ok1fNnPWu7w","MMFollowTarget");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=e.call(this)||this;return t.followTarget=null,t.isFollowRotation=!0,t.offset=new cc.Vec3,t.moveSpeed=3,t.isPlayingStart=!1,t}return i(t,e),t.prototype.start=function(){},t.prototype.showStart=function(){},t.prototype.lateUpdate=function(){if(this.followTarget){this.node.position,this.node.scaleX=this.followTarget.scaleX;var e=this.offset;this.isFollowRotation,console.log(this.followTarget.position);var t=new cc.Vec3(this.followTarget.x+e.x*this.followTarget.scaleX,this.followTarget.position.y+e.y*this.followTarget.scaleY,this.followTarget.position.z+e.z);if(this.node.setPosition(t),this.node.lookAt(this.followTarget.position,new cc.Vec3(0,1,0)),this.isFollowRotation){var o=new cc.Vec3(this.node.eulerAngles);o.y=this.followTarget.eulerAngles.y,this.node.eulerAngles=o}}},r([s(cc.Node)],t.prototype,"followTarget",void 0),r([s],t.prototype,"isFollowRotation",void 0),r([s],t.prototype,"offset",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],MainScene:[function(e,t,o){"use strict";cc._RF.push(t,"e7bbbEKKihNqagxA1NBLeup","MainScene");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./base/audio/AudioPlayer"),c=e("./config/AudioPlayId"),s=e("./PrefabManager"),l=e("./PrefabType"),u=e("./GameData"),p=e("./ResUtil"),d=e("./plugins/fb/FBInstantAds"),f=e("./ScreenManager"),h=e("./base/Task"),y=e("./CastleScreen"),g=e("./BackgroundLoader"),_=e("./event/EventPopup"),v=e("./rank/RankPopup"),m=e("./chooseCountryPopup/ChooseCountryPopup"),b=e("./dailyPopup/DailyPopup"),C=e("./pets/PetPopup"),P=e("./base/glance_Global"),S=e("./LoadingScene"),k=cc._decorator,O=k.ccclass,A=k.property,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioPlayer=null,t.screenManager=null,t.nodePopups=null,t.loading=null,t.testPrefab=null,t.testStartLevel=0,t.settingPopup=null,t.selectRoomPopup=null,t.selectKingdomPopup=null,t.buildKingdomPopup=null,t.skinPopup=null,t.eventPopup=null,t.rankPopup=null,t.chooseCountryPopup=null,t.dailyPopup=null,t.petPopup=null,t.arrayPopup=[],t.language=null,t.rewardType="",t}var o;return i(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._instance=this,this.testStartLevel>=1&&(u.GameData.currentLevelId=this.testStartLevel-1),this.getLanguage()},t.prototype.start=function(){P.default.instance.sendEventLoad()},t.prototype.onEnable=function(){var e=this;cc.log("MainScene onEnable"),this.testPrefab?this.screenManager.showScreenById(f.ScreenId.PLAY_SCREEN,null,!0):this.screenManager.showScreenById(f.ScreenId.LOADING_SCREEN,function(){S.default.instance.onLoading(function(){e.screenManager.showScreenById(f.ScreenId.HOME_SCREEN,null,!0)})},!0)},t.prototype.initStartGame=function(){var e=this;g.BackgroundLoader.addTask(new h.Task(function(){var t=this;e.loadLevelCallback=null,p.ResUtil.loadLevelById(u.GameData.currentLevelId,function(o){t.completed(),e.loadLevelCallback&&e.loadLevelCallback(o)})})),g.BackgroundLoader.addTask(new h.Task(function(){var t=this;e.loadRoomSelectCallback=null,s.default.instance.loadPrefabByType(l.PrefabType.SELECT_ROOM,function(o){t.completed(),e.loadRoomSelectCallback&&e.loadRoomSelectCallback(o)})}));var t=y.default.KingdomDefault;g.BackgroundLoader.addTask(new h.Task(function(){var o=this;e.loadKingdomCallback=null,p.ResUtil.loadKingdomByName(t,function(t){o.completed(),e.loadKingdomCallback&&e.loadKingdomCallback(t)})})),g.BackgroundLoader.addTask(new h.Task(function(){var o=this;e.loadKingdomBuilderCallback=null,p.ResUtil.loadKingdomBuilderByName(t,function(t){o.completed(),e.loadKingdomBuilderCallback&&e.loadKingdomBuilderCallback(t)})})),g.BackgroundLoader.addTask(new h.Task(function(){var t=this;e.loadKingdomSelectCallback=null,s.default.instance.loadPrefabByType(l.PrefabType.SELECT_KINGDOM,function(o){t.completed(),e.loadKingdomSelectCallback&&e.loadKingdomSelectCallback(o)})})),d.FBInstantAds.adsConfig=window.adsConfig,d.FBInstantAds.lastLevelShowAds=u.GameData.currentLevelId,g.BackgroundLoader.addTask(new h.Task(function(){var e=this;d.FBInstantAds.preloadInterstitialAd(function(){e.completed()})})),g.BackgroundLoader.addTask(new h.Task(function(){var e=this;d.FBInstantAds.preloadRewardedVideoAd(function(){e.completed()})})),g.BackgroundLoader.addTask(new h.Task(function(){var t=this;e.loadSkinPopupCallback=null,s.default.instance.loadPrefabByType(l.PrefabType.SKIN_POPUP,function(o){t.completed(),e.loadSkinPopupCallback&&e.loadSkinPopupCallback(o)})})),g.BackgroundLoader.addTask(new h.Task(function(){var t=this;e.loadEventPopupCallback=null,s.default.instance.loadPrefabByType(l.PrefabType.EVENT_POPUP,function(o){t.completed(),e.loadEventPopupCallback&&e.loadEventPopupCallback(o)})})),g.BackgroundLoader.addTask(new h.Task(function(){var t=this;e.loadRankPopupCallback=null,s.default.instance.loadPrefabByType(l.PrefabType.RANK_POPUP,function(o){t.completed(),e.loadRankPopupCallback&&e.loadRankPopupCallback(o)})})),g.BackgroundLoader.addTask(new h.Task(function(){var t=this;e.loadDailyPopupCallback=null,s.default.instance.loadPrefabByType(l.PrefabType.DAILY_POPUP,function(o){t.completed(),e.loadDailyPopupCallback&&e.loadDailyPopupCallback(o)})})),g.BackgroundLoader.addTask(new h.Task(function(){var t=this;e.loadPetPopupCallback=null,s.default.instance.loadPrefabByType(l.PrefabType.PET_POPUP,function(o){t.completed(),e.loadPetPopupCallback&&e.loadPetPopupCallback(o)})}))},t.prototype.playAudioClick=function(){this.audioPlayer.playAudio(c.AudioPlayId.button_click)},t.prototype.showHomeScreen=function(e){void 0===e&&(e=null),this.screenManager.showScreenById(f.ScreenId.HOME_SCREEN,e)},t.prototype.showGamePlayScreen=function(e){void 0===e&&(e=null),this.screenManager.showScreenById(f.ScreenId.PLAY_SCREEN,e)},t.prototype.showCastleScreen=function(e){void 0===e&&(e=null),this.screenManager.showScreenById(f.ScreenId.CASTLE_SCREEN,e)},t.prototype.showSettingPopup=function(){var e=this;this.settingPopup?this.settingPopup.active=!0:this.createPopupByType(l.PrefabType.SETTING,function(t){e.settingPopup=t,e.settingPopup.active=!0})},t.prototype.showSelectRoomPopup=function(){var e=this;if(this.selectRoomPopup)this.selectRoomPopup.active=!0;else{var t=function(){e.showLoading(),e.createPopupByType(l.PrefabType.SELECT_ROOM,function(t){e.selectRoomPopup=t,e.selectRoomPopup.active=!0,e.hideLoading()})};void 0===this.loadRoomSelectCallback?this.loadRoomSelectCallback=t:t()}},t.prototype.showSelectKingdomPopup=function(){var e=this;if(this.selectKingdomPopup)this.selectKingdomPopup.active=!0;else{var t=function(){e.showLoading(),e.createPopupByType(l.PrefabType.SELECT_KINGDOM,function(t){e.selectKingdomPopup=t,e.selectKingdomPopup.active=!0,e.hideLoading()})};void 0===this.loadKingdomSelectCallback?this.loadKingdomSelectCallback=t:t()}},t.prototype.showBuildKingdomPopup=function(){var e=this;if(this.buildKingdomPopup)this.buildKingdomPopup.active=!0;else{var t=function(){e.showLoading(),e.createPopupByType(l.PrefabType.BUILD_KINGDOM,function(t){e.buildKingdomPopup=t,e.buildKingdomPopup.active=!0,e.hideLoading()})};void 0===this.loadKingdomBuilderCallback?this.loadKingdomBuilderCallback=t:t()}},t.prototype.showSkinPopup=function(){var e=this;if(this.skinPopup)this.skinPopup.active=!0;else{var t=function(){e.showLoading(),e.createPopupByType(l.PrefabType.SKIN_POPUP,function(t){e.skinPopup=t,e.skinPopup.active=!0,e.hideLoading()})};void 0===this.loadSkinPopupCallback?this.loadSkinPopupCallback=t:t()}},t.prototype.showEventPopup=function(){var e=this;if(this.eventPopup)this.eventPopup.Show();else{var t=function(){e.showLoading(),e.createPopupByType(l.PrefabType.EVENT_POPUP,function(t){e.eventPopup=t.getComponent(_.default),e.eventPopup.Show(),e.hideLoading()})};void 0===this.loadEventPopupCallback?this.loadEventPopupCallback=t:t()}},t.prototype.showRankPopup=function(e){var t=this;if(this.rankPopup)this.rankPopup.Show(e);else{var o=function(){t.showLoading(),t.createPopupByType(l.PrefabType.RANK_POPUP,function(o){t.rankPopup=o.getComponent(v.default),t.rankPopup.Show(e),t.hideLoading()})};void 0===this.loadRankPopupCallback?this.loadRankPopupCallback=o:o()}},t.prototype.showEntryYourNamePopup=function(e){var t=this;if(this.chooseCountryPopup)this.chooseCountryPopup.Show(e);else{var o=function(){t.showLoading(),t.createPopupByType(l.PrefabType.CHOOSECOUNTRY_POPUP,function(o){t.chooseCountryPopup=o.getComponent(m.default),t.chooseCountryPopup.Show(e),t.hideLoading()})};void 0===this.loadEntryYourNamePopupCallback?this.loadEntryYourNamePopupCallback=o:o()}},t.prototype.showDailyPopup=function(){var e=this;if(this.dailyPopup)this.dailyPopup.Show();else{var t=function(){e.showLoading(),e.createPopupByType(l.PrefabType.DAILY_POPUP,function(t){e.dailyPopup=t.getComponent(b.default),e.dailyPopup.Show(),e.hideLoading()})};void 0===this.loadDailyPopupCallback?this.loadDailyPopupCallback=t:t()}},t.prototype.showPetPopup=function(){var e=this;if(this.petPopup)this.petPopup.Show();else{var t=function(){e.showLoading(),e.createPopupByType(l.PrefabType.PET_POPUP,function(t){e.petPopup=t.getComponent(C.default),e.petPopup.Show(),e.hideLoading()})};void 0===this.loadPetPopupCallback?this.loadPetPopupCallback=t:t()}},t.prototype.createPopupByType=function(e,t,o){var n=this;void 0===o&&(o=null),null===o&&(o=e),s.default.instance.loadPrefabByType(e,function(e){var i=cc.instantiate(e);n.nodePopups.addChild(i,o),n.arrayPopup.push(i),t(i)})},t.prototype.showLoading=function(){this.loading&&(this.loading.active=!0)},t.prototype.hideLoading=function(){this.loading&&(this.loading.active=!1)},t.prototype.getLanguage=function(){var e=window.location.search.substring(1).split("&"),t={};e.forEach(function(e){var o=e.split("="),n=o[0],i=o[1];t[n]=decodeURIComponent(i)}),this.language=t.hl,this.language&&(this.language=this.language.toUpperCase()),"EN"!==this.language&&"ID"!==this.language&&"JA"!==this.language&&"DE"!==this.language&&(this.language="EN")},t._instance=null,r([A(a.default)],t.prototype,"audioPlayer",void 0),r([A(f.default)],t.prototype,"screenManager",void 0),r([A(cc.Node)],t.prototype,"nodePopups",void 0),r([A(cc.Node)],t.prototype,"loading",void 0),r([A(cc.Prefab)],t.prototype,"testPrefab",void 0),r([A(cc.Integer)],t.prototype,"testStartLevel",void 0),o=r([O],t)}(cc.Component);o.default=R,cc._RF.pop()},{"./BackgroundLoader":"BackgroundLoader","./CastleScreen":"CastleScreen","./GameData":"GameData","./LoadingScene":"LoadingScene","./PrefabManager":"PrefabManager","./PrefabType":"PrefabType","./ResUtil":"ResUtil","./ScreenManager":"ScreenManager","./base/Task":"Task","./base/audio/AudioPlayer":"AudioPlayer","./base/glance_Global":"glance_Global","./chooseCountryPopup/ChooseCountryPopup":"ChooseCountryPopup","./config/AudioPlayId":"AudioPlayId","./dailyPopup/DailyPopup":"DailyPopup","./event/EventPopup":"EventPopup","./pets/PetPopup":"PetPopup","./plugins/fb/FBInstantAds":"FBInstantAds","./rank/RankPopup":"RankPopup"}],MapLevel:[function(e,t,o){"use strict";cc._RF.push(t,"93a86QtMkBNjpRK2sTnJOCG","MapLevel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/QuestType"),c=e("../config/GameState"),s=e("../config/GlobalSignals"),l=e("../objects/barrier/StickHold"),u=e("../objects/character/Character"),p=e("../base/TouchManager"),d=e("../objects/more/ItemLoot"),f=e("../base/utils/ArrayUtil"),h=e("../GameData"),y=e("../PlayScreen"),g=cc._decorator,_=g.ccclass,v=g.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.questType=a.QuestType.COLLECT_GEMS,t.gameState=c.GameState.BEGIN,t.arrStickToActive=[],t.arrEnemies=[],t.itemLoot=null,t.tipLabel=null,t.isCollectGems=!1,t._countGemsDestroyed=0,t._countGemsCollected=0,t._rockContainer=null,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.gameState===c.GameState.PLAYING},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isQuestCollectGems",{get:function(){return this.questType===a.QuestType.COLLECT_GEMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isQuestCollectItem",{get:function(){return this.questType===a.QuestType.COLLECT_ITEM},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isQuestSaveHostage",{get:function(){return this.questType===a.QuestType.SAVE_HOSTAGE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isQuestKillEnemies",{get:function(){return this.questType===a.QuestType.KILL_ENEMY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isQuestOpenChest",{get:function(){return this.questType===a.QuestType.OPEN_CHEST},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"countGemsDestroyed",{get:function(){return this._countGemsDestroyed},set:function(e){this._countGemsDestroyed=e,15!==this._countGemsDestroyed||this.isCollectGems||s.GlobalSignals.questFailSignal.dispatch()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"countGemsCollected",{get:function(){return this._countGemsCollected},set:function(e){this._countGemsCollected=e,5===this._countGemsCollected&&this.isQuestCollectGems&&this.isPlaying&&(this.isCollectGems=!0,s.GlobalSignals.collectGemsSignal.dispatch())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rockContainer",{get:function(){return this._rockContainer||(this._rockContainer=new cc.Node,this.node.addChild(this._rockContainer)),this._rockContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._instance=this},t.prototype.onDestroy=function(){o._instance=null,this.unscheduleAllCallbacks()},t.prototype.start=function(){var e=this;this.scheduleOnce(function(){e.gameState=c.GameState.PLAYING},.6);var t=this.onActiveStick.bind(this);if(this.arrStickToActive.forEach(function(e){e.setHoldCallback(t)}),this.isQuestKillEnemies){var o=this.onEnemiesDead.bind(this);this.arrEnemies.forEach(function(e){var t=e.getComponent(u.default);t&&t.setDeadCallback(o)})}this.isQuestCollectItem&&this.itemLoot&&h.GameData.checkItemCollected(this.itemLoot)&&this.replaceItemByChest(),p.default.instance&&p.default.instance.reset()},t.prototype.onEnable=function(){this._questFailSignal=this.onQuestFail.bind(this),this._questPassSignal=this.onQuestPass.bind(this),s.GlobalSignals.questFailSignal.add(this._questFailSignal),s.GlobalSignals.questPassSignal.add(this._questPassSignal)},t.prototype.onDisable=function(){s.GlobalSignals.questFailSignal.remove(this._questFailSignal),s.GlobalSignals.questPassSignal.remove(this._questPassSignal)},t.prototype.onQuestFail=function(){this.gameState=c.GameState.LOSE},t.prototype.onQuestPass=function(){this.gameState=c.GameState.WIN},t.prototype.onActiveStick=function(e){var t=this;0!==this.arrStickToActive.length&&(f.default.removeElement(this.arrStickToActive,e),0===this.arrStickToActive.length&&this.scheduleOnce(function(){t.isPlaying&&s.GlobalSignals.autoMoveSignal.dispatch()},.25))},t.prototype.onEnemiesDead=function(e){var t=this;0!==this.arrEnemies.length&&(f.default.removeElement(this.arrEnemies,e),0===this.arrEnemies.length&&this.isQuestKillEnemies&&this.scheduleOnce(function(){t.isPlaying&&s.GlobalSignals.questPassSignal.dispatch()},.6))},t.prototype.replaceItemByChest=function(){cc.log("replaceItemByChest");var e=cc.instantiate(this.itemLoot.chestPrefab);this.node.addChild(e),e.position=this.itemLoot.node.position,e.setSiblingIndex(this.itemLoot.node.getSiblingIndex()),this.tipLabel&&(this.tipLabel.node.active=!1),this.itemLoot.node.removeFromParent(),this.questType=a.QuestType.OPEN_CHEST,y.default.instance.updateLevelInfo(h.GameData.currentLevelId,this.questType)},t._instance=null,r([v({type:cc.Enum(a.QuestType)})],t.prototype,"questType",void 0),r([v([l.default])],t.prototype,"arrStickToActive",void 0),r([v([cc.Node])],t.prototype,"arrEnemies",void 0),r([v(d.default)],t.prototype,"itemLoot",void 0),r([v(cc.Label)],t.prototype,"tipLabel",void 0),o=r([_],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../GameData":"GameData","../PlayScreen":"PlayScreen","../base/TouchManager":"TouchManager","../base/utils/ArrayUtil":"ArrayUtil","../config/GameState":"GameState","../config/GlobalSignals":"GlobalSignals","../config/QuestType":"QuestType","../objects/barrier/StickHold":"StickHold","../objects/character/Character":"Character","../objects/more/ItemLoot":"ItemLoot"}],MathUtil:[function(e,t,o){"use strict";cc._RF.push(t,"b05f8iW0xpDR7/QZeh1WLv8","MathUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.randomBeetWeenFloor=function(e,t){return Math.floor(this.randomBeetWeen(e,t))},e.randomBeetWeenFloor1=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e.randomBeetWeen=function(e,t){return Math.random()*(t-e)+e},e.getEuclidDistance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.randomInt=function(e){return Math.floor(Math.random()*e)},e.getRandomFrom=function(e){return e[this.randomInt(e.length)]},e.getRandomSurround=function(e,t){var o=this.getRandomFrom([-1,1])*Math.floor(Math.random()*t)+e.x,n=this.getRandomFrom([-1,1])*Math.floor(Math.random()*t)+e.y;return new cc.Vec2(o,n)},e.getTimeRest=function(e,t){return Math.floor((t.getTime()-e.getTime())/1e3)},e.getTimeToString=function(e){if(e<0)return"00:00:00";var t=Math.floor(e/3600%24)+"",o=Math.floor(e/60%60)+"",n=Math.floor(e%60)+"";return t.length<2&&(t="0"+t),o.length<2&&(o="0"+o),n.length<2&&(n="0"+n),t+":"+o+":"+n},e}();o.default=n,cc._RF.pop()},{}],MoveCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"e8b3bJpT95DF5LXqOlQdvTC","MoveCtrl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc.Vec2,c=e("../../base/PhysicalEnable"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Velocity_X=120,t.Jump=25,t.enableOverTerrain=!0,t.Rigid_Body=null,t.Direction=0,t}return i(t,e),t.prototype.onLoad=function(){this.Rigid_Body=this.node.getComponent(cc.RigidBody)},t.prototype.start=function(){this.Walk_Force=1e3*this.Rigid_Body.getMass(),this.Jump_Force=1e3*this.Rigid_Body.getMass()*this.Jump},t.prototype.moveLeft=function(){this.Direction=-1},t.prototype.moveRight=function(){this.Direction=1},t.prototype.moveJump=function(){this.Rigid_Body.applyForceToCenter(cc.v2(0,this.Jump_Force),!0)},t.prototype.stopMove=function(){this.Direction=0,this.Rigid_Body.linearVelocity=a.ZERO},t.prototype.update=function(){if((this.Direction>0&&this.Rigid_Body.linearVelocity.x<this.Velocity_X||this.Direction<0&&this.Rigid_Body.linearVelocity.x>-this.Velocity_X)&&this.Rigid_Body.applyForceToCenter(cc.v2(this.Direction*this.Walk_Force*c.default.REAL_GRAVITY_SCALE,0),!0),this.enableOverTerrain&&(this.Direction>0&&this.Rigid_Body.linearVelocity.x<10||this.Direction<0&&this.Rigid_Body.linearVelocity.x>-10)){var e=this.Rigid_Body.linearVelocity.y<30?5:-10;this.Rigid_Body.applyForceToCenter(cc.v2(0,e*this.Walk_Force*c.default.REAL_GRAVITY_SCALE),!0)}},r([u(cc.Float)],t.prototype,"Velocity_X",void 0),r([u(cc.Float)],t.prototype,"Jump",void 0),r([u(cc.Boolean)],t.prototype,"enableOverTerrain",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../base/PhysicalEnable":"PhysicalEnable"}],MoveVariant:[function(e,t,o){"use strict";cc._RF.push(t,"1e583oyUPZORZa5+rVGIDAk","MoveVariant");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pointStart=null,t.pointEnd=null,t.timeRun=0,t.delayTime=0,t}return i(t,e),t.prototype.onLoad=function(){this.p0=this.node.getParent().convertToNodeSpaceAR(this.pointStart.getParent().convertToWorldSpaceAR(this.pointStart.position)),this.p1=this.node.getParent().convertToNodeSpaceAR(this.pointEnd.getParent().convertToWorldSpaceAR(this.pointEnd.position)),this.node.position=this.p0},t.prototype.start=function(){var e=cc.tween().to(this.timeRun,{position:this.p1}).delay(this.delayTime),t=cc.tween().to(this.timeRun,{position:this.p0}).delay(this.delayTime),o=cc.tween().sequence(e,t);cc.tween(this.node).repeatForever(o).start()},r([s(cc.Node)],t.prototype,"pointStart",void 0),r([s(cc.Node)],t.prototype,"pointEnd",void 0),r([s(cc.Integer)],t.prototype,"timeRun",void 0),r([s(cc.Integer)],t.prototype,"delayTime",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],MyAudioPlayer:[function(e,t){"use strict";cc._RF.push(t,"a7628SEG81DQrwsRPOprRnj","MyAudioPlayer");var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=n?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(o,r,a):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(e("./AudioPlayer")),n=e("../../config/AudioPlayId");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}cc.Class({extends:o.default,properties:{arrayAudioObj:{type:[o.AudioObject],default:function(){var e=[];for(var t in n.AudioPlayId){var i=new o.AudioObject;i.name=n.AudioPlayId[t+""],i.isMusic=!1,i.audioClip=null,e.push(i)}return e},override:!0}}}),cc._RF.pop()},{"../../config/AudioPlayId":"AudioPlayId","./AudioPlayer":"AudioPlayer"}],MyRoom:[function(e,t,o){"use strict";cc._RF.push(t,"73b4e4nWfpO3aCoMUirYPtQ","MyRoom");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./OpenItem"),c=e("./ReplaceItem"),s=e("../GameData"),l=e("../config/RoomConfig"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boss=null,t.openItemPrefab=null,t.items=[],t.roomId=0,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.roomId=l.RoomConfig.getRoomIdByName(this.node.name),this.roomId<s.GameData.currentRoomId?(cc.log("unlock all items roomId = "+s.GameData.currentRoomId),this.items.forEach(function(e){e.replaceBy.active=!0,e.node.active=!1})):(cc.log("init GameData.arrayItem = "+s.GameData.arrayItem),s.GameData.arrayItem.forEach(function(t){e.items[t-1].replaceBy.active=!0,e.items[t-1].node.active=!1}),s.GameData.arrayItem.length===l.RoomConfig.rooms[s.GameData.currentRoomId].size&&(s.GameData.currentRoomId++,s.GameData.arrayItem=[],cc.log("unlock roomId = "+s.GameData.currentRoomId)))},t.prototype.openItem=function(e,t){var o=this;cc.log("openItem"),s.GameData.addRoomItem(e.itemId,this.roomId),this.boss.setAnimation(0,"idle",!0);var n=cc.instantiate(this.openItemPrefab);this.node.addChild(n);var i=n.getComponent(a.default);i.show(e),i.setOpenCallback(function(n,i){cc.log("setOpenCallback");var r=o.items[e.itemId-1];cc.tween(n).to(.5,{position:r.node.position,scale:.6}).call(function(){o.boss.setAnimation(0,"IdleNice",!0),o.showEffectAppear(i,r.node.position),n.removeFromParent(),r.replace(t)}).start()})},t.prototype.showEffectAppear=function(e,t){if(e){var o=cc.instantiate(e);o.setPosition(t),o.scale=1,this.node.addChild(o),cc.tween(o).delay(.8).call(function(){o.removeFromParent()}).start()}else cc.warn("effectPrefab is null")},t.prototype.onDisable=function(){this.boss.setAnimation(0,"Dance",!0)},r([d(sp.Skeleton)],t.prototype,"boss",void 0),r([d(cc.Prefab)],t.prototype,"openItemPrefab",void 0),r([d([c.default])],t.prototype,"items",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameData":"GameData","../config/RoomConfig":"RoomConfig","./OpenItem":"OpenItem","./ReplaceItem":"ReplaceItem"}],NoPadding:[function(e,t,o){"use strict";cc._RF.push(t,"38edcJmpCxB+7H8EcyM17AP","NoPadding"),Object.defineProperty(o,"__esModule",{value:!0}),o.NoPadding=void 0;var n=function(){function e(){}return e.pad=function(){},e.unpad=function(){},e}();o.NoPadding=n,cc._RF.pop()},{}],NodeFixSize:[function(e,t,o){"use strict";cc._RF.push(t,"ac315ALtiZAaIv7DzDPnY3h","NodeFixSize");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fixWidth=!1,t.fixHeight=!1,t.auto=!1,t}return i(t,e),t.prototype.onEnable=function(){if(this.fixWidth||this.fixHeight||this.auto){var e=cc.winSize;if(this.auto&&(this.node.width/this.node.height<e.width/e.height?(this.fixHeight=!1,this.fixWidth=!0):(this.fixHeight=!0,this.fixWidth=!1)),this.fixWidth&&this.fixHeight)return this.node.width=e.width,void(this.node.height=e.height);var t=this.fixWidth?e.width/this.node.width:e.height/this.node.height;this.node.width*=t,this.node.height*=t}},r([s(cc.Boolean)],t.prototype,"fixWidth",void 0),r([s(cc.Boolean)],t.prototype,"fixHeight",void 0),r([s(cc.Boolean)],t.prototype,"auto",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],NumberUpdater:[function(e,t,o){"use strict";cc._RF.push(t,"5f57bf0wUVL5oDhX1pS612S","NumberUpdater");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.step=.01,t._formatFunc=null,t._currentNumber=0,t._dstNumber=0,t}return i(t,e),Object.defineProperty(t.prototype,"currentNumber",{get:function(){return this._currentNumber},set:function(e){this._currentNumber=e,this.updateLabel()},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.label||(this.label=this.getComponent(cc.Label))},t.prototype.setFormatFunc=function(e){this._formatFunc=e},t.prototype.updateNumber=function(e,t,o){this.currentNumber=this._dstNumber,this.setNumber(e,t,o)},t.prototype.setNumber=function(e,t,o){var n=this;if(this._dstNumber=e,t){if(this.unscheduleAllCallbacks(),this.currentNumber===e)return;o&&(this.step=o);var i=this.step,r=Math.floor(t/this.step);this.currentNumber>e&&(this.currentNumber=0);var a=Math.ceil((e-this.currentNumber)/r);a<=0&&(a=1),this.schedule(function(){n.currentNumber+=a,n.currentNumber>e&&(n.currentNumber=e,n.unscheduleAllCallbacks())},i,r,0)}else this.currentNumber=e},t.prototype.updateLabel=function(){cc.isValid(this.label)?this._formatFunc?this.label.string=""+this._formatFunc(this.currentNumber):this.label.string=""+this.currentNumber:cc.warn("this.label is not valid or null or undefined")},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([s(cc.Label)],t.prototype,"label",void 0),r([s(cc.Integer)],t.prototype,"step",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],OpenItem:[function(e,t,o){"use strict";cc._RF.push(t,"0ab54+/wy5Mo71tsg159rYL","OpenItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../MainScene"),c=e("../config/AudioPlayId"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemSkeleton=null,t.effectAppear=null,t.callback=null,t.itemConfig=null,t}return i(t,e),t.prototype.onOpenClick=function(){this.itemSkeleton.node.removeFromParent(),this.node.getParent().addChild(this.itemSkeleton.node),this.callback&&this.callback(this.itemSkeleton.node,this.effectAppear),this.node.removeFromParent()},t.prototype.setOpenCallback=function(e){this.callback=e},t.prototype.show=function(e){cc.log("OpenItem show "+e.skin),this.itemConfig=e,this.itemSkeleton.setSkin(e.skin),this.itemSkeleton.setSlotsToSetupPose(),a.default.instance.audioPlayer.playAudio(c.AudioPlayId.button_open)},r([u(sp.Skeleton)],t.prototype,"itemSkeleton",void 0),r([u(cc.Prefab)],t.prototype,"effectAppear",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../MainScene":"MainScene","../config/AudioPlayId":"AudioPlayId"}],OpenSSLKdf:[function(e,t,o){"use strict";cc._RF.push(t,"ae5afqW9ARC/Yueq9F1e3Za","OpenSSLKdf"),Object.defineProperty(o,"__esModule",{value:!0}),o.OpenSSLKdf=void 0;var n=e("../lib/WordArray"),i=e("../lib/CipherParams"),r=e("../algo/EvpKDF"),a=function(){function e(){}return e.execute=function(e,t,o,a){a||(a=n.WordArray.random(8));var c=new r.EvpKDF({keySize:t+o}).compute(e,a),s=new n.WordArray(c.words.slice(t),4*o);return c.sigBytes=4*t,new i.CipherParams({key:c,iv:s,salt:a})},e}();o.OpenSSLKdf=a,cc._RF.pop()},{"../algo/EvpKDF":"EvpKDF","../lib/CipherParams":"CipherParams","../lib/WordArray":"WordArray"}],OpenSSL:[function(e,t,o){"use strict";cc._RF.push(t,"172f8Os1y5DY5qir9NXuOKB","OpenSSL"),Object.defineProperty(o,"__esModule",{value:!0}),o.OpenSSL=void 0;var n=e("../lib/CipherParams"),i=e("../lib/WordArray"),r=e("../enc/Base64"),a=function(){function e(){}return e.stringify=function(e){if(!e.ciphertext)throw new Error("missing ciphertext in params");var t,o=e.ciphertext,n=e.salt;if(n){if("string"==typeof n)throw new Error("salt is expected to be a WordArray");t=new i.WordArray([1398893684,1701076831]).concat(n).concat(o)}else t=o;return t.toString(r.Base64)},e.parse=function(e){var t,o=r.Base64.parse(e);return 1398893684===o.words[0]&&1701076831===o.words[1]&&(t=new i.WordArray(o.words.slice(2,4)),o.words.splice(0,4),o.sigBytes-=16),new n.CipherParams({ciphertext:o,salt:t})},e}();o.OpenSSL=a,cc._RF.pop()},{"../enc/Base64":"Base64","../lib/CipherParams":"CipherParams","../lib/WordArray":"WordArray"}],PKCS7:[function(e,t,o){"use strict";cc._RF.push(t,"1f46dxgcJJBi6t5s95WryX9","PKCS7"),Object.defineProperty(o,"__esModule",{value:!0}),o.PKCS7=void 0;var n=e("../lib/WordArray"),i=function(){function e(){}return e.pad=function(e,t){for(var o=4*t,i=o-e.sigBytes%o,r=i<<24|i<<16|i<<8|i,a=[],c=0;c<i;c+=4)a.push(r);var s=new n.WordArray(a,i);e.concat(s)},e.unpad=function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t},e}();o.PKCS7=i,cc._RF.pop()},{"../lib/WordArray":"WordArray"}],Padding:[function(e,t,o){"use strict";cc._RF.push(t,"acb37K6ocRNAKDeUZjDREny","Padding"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ParticleLoop:[function(e,t,o){"use strict";cc._RF.push(t,"94f7cvxN9VAWZbGjcmK9FYB","ParticleLoop");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loop=!0,t.particleSystem=null,t}return i(t,e),t.prototype.onLoad=function(){this.particleSystem=this.getComponent(cc.ParticleSystem)},t.prototype.update=function(){0==this.particleSystem.particleCount&&(this.loop?(cc.log("particleCount = "+this.particleSystem.particleCount),this.particleSystem.resetSystem()):this.particleSystem.stopSystem())},r([s(cc.Boolean)],t.prototype,"loop",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],PasswordBasedCipher:[function(e,t,o){"use strict";cc._RF.push(t,"30e13vNU69GXpn4b/xGwwct","PasswordBasedCipher"),Object.defineProperty(o,"__esModule",{value:!0}),o.PasswordBasedCipher=void 0;var n=e("./SerializableCipher"),i=e("./WordArray"),r=e("../format/OpenSSL"),a=e("../kdf/OpenSSLKdf"),c=function(){function e(){}return e.encrypt=function(e,t,o,i){var r=Object.assign({},this.cfg,i);if(void 0===r.kdf)throw new Error("missing kdf in config");var a=r.kdf.execute(o,e.keySize,e.ivSize);return void 0!==a.iv&&(r.iv=a.iv),n.SerializableCipher.encrypt.call(this,e,t,a.key,r).extend(a)},e.decrypt=function(e,t,o,i){var r=Object.assign({},this.cfg,i);if(void 0===r.format)throw new Error("missing format in config");if(t=this._parse(t,r.format),void 0===r.kdf)throw new Error("the key derivation function must be set");var a=r.kdf.execute(o,e.keySize,e.ivSize,t.salt);return void 0!==a.iv&&(r.iv=a.iv),n.SerializableCipher.decrypt.call(this,e,t,a.key,r)},e._parse=function(e,t){return"string"==typeof e?t.parse(e):e},e.cfg={blockSize:4,iv:new i.WordArray([]),format:r.OpenSSL,kdf:a.OpenSSLKdf},e}();o.PasswordBasedCipher=c,cc._RF.pop()},{"../format/OpenSSL":"OpenSSL","../kdf/OpenSSLKdf":"OpenSSLKdf","./SerializableCipher":"SerializableCipher","./WordArray":"WordArray"}],PetConfig:[function(e,t,o){"use strict";cc._RF.push(t,"242f4ruSuRBzay32mUoWUex","PetConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.PetConfig=o.ItemEggConfig=o.ItemPetConfig=void 0;var n=function(e,t,o){void 0===o&&(o=""),this.maxLevel=5,this.petId=e,this.skins=t,this.pathDir=o};o.ItemPetConfig=n;var i=function(e,t,o,n){this.eggId=e,this.skins=t,this.petId=o,this.value=n};o.ItemEggConfig=i;var r=function(){function e(){}return e.getPetConfigById=function(t){for(var o=0;o<e.arrayPetConfig.length;o++){var n=e.arrayPetConfig[o];if(n.petId==t)return n}return null},e.arrayPetConfig=[new n("pet_1","","spines/pets/ExportCat/Cat"),new n("pet_2","","spines/pets/ExportDog/Dog"),new n("pet_3","","spines/pets/ExportFox/Fox"),new n("pet_4","","spines/pets/ExportPenguin/Penguin"),new n("pet_5","","spines/pets/ExportRabbit/Rabbit"),new n("pet_6","","spines/pets/ExportDino/Dino"),new n("pet_7","","spines/pets/ExportPig/Pig"),new n("pet_8","","spines/pets/ExportBear/Bear"),new n("pet_9","","spines/pets/ExportGoat/Goat")],e.arrayEggConfig=[new i("egg_1","Egg1","pet_1",20),new i("egg_2","Egg2","pet_2",50),new i("egg_3","Egg3","pet_3",100),new i("egg_4","Egg4","pet_4",150),new i("egg_5","Egg5","pet_5",200),new i("egg_6","Egg6","pet_6",500),new i("egg_7","Egg7","pet_7",50),new i("egg_8","Egg8","pet_8",100),new i("egg_9","Egg9","pet_9",150)],e}();o.PetConfig=r,cc._RF.pop()},{}],PetDataManager:[function(e,t,o){"use strict";cc._RF.push(t,"fe965FjI+NIcIaXSTcwSvvK","PetDataManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.PetDataManager=o.PetDataT=o.EggData=void 0;var n=e("../base/utils/ArrayUtil"),i=e("../base/utils/MathUtil"),r=e("../config/PetConfig"),a=e("../GameData"),c={Level1:[500,700,900,1100,1300,1500,1700,1900,2100,2300],Level2:[2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3],Level3:[6600,7200,7800,8400,9e3,9600,10200,10800,11400,12e3],Level4:[2e4,3e4,4e4,5e4,6e4,7e4,8e4,9e4,1e5,11e4]},s=function(){this.eggId="",this.eggNumber=0};o.EggData=s;var l=function(){this.petId="",this.petLevel=0,this.petExp=0};o.PetDataT=l;var u=function(){function e(){}return e.ConvertDataPet=function(e){if(""==e)return null;var t=new l,o=e;"string"==typeof e&&(o=JSON.parse(e));var i=n.default.getValue(o,this.KEY_PET_ID,"");return""==i?null:(t.petId=i,t.petExp=n.default.getValue(o,this.KEY_PET_EXP,0),t.petLevel=n.default.getValue(o,this.KEY_PET_LEVEL,0),t)},e.ConvertDataEgg=function(e){if(""==e)return null;var t=new s,o=e;"string"==typeof e&&(o=JSON.parse(e));var i=n.default.getValue(o,this.KEY_EGG_ID,"");return""==i?null:(t.eggId=i,t.eggNumber=n.default.getValue(o,this.KEY_EGG_NUMBER,0),t)},e.ConvertToArrDataPet=function(e){if(""==e)return[];var t=[],o=JSON.parse(e);if(!(o instanceof Array))return[];for(var n=0;n<o.length;n++){var i=o[n],r=this.ConvertDataPet(i);t.push(r)}return t},e.ConvertToArrDataEgg=function(e){if(""==e)return[];var t=[],o=JSON.parse(e);if(!(o instanceof Array))return[];for(var n=0;n<o.length;n++){var i=o[n],r=this.ConvertDataEgg(i);t.push(r)}return t},e.pickRandomAEgg=function(){for(var e=[],t=0;t<r.PetConfig.arrayEggConfig.length;t++){var o=r.PetConfig.arrayEggConfig[t];a.GameData.checkHavePet(o.eggId)||e.push(o)}return e[i.default.randomInt(e.length)]},e.GetCostUpgrade=function(e,t){var o=c[e];return o?o[t]:5e3},e.getMaxExpLevel=function(e){var t=c[e];return t?t.length:-1},e.createNewPetFromCofig=function(e){var t=new l;return t.petExp=0,t.petId=e.petId,t.petLevel=1,t},e.cloneAPet=function(e){var t=new l;return t.petExp=e.petExp,t.petId=e.petId,t.petLevel=e.petLevel,t},e.KEY_PET_ID="petId",e.KEY_PET_EXP="petExp",e.KEY_PET_LEVEL="petLevel",e.KEY_EGG_ID="eggId",e.KEY_EGG_NUMBER="eggNumber",e}();o.PetDataManager=u,cc._RF.pop()},{"../GameData":"GameData","../base/utils/ArrayUtil":"ArrayUtil","../base/utils/MathUtil":"MathUtil","../config/PetConfig":"PetConfig"}],PetItem:[function(e,t,o){"use strict";cc._RF.push(t,"212baWXvctPUZwXgMQlctb6","PetItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/PetConfig"),c=e("../GameData"),s=e("../ResUtil"),l=e("./PetDataManager"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbMatch=null,t.lbCost=null,t.btnMatch=null,t.btnUpdate=null,t.btnSwitch=null,t.skePet=null,t.skeEgg=null,t.proGressPet=null,t.containerEgg=null,t.containerPet=null,t.light=null,t.petData=null,t.ClickCallback=null,t}return i(t,e),t.prototype.initPetItem=function(e,t){this.cfg=e,this.ClickCallback=t,this.petConfig=a.PetConfig.getPetConfigById(this.cfg.petId),this.checkLightPetItem(),c.GameData.checkHavePet(e.petId)?this.onPet():this.onEgg(e)},t.prototype.checkLightPetItem=function(){this.light.active=!1,c.GameData.CurrentPet&&this.petConfig&&c.GameData.CurrentPet.petId==this.petConfig.petId&&(this.light.active=!0)},t.prototype.onEgg=function(e){this.containerEgg.active=!0,this.containerPet.active=!1;var t=c.GameData.getNumberEgg(e.eggId);this.lbMatch.string=t+"/"+e.value,this.skeEgg.node.active=!0,this.skeEgg.setSkin(e.skins),t==e.value?this.btnMatch.interactable=!0:this.btnMatch.interactable=!1},t.prototype.onPet=function(){var e=this;this.containerPet.active=!0,this.containerEgg.active=!1,this.skePet.node.active=!0,this.petData=c.GameData.getMyPetWithId(this.cfg.petId);var t="Level"+this.petData.petLevel,o=l.PetDataManager.GetCostUpgrade(t,this.petData.petExp),n=l.PetDataManager.getMaxExpLevel(t);this.updateStateBtn(),this.proGressPet.progress=this.petData.petExp/n,this.lbCost.string=o+"",this.GrayStateItem(o),s.ResUtil.getSpineAnimPet(this.petConfig,function(o,n){e.skePet.skeletonData=n,e.skePet.setSkin(t),e.skePet.setAnimation(0,"Idle",!0)})},t.prototype.GrayStateItem=function(e){c.GameData.playerCoin<e?(this.btnUpdate.interactable=!1,this.btnUpdate.node.children[0].children[1].children[0].active=!0):(this.btnUpdate.interactable=!0,this.btnUpdate.node.children[0].children[1].children[0].active=!1)},t.prototype.onClickMath=function(){var e=this;this.skeEgg.setAnimation(0,"Break",!1);var t=l.PetDataManager.createNewPetFromCofig(this.petConfig);c.GameData.addPet(t,function(){}),this.scheduleOnce(function(){e.onPet()},1)},t.prototype.onClickUpdate=function(){var e=this,t="Level"+this.petData.petLevel,o=l.PetDataManager.GetCostUpgrade(t,this.petData.petExp);c.GameData.playerCoin<o||c.GameData.addExpPet(this.petConfig.petId,function(){},function(t,o){if(t){e.petData=t;var n="Level"+e.petData.petLevel,i=l.PetDataManager.GetCostUpgrade(n,e.petData.petExp),r=l.PetDataManager.getMaxExpLevel(n);e.proGressPet.progress=e.petData.petExp/r,e.lbCost.string=i+"",e.GrayStateItem(i),o&&(e.skePet.setSkin(n),e.skePet.setAnimation(0,"Idle",!0)),5==e.petData.petLevel&&e.updateStateBtn()}},-o)},t.prototype.onClickSwitch=function(){this.ClickCallback(this.petConfig)},t.prototype.updateStateBtn=function(){5==this.petData.petLevel?(this.btnUpdate.node.active=!1,this.proGressPet.node.active=!1):(this.btnUpdate.node.active=!0,this.proGressPet.node.active=!0)},r([d(cc.Label)],t.prototype,"lbMatch",void 0),r([d(cc.Label)],t.prototype,"lbCost",void 0),r([d(cc.Button)],t.prototype,"btnMatch",void 0),r([d(cc.Button)],t.prototype,"btnUpdate",void 0),r([d(cc.Button)],t.prototype,"btnSwitch",void 0),r([d(sp.Skeleton)],t.prototype,"skePet",void 0),r([d(sp.Skeleton)],t.prototype,"skeEgg",void 0),r([d(cc.ProgressBar)],t.prototype,"proGressPet",void 0),r([d(cc.Node)],t.prototype,"containerEgg",void 0),r([d(cc.Node)],t.prototype,"containerPet",void 0),r([d(cc.Node)],t.prototype,"light",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameData":"GameData","../ResUtil":"ResUtil","../config/PetConfig":"PetConfig","./PetDataManager":"PetDataManager"}],PetManager:[function(e,t,o){"use strict";cc._RF.push(t,"df720duXgZIV6b1o6tY1Gs4","PetManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return i(t,e),t.prototype.start=function(){},r([s(cc.Label)],t.prototype,"label",void 0),r([s],t.prototype,"text",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],PetPanalSwitch:[function(e,t,o){"use strict";cc._RF.push(t,"08c93GhjI1J2rBJkief26t0","PetPanalSwitch");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameData"),c=e("./ItemPetSwitch"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=null,t.itemPetSwitch=null,t}return i(t,e),t.prototype.Show=function(e){this.node.active=!0,this.IntPetPanlSwitch(e)},t.prototype.Hide=function(){this.node.active=!1},t.prototype.onClickClose=function(){this.Hide()},t.prototype.IntPetPanlSwitch=function(e){for(var t=this,o=a.GameData.getMyPetWithId(e.petId),n=0;n<e.maxLevel;n++){var i=this.container.children[n];i||(i=cc.instantiate(this.itemPetSwitch),this.container.addChild(i));var r=i.getComponent(c.default),s=this.getStateItem(n,o),l=this.isSelectedPet(e.petId,n+1);r.initItemPetSwitch({isHave:s,isSelected:l,level:n+1,petCfg:e},function(e){t.selectSkinPetByCfg(e)})}},t.prototype.selectSkinPetByCfg=function(e){for(var t=0;t<this.container.children.length;t++){var o=this.container.children[t].getComponent(c.default);o.cfg.level!=e.level&&o.setActiveLight(!1)}},t.prototype.getStateItem=function(e,t){return e<t.petLevel},t.prototype.isSelectedPet=function(e,t){return!!a.GameData.CurrentPet&&a.GameData.CurrentPet.petId==e&&t==a.GameData.CurrentPet.petLevel},r([u(cc.Node)],t.prototype,"container",void 0),r([u(cc.Node)],t.prototype,"itemPetSwitch",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../GameData":"GameData","./ItemPetSwitch":"ItemPetSwitch"}],PetPopup:[function(e,t,o){"use strict";cc._RF.push(t,"0c8b7hnTBlDi7HxPg8cEUVi","PetPopup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/GlobalSignals"),c=e("../config/PetConfig"),s=e("./PetItem"),l=e("./PetPanalSwitch"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arrayPetItem=[],t.rowPrefab=null,t.container=null,t.petPrefab=null,t.petPanelSwitch=null,t}return i(t,e),t.prototype.onLoad=function(){this.initData(),this._skinPetChange=this.updateSkinPet.bind(this)},t.prototype.onEnable=function(){a.GlobalSignals.changeSkinPetSignal.add(this._skinPetChange)},t.prototype.onDisable=function(){a.GlobalSignals.changeSkinPetSignal.remove(this._skinPetChange)},t.prototype.Show=function(){this.node.active=!0},t.prototype.updateSkinPet=function(){for(var e=0;e<this.arrayPetItem.length;e++)this.arrayPetItem[e].checkLightPetItem()},t.prototype.Hide=function(){this.node.active=!1},t.prototype.initData=function(){for(var e,t=this,o=(e=c.PetConfig.arrayEggConfig).length,n=Math.ceil(o/3),i=0,r=0;r<n;r++){var a=this.container.children[r];a||(a=cc.instantiate(this.rowPrefab),this.container.addChild(a)),a.active=!0;for(var l=0;l<3&&!(i>=o);l++){var u=e[i],p=a.children[l];p||(p=cc.instantiate(this.petPrefab),a.addChild(p)),p.position=a.children[l].position;var d=p.getComponent(s.default);d.initPetItem(u,function(e){t.petPanelSwitch.Show(e)}),this.arrayPetItem.push(d),i++}}},t.prototype.onClickClose=function(){this.Hide()},r([d(cc.Node)],t.prototype,"rowPrefab",void 0),r([d(cc.Node)],t.prototype,"container",void 0),r([d(cc.Node)],t.prototype,"petPrefab",void 0),r([d(l.default)],t.prototype,"petPanelSwitch",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../config/GlobalSignals":"GlobalSignals","../config/PetConfig":"PetConfig","./PetItem":"PetItem","./PetPanalSwitch":"PetPanalSwitch"}],PetWalkFollowDance:[function(e,t,o){"use strict";cc._RF.push(t,"b73f6uX1/ZKXbVUAQrI/wJw","PetWalkFollowDance");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.direction=1,t.speed=3,t.target=null,t.basePos=null,t}return i(t,e),t.prototype.start=function(){this.basePos=this.node.position.clone()},t.prototype.onEnable=function(){this.basePos&&(this.node.position=this.basePos.clone(),this.node.scaleX=Math.abs(this.node.scaleX),this.direction=1)},t.prototype.update=function(){this.node.x+=this.speed*this.direction,this.node.x>305&&(this.direction=-1,this.node.scaleX*=-1,this.speed=2.62),this.node.x<-305&&(this.direction=1,this.node.scaleX*=-1,this.speed=2.62)},r([s(cc.Node)],t.prototype,"target",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Pet:[function(e,t,o){"use strict";cc._RF.push(t,"6d5e298gqtHGZJ/o8o+gBVY","Pet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/GlobalSignals"),c=e("../config/PetConfig"),s=e("../GameData"),l=e("../ResUtil"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultAnim="Idle",t.idleAnim="Idle",t.idleAnim2="Idle2",t.runAnim="Run",t.walkAnim="Walk",t.walkAnim2="Walk2",t.loseAnim="Lose",t.winAnim="Win",t.skeleton=null,t.currentSkin="",t}return i(t,e),t.prototype.onLoad=function(){this.updateSkinPet()},t.prototype.onEnable=function(){this._onQuestPass=this.onQuestPass.bind(this),this._onQuestFail=this.onQuestFail.bind(this),this._onAutoMove=this.onAutoMove.bind(this),this._onBossAttack=this.onBossAttack.bind(this),this._bossWalkToTarget=this.onBossWalkToTargetSignal.bind(this),this._updateSkinPet=this.updateSkinPet.bind(this),a.GlobalSignals.questPassSignal.add(this._onQuestPass),a.GlobalSignals.questFailSignal.add(this._onQuestFail),a.GlobalSignals.autoMoveSignal.add(this._onAutoMove),a.GlobalSignals.bossAttackSignal.add(this._onBossAttack),a.GlobalSignals.bossWalkToTargetSignal.add(this._bossWalkToTarget),a.GlobalSignals.changeSkinPetSignal.add(this._updateSkinPet)},t.prototype.onDisable=function(){a.GlobalSignals.questPassSignal.remove(this._onQuestPass),a.GlobalSignals.questFailSignal.remove(this._onQuestFail),a.GlobalSignals.autoMoveSignal.remove(this._onAutoMove),a.GlobalSignals.bossAttackSignal.remove(this._onBossAttack),a.GlobalSignals.bossWalkToTargetSignal.remove(this._bossWalkToTarget),a.GlobalSignals.changeSkinPetSignal.remove(this._updateSkinPet)},t.prototype.onQuestPass=function(){this.playAnimation(this.winAnim,!0)},t.prototype.onQuestFail=function(){this.playAnimation(this.loseAnim,!0)},t.prototype.onAutoMove=function(){this.playAnimation(this.runAnim,!0)},t.prototype.onBossAttack=function(){this.playAnimation(this.idleAnim,!0)},t.prototype.onBossWalkToTargetSignal=function(){this.playAnimation(this.walkAnim,!0)},t.prototype.playAnimation=function(e,t){return void 0===t&&(t=!1),this.skeleton.setAnimation(0,e,t),this},t.prototype.addAnimation=function(e,t,o){return void 0===t&&(t=!1),void 0===o&&(o=0),this.skeleton.addAnimation(0,e,t,o),this},t.prototype.loadSkeletonData=function(e){var t=this,o=c.PetConfig.getPetConfigById(s.GameData.CurrentPet.petId);l.ResUtil.getSpineAnimPet(o,function(o,n){t.skeleton.skeletonData=n,t.playAnimation(t.defaultAnim,!0),e()})},t.prototype.updateSkinPet=function(){var e=this;if(s.GameData.CurrentPet){var t="Level"+s.GameData.CurrentPet.petLevel;this.loadSkeletonData(function(){e.changeSkin(t)})}},t.prototype.changeSkin=function(e){this.currentSkin=e,this.skeleton.setSkin(e),this.skeleton.setSlotsToSetupPose()},r([d(cc.String)],t.prototype,"defaultAnim",void 0),r([d(cc.String)],t.prototype,"idleAnim",void 0),r([d(cc.String)],t.prototype,"idleAnim2",void 0),r([d(cc.String)],t.prototype,"runAnim",void 0),r([d(cc.String)],t.prototype,"walkAnim",void 0),r([d(cc.String)],t.prototype,"walkAnim2",void 0),r([d(cc.String)],t.prototype,"loseAnim",void 0),r([d(cc.String)],t.prototype,"winAnim",void 0),r([d(sp.Skeleton)],t.prototype,"skeleton",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameData":"GameData","../ResUtil":"ResUtil","../config/GlobalSignals":"GlobalSignals","../config/PetConfig":"PetConfig"}],PhysicalEnable:[function(e,t,o){"use strict";cc._RF.push(t,"94d19YTaWdLz4svqLG607zG","PhysicalEnable");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gravityScale=1,t.isDebugPhysics=!1,t.isDebugCollider=!1,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){this.physicsManager=cc.director.getPhysicsManager(),this.collisionManager=cc.director.getCollisionManager()},t.prototype.onEnable=function(){this.setPhysicsEnabled(!0)},t.prototype.onDisable=function(){this.setPhysicsEnabled(!1)},t.prototype.update=function(e){var t=60*e*this.gravityScale;o.REAL_GRAVITY_SCALE=t,this.physicsManager.gravity=cc.v2(0,-320*t)},t.prototype.setPhysicsEnabled=function(e){this.physicsManager.enabled=e,this.collisionManager.enabled=e,this.isDebugCollider&&(this.collisionManager.enabledDebugDraw=!0),this.isDebugPhysics&&(this.physicsManager.debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit)},t.REAL_GRAVITY_SCALE=1,r([s(cc.Float)],t.prototype,"gravityScale",void 0),r([s(cc.Boolean)],t.prototype,"isDebugPhysics",void 0),r([s(cc.Boolean)],t.prototype,"isDebugCollider",void 0),o=r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],PhysicsConfig:[function(e,t,o){"use strict";cc._RF.push(t,"d7792BPXjZAyLPo/ZQk9Zwp","PhysicsConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.PhysicsConfig=void 0;var n=function(){function e(){}return e.initPhysicConfig=function(t,o){var n=t.getComponent(cc.PhysicsCollider),i=t.getComponent(cc.RigidBody);if(n&&i){var r=e.physicsObjects[o];r&&(i.gravityScale=r.gravity_scale,n.density=r.density)}else cc.warn("can not init physics config: "+o)},e.physicsObjects={character:{gravity_scale:5,density:10},gems:{gravity_scale:4,density:1},lava:{gravity_scale:4,density:1},water:{gravity_scale:4,density:1},snow:{gravity_scale:4,density:1},rock:{gravity_scale:5,density:50},big_stone:{gravity_scale:5,density:50},chest:{gravity_scale:5,density:50},item:{gravity_scale:5,density:50},bomb:{gravity_scale:5,density:20},boom_timer:{gravity_scale:4,density:5}},e}();o.PhysicsConfig=n,cc._RF.pop()},{}],PlayScreen:[function(e,t,o){"use strict";cc._RF.push(t,"a0e02WPlzNK3ZJLXO8+C7qU","PlayScreen");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./config/QuestType"),c=e("./level/MapLevel"),s=e("./config/GlobalSignals"),l=e("./GameData"),u=e("./MainScene"),p=e("./config/AudioPlayId"),d=e("./ResUtil"),f=e("./level/WinPanel"),h=e("./objects/character/Boss/Boss"),y=e("./ui/IconQuest"),g=e("./HomeScreen"),_=e("./plugins/fb/FBInstantGames"),v=e("./plugins/tracking/GameTracking"),m=e("./ui/ToastReward"),b=e("./base/LocalStorageManager"),C=e("./base/audio/AudioManager"),P=e("./config/GameState"),S=e("./base/glance_Global"),k=e("./SetLanguage"),O=cc._decorator,A=O.ccclass,R=O.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelQuest=null,t.iconQuest=null,t.iconConfig=[],t.levelRoot=null,t.winPanel=null,t.toastReward=null,t.levelPlay=-1,t.countPlayWin=0,t.isContinue=!1,t.backgroundMusic=null,t}var o;return i(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._instance=this,this.isContinue=!1,this.toastReward.node.active=!1},t.prototype.onEnable=function(){this.isContinue?cc.log("PlayScreen isContinue"):(this._questFailSignal=this.onQuestFail.bind(this),this._questPassSignal=this.onQuestPass.bind(this),this._girlGiveEgg=this.onGirlGiveEgg.bind(this),s.GlobalSignals.questFailSignal.add(this._questFailSignal),s.GlobalSignals.questPassSignal.add(this._questPassSignal),s.GlobalSignals.girlGiveEggSignal.add(this._girlGiveEgg),0===this.levelRoot.childrenCount&&this.loadCurrentLevel(),this.backgroundMusic||(this.backgroundMusic=u.default.instance.audioPlayer.playAudio(p.AudioPlayId.game_play_music,!0)))},t.prototype.onDisable=function(){u.default.instance.audioPlayer.stopAllEffect(),this.isContinue||(s.GlobalSignals.questFailSignal.remove(this._questFailSignal),s.GlobalSignals.questPassSignal.remove(this._questPassSignal),s.GlobalSignals.girlGiveEggSignal.remove(this._girlGiveEgg),this.levelRoot.childrenCount>0&&this.levelRoot.removeAllChildren(),this.unscheduleAllCallbacks(),this.backgroundMusic&&(u.default.instance.audioPlayer.stopAudioPlay(this.backgroundMusic),this.backgroundMusic=null))},t.prototype.onQuestFail=function(){var e=this,t=h.default.instance.isGround?0:.6;this.scheduleOnce(function(){e.winPanel.showLose(),v.GameTracking.logEventPlayLevel(e.levelPlay,!1),u.default.instance.audioPlayer.playAudio(p.AudioPlayId.game_lose)},.8+t)},t.prototype.onQuestPass=function(){var e=this;if(c.default.instance.isQuestCollectItem)this.scheduleOnce(function(){e.isContinue=!0,e.countPlayWin++,v.GameTracking.logEventPlayLevel(e.levelPlay,!0),l.GameData.saveLevelUp();var t=c.default.instance.itemLoot.itemConfig;cc.log("onQuestPass: "+t.skin),u.default.instance.showHomeScreen(function(o){o.getComponent(g.default).initOpenItem(t,function(){u.default.instance.showGamePlayScreen(function(){e.isContinue=!1,e.winPanel.showWin()})})})},.8);else{this.isContinue=!1;var t=h.default.instance.isGround?0:.6;this.scheduleOnce(function(){e.countPlayWin++,e.winPanel.showWin(),l.GameData.saveLevelUp(),v.GameTracking.logEventPlayLevel(e.levelPlay,!0),_.FBInstantGames.subscribeMessengerBot()},.8+t)}},t.prototype.onGirlGiveEgg=function(e){l.GameData.addEggNumber(e,function(){})},t.prototype.loadCurrentLevel=function(){this.unscheduleAllCallbacks(),u.default.instance.audioPlayer.stopAllEffect(),this.loadLevel(l.GameData.currentLevelId),d.ResUtil.releaseLevelById(l.GameData.currentLevelId-1),l.GameData.currentLevelId<l.GameData.levelSize&&d.ResUtil.loadLevelById(l.GameData.currentLevelId+1)},t.prototype.loadLevel=function(e){var t=this;console.log("loadLevel: "+e),this.levelRoot.childrenCount>0&&u.default.instance.screenManager.showFlash(1),this.clearLevelRoot(),this.winPanel.hide(),u.default.instance.testPrefab?this.addLevelToRoot(u.default.instance.testPrefab):d.ResUtil.loadLevelById(e,function(e){t.addLevelToRoot(e)}),1!==this.countPlayWin||l.GameData.isCreatShortcut||_.FBInstantGames.createShortcut(function(){v.GameTracking.logEventCreateShortCut(l.GameData.currentLevelId),l.GameData.isCreatShortcut=!0})},t.prototype.addLevelToRoot=function(e){var t=cc.instantiate(e);this.levelRoot.addChild(t),this.levelPlay=parseInt(e.name.match(/\d+/)[0]);var o=t.getComponent(c.default);this.updateLevelInfo(l.GameData.currentLevelId,o.questType)},t.prototype.clearLevelRoot=function(){if(console.log(this.levelRoot.children),this.levelRoot.childrenCount>0)try{this.levelRoot.removeAllChildren()}catch(e){}},t.prototype.gotoHomeScreen=function(){u.default.instance.showHomeScreen(function(e){e.getComponent(g.default).activeHomeUI(),S.default.instance.sendEventGameEnd(l.GameData.currentLevelId+1),c.default.instance.gameState==P.GameState.PLAYING||(c.default.instance.gameState,P.GameState.WIN)})},t.prototype.replayGame=function(){this.loadCurrentLevel(),u.default.instance.screenManager.showFlash(1),S.default.instance.sendEventReplay(l.GameData.currentLevelId+1),S.default.instance.sendEventLevel(l.GameData.currentLevelId+1)},t.prototype.nextLevel=function(e,t){void 0===t&&(t=!1),s.GlobalSignals.nextLevelSignal.dispatch(),this.loadCurrentLevel();var o=JSON.parse(b.LocalStorageManager.getItem("3levels"));o?o<2?(o++,b.LocalStorageManager.setItem("3levels",JSON.stringify(o))):t||(b.LocalStorageManager.setItem("3levels",JSON.stringify(1)),S.default.instance.effectSoundState=C.default.EffectEnable,S.default.instance.musicSoundState=C.default.MusicEnable,S.default.instance.replayEvent()):b.LocalStorageManager.setItem("3levels",JSON.stringify(1)),S.default.instance.sendEventLevel(l.GameData.currentLevelId+1)},t.prototype.updateLevelInfo=function(e,t){var o=a.QuestUtil.getQuestName(t),n=e+1,i=n<10?"0"+n:""+n;this.labelQuest.string="<color=#FFBC01>"+k.ChangeLanguage.getText("level")+i+" </color> "+o;var r=this.getIconRequest(t);this.iconQuest.spriteFrame=r},t.prototype.getIconRequest=function(e){for(var t=0;t<this.iconConfig.length;t++){var o=this.iconConfig[t];if(e==o.questType)return o.icon}return null},t.prototype.showToastReward=function(e,t,o){var n=this;void 0===o&&(o=0),this.scheduleOnce(function(){n.toastReward.show(e,t)},o)},t.prototype.onClickEvent=function(){u.default.instance.showEventPopup()},t._instance=null,r([R(cc.RichText)],t.prototype,"labelQuest",void 0),r([R(cc.Sprite)],t.prototype,"iconQuest",void 0),r([R([y.IconQuest])],t.prototype,"iconConfig",void 0),r([R(cc.Node)],t.prototype,"levelRoot",void 0),r([R(f.default)],t.prototype,"winPanel",void 0),r([R(m.default)],t.prototype,"toastReward",void 0),o=r([A],t)}(cc.Component);o.default=I,cc._RF.pop()},{"./GameData":"GameData","./HomeScreen":"HomeScreen","./MainScene":"MainScene","./ResUtil":"ResUtil","./SetLanguage":"SetLanguage","./base/LocalStorageManager":"LocalStorageManager","./base/audio/AudioManager":"AudioManager","./base/glance_Global":"glance_Global","./config/AudioPlayId":"AudioPlayId","./config/GameState":"GameState","./config/GlobalSignals":"GlobalSignals","./config/QuestType":"QuestType","./level/MapLevel":"MapLevel","./level/WinPanel":"WinPanel","./objects/character/Boss/Boss":"Boss","./plugins/fb/FBInstantGames":"FBInstantGames","./plugins/tracking/GameTracking":"GameTracking","./ui/IconQuest":"IconQuest","./ui/ToastReward":"ToastReward"}],PlayerCoinUpdater:[function(e,t,o){"use strict";cc._RF.push(t,"5d36ebViqhIBLi21qfwydPG","PlayerCoinUpdater");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/GlobalSignals"),c=e("../GameData"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.coinLabel=null,t}return i(t,e),t.prototype.onEnable=function(){this._onUpdateCoin=this.onUpdateCoin.bind(this),a.GlobalSignals.coinUpdateSignal.add(this._onUpdateCoin),this.onUpdateCoin()},t.prototype.onDisable=function(){a.GlobalSignals.coinUpdateSignal.remove(this._onUpdateCoin)},t.prototype.onUpdateCoin=function(){this.coinLabel&&(this.coinLabel.string=c.GameData.playerCoin+"")},r([u(cc.Label)],t.prototype,"coinLabel",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../GameData":"GameData","../config/GlobalSignals":"GlobalSignals"}],PopupDisplay:[function(e,t,o){"use strict";cc._RF.push(t,"c2275xqQlJDeJ0UQZf4qoVl","PopupDisplay");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./utils/GUIUtil"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetAction=null,t.enabledAnim=!1,t.time_show=.2,t.time_hide=.2,t.init_fog=!0,t.opacity_fog=150,t.touchFogToHide=!1,t.btn_close=null,t.exitCallback=null,t.fog=null,t.graphics=null,t.fadeInCallback=null,t}return i(t,e),t.prototype.onLoad=function(){if(this.targetAction||(this.targetAction=this.node),null!==this.btn_close&&a.default.addClickListener(this.btn_close,this.node,"PopupDisplay","onClickExit"),this.init_fog){this.fog=new cc.Node,this.fog.width=cc.visibleRect.width,this.fog.height=cc.visibleRect.height,this.node.addChild(this.fog,-1),this.fog.addComponent(cc.BlockInputEvents);var e=this.fog.addComponent(cc.Graphics);e.lineWidth=0,e.fillColor=new cc.Color(0,0,0,this.opacity_fog);var t=cc.visibleRect.width,o=cc.visibleRect.height;if(e.fillRect(-t/2,-o/2,t,o),this.graphics=e,this.touchFogToHide){var n=this.fog.addComponent(cc.Button);a.default.addClickListener(n,this.node,"PopupDisplay","onClickExit")}}},t.prototype.onClickExit=function(){this.hide(),this.exitCallback&&this.exitCallback()},t.prototype.setExitCallback=function(e){this.exitCallback=e},t.prototype.activePopup=function(){this.node.active=!0},t.prototype.onEnable=function(){this.show()},t.prototype.show=function(){var e=this;this.enabledAnim&&(this.targetAction.stopAllActions(),this.targetAction.opacity=0,this.targetAction.scale=.4,this.targetAction.runAction(cc.sequence(cc.show(),cc.spawn(cc.fadeIn(this.time_show),cc.scaleTo(this.time_show,1).easing(cc.easeBackInOut()),cc.sequence(cc.delayTime(.75*this.time_show),cc.callFunc(function(){e.fadeInFog()}))))))},t.prototype.fadeInFog=function(){var e=this;if(this.fog){this.fog.active=!0,this.fadeInCallback&&this.unschedule(this.fadeInCallback);var t=0,o=this.time_show/this.opacity_fog;this.fadeInCallback=function(){t++,e.graphics.fillColor=new cc.Color(0,0,0,t),t===e.opacity_fog&&(e.unschedule(e.fadeInCallback),e.fadeInCallback=null)},this.schedule(function(){e.fadeInCallback&&e.fadeInCallback()},o)}},t.prototype.hide=function(){var e=this;this.enabledAnim?this.node.active&&(this.fog&&(this.fog.active=!1),this.fadeInCallback&&this.unschedule(this.fadeInCallback),this.targetAction.stopAllActions(),this.targetAction.runAction(cc.sequence(cc.spawn(cc.fadeOut(this.time_hide),cc.scaleTo(this.time_hide,.4)),cc.hide(),cc.callFunc(function(){e.node.active=!1})))):this.node.active=!1},r([l(cc.Node)],t.prototype,"targetAction",void 0),r([l(cc.Boolean)],t.prototype,"enabledAnim",void 0),r([l(cc.Float)],t.prototype,"time_show",void 0),r([l(cc.Float)],t.prototype,"time_hide",void 0),r([l(cc.Boolean)],t.prototype,"init_fog",void 0),r([l({type:cc.Integer,visible:function(){return this.init_fog}})],t.prototype,"opacity_fog",void 0),r([l({visible:function(){return this.init_fog}})],t.prototype,"touchFogToHide",void 0),r([l(cc.Node)],t.prototype,"btn_close",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./utils/GUIUtil":"GUIUtil"}],Pow:[function(e,t,o){"use strict";cc._RF.push(t,"e73c2IXmkNC656TWxmeUo8o","Pow");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../character/ColliderSearch"),c=e("../../level/MapLevel"),s=e("../../config/GroupConfig"),l=e("../../MainScene"),u=e("../../config/AudioPlayId"),p=e("../../base/ColliderCallback"),d=cc._decorator,f=d.ccclass,h=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.hit=null,t.attackAnim="Animation",t.searchCollider=null,t}return i(t,e),t.prototype.onLoad=function(){this.hit.addComponent(p.default).setColliderCallback(this.onHitColliderCallback.bind(this)),this.searchCollider.setColliderCallback(this.onSearchCollider.bind(this)),this.searchCollider.node.active=!0},t.prototype.onHitColliderCallback=function(e){var t=this;e.node.group!==s.GroupConfig.CHARACTER&&e.node.group!==s.GroupConfig.BERRIE||(this.hit.opacity=0,this.scheduleOnce(function(){cc.Tween.stopAllByTarget(t.hit),t.hit.active=!1},.2))},t.prototype.onSearchCollider=function(e){cc.log("Pow onSearchCollider: "+e.node.name),this.hit.active&&c.default.instance.isPlaying&&(e.node.group!==s.GroupConfig.CHARACTER||this.playAttack(e))},t.prototype.playAttack=function(e){var t=this;this.skeleton.setAnimation(0,this.attackAnim,!1),l.default.instance.audioPlayer.playAudio(u.AudioPlayId.shoot);var o=this.hit.getParent().convertToNodeSpaceAR(e.node.getParent().convertToWorldSpaceAR(e.node.position));o.y-=800,o.x=this.hit.x,cc.Tween.stopAllByTarget(this.hit),cc.tween(this.hit).to(1.5,{position:o}).call(function(){t.hit.active=!1}).start()},r([h(sp.Skeleton)],t.prototype,"skeleton",void 0),r([h(cc.Node)],t.prototype,"hit",void 0),r([h(cc.String)],t.prototype,"attackAnim",void 0),r([h(a.default)],t.prototype,"searchCollider",void 0),r([f],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../MainScene":"MainScene","../../base/ColliderCallback":"ColliderCallback","../../config/AudioPlayId":"AudioPlayId","../../config/GroupConfig":"GroupConfig","../../level/MapLevel":"MapLevel","../character/ColliderSearch":"ColliderSearch"}],PrefabManager:[function(e,t,o){"use strict";cc._RF.push(t,"85978p0g2ZPOYT/H1Zjl3Yw","PrefabManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.MyPrefabData=void 0;var a=e("./PrefabType"),c=e("./ResUtil"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(){function e(){this.type=a.PrefabType.NONE,this.prefab=null,this.prefabRes=""}return r([u({type:cc.Enum(a.PrefabType)})],e.prototype,"type",void 0),r([u(cc.Prefab)],e.prototype,"prefab",void 0),r([u(cc.String)],e.prototype,"prefabRes",void 0),r([l("MyPrefabData")],e)}();o.MyPrefabData=p;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabsData=[],t}var o;return i(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._instance=this},t.prototype.getPrefabDataByType=function(e){for(var t=0;t<this.prefabsData.length;t++)if(this.prefabsData[t].type===e)return this.prefabsData[t];return null},t.prototype.loadPrefabByType=function(e,t){var o=this.getPrefabDataByType(e);if(o){if(null!=o.prefab)return void t(o.prefab);if(""!=o.prefabRes)return void c.ResUtil.loadPopupByDir(o.prefabRes,t,function(){t(null)})}t(null)},t._instance=null,r([u([p])],t.prototype,"prefabsData",void 0),o=r([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./PrefabType":"PrefabType","./ResUtil":"ResUtil"}],PrefabType:[function(e,t,o){"use strict";cc._RF.push(t,"fffa47OQmNK6LfRIx5Dgzua","PrefabType"),Object.defineProperty(o,"__esModule",{value:!0}),o.PrefabType=void 0,function(e){e[e.NONE=0]="NONE",e[e.SETTING=1]="SETTING",e[e.SELECT_ROOM=2]="SELECT_ROOM",e[e.SELECT_KINGDOM=3]="SELECT_KINGDOM",e[e.BUILD_KINGDOM=4]="BUILD_KINGDOM",e[e.SKIN_POPUP=5]="SKIN_POPUP",e[e.EVENT_POPUP=6]="EVENT_POPUP",e[e.RANK_POPUP=7]="RANK_POPUP",e[e.CHOOSECOUNTRY_POPUP=8]="CHOOSECOUNTRY_POPUP",e[e.DAILY_POPUP=9]="DAILY_POPUP",e[e.PET_POPUP=10]="PET_POPUP"}(o.PrefabType||(o.PrefabType={})),cc._RF.pop()},{}],QuestType:[function(e,t,o){"use strict";cc._RF.push(t,"5d3b69LiD5BJIg8NTr//0Wl","QuestType"),Object.defineProperty(o,"__esModule",{value:!0}),o.QuestUtil=o.QuestType=void 0;var n,i=e("../SetLanguage");(function(e){e[e.COLLECT_GEMS=0]="COLLECT_GEMS",e[e.COLLECT_ITEM=1]="COLLECT_ITEM",e[e.KILL_ENEMY=2]="KILL_ENEMY",e[e.SAVE_HOSTAGE=3]="SAVE_HOSTAGE",e[e.OPEN_CHEST=4]="OPEN_CHEST",e[e.ALL=5]="ALL"})(n=o.QuestType||(o.QuestType={}));var r=function(){function e(){}return e.getQuestName=function(e){switch(e){case n.COLLECT_GEMS:return i.ChangeLanguage.getText("collect_the_gold");case n.COLLECT_ITEM:return i.ChangeLanguage.getText("collect_the_item");case n.KILL_ENEMY:return i.ChangeLanguage.getText("take_down_enemies");case n.SAVE_HOSTAGE:return i.ChangeLanguage.getText("save_your_princess");case n.OPEN_CHEST:return i.ChangeLanguage.getText("open_money_chest")}return i.ChangeLanguage.getText("do_nothing")},e}();o.QuestUtil=r,cc._RF.pop()},{"../SetLanguage":"SetLanguage"}],RankPopup:[function(e,t,o){"use strict";cc._RF.push(t,"ff8fe/7hjdMxbbfWA+j6zuP","RankPopup");var n,i,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.RankConfig=void 0,o.RankConfig={LB_COUNT_IN_PAGE:10,LB_COUNT_PLAYER:100},function(e){e[e.COUNTRY=0]="COUNTRY",e[e.WORLD=1]="WORLD"}(i||(i={}));var c=e("../base/utils/StringUtil"),s=e("../UserPlayFab"),l=e("./ItemRankPopup"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.itemRank=null,t.lbMyName=null,t.lbMyRank=null,t.lbPage=null,t.toggleWorld=null,t.toggleCountry=null,t.btnLeft=null,t.btnRight=null,t.lbStatValue=null,t._currentTap=i.WORLD,t._currentPage=0,t._currentPageWorld=0,t._currentPageCountry=0,t.startPos=0,t.endPos=0,t.ListEntryLeadBoard=[],t.ListEntryLeadBoardCountry=[],t.CurrentListEntryLeadBoard=[],t.isUpdateUiW=!0,t.isUpdateUiC=!1,t}return r(t,e),t.prototype.onLoad=function(){this._CallbackGetNextDataLeaderBoard=this.CallbackGetNextDataLeaderBoard.bind(this),this._CallbackGetNextDataLeaderBoardCountry=this.CallbackGetNextDataLeaderBoardCountry.bind(this),this._CallbackDataMyRank=this.callBackDataMyRank.bind(this)},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){this.ListEntryLeadBoard=[],this.ListEntryLeadBoardCountry=[]},t.prototype.Show=function(e){switch(this.node.active=!0,this.cfg=e,this.lbStatValue.string=e.StatValue,e.type){case"normal":this.toggleWorld.node.active=!0,this.toggleCountry.node.active=!0,this.isUpdateUiW=!0,this.isUpdateUiC=!1,this.toggleWorld.isChecked=!0,this._currentTap=i.WORLD,this._currentPage=0,this.CurrentListEntryLeadBoard=this.ListEntryLeadBoard,this.getLeaderBoard(s.StatisticNameConfig.BEST_LEVEL),this.getMyRankInLeaderboard(s.StatisticNameConfig.BEST_LEVEL);var t=c.StringUtil.getCodeLeaderBoardCountry(s.default.DisplayName,s.StatisticNameConfig.BEST_LEVEL);this.getLeaderBoardCountry(t);break;case"event":this._currentPage=0,this.toggleWorld.node.active=!1,this.toggleCountry.node.active=!1,this.getLeaderBoard(e.StatisticName),this.getMyRankInLeaderboard(e.StatisticName)}},t.prototype.Hide=function(){this.node.active=!1},t.prototype.getLeaderBoard=function(e){var t=o.RankConfig.LB_COUNT_IN_PAGE*this._currentPage;s.default.getRankLeadBoard(e,t,o.RankConfig.LB_COUNT_PLAYER,this._CallbackGetNextDataLeaderBoard)},t.prototype.CallbackGetNextDataLeaderBoard=function(e,t){if(!t){var n=e.data.Leaderboard;n&&(this.ListEntryLeadBoard=this.ListEntryLeadBoard.concat(n));var i=o.RankConfig.LB_COUNT_IN_PAGE*this._currentPage;this.isUpdateUiW&&this.UpdateListBoard(this.ListEntryLeadBoard,i,i+o.RankConfig.LB_COUNT_IN_PAGE)}},t.prototype.CallbackGetNextDataLeaderBoardCountry=function(e){var t=e.data.Leaderboard;t&&(this.ListEntryLeadBoardCountry=this.ListEntryLeadBoardCountry.concat(t));var n=o.RankConfig.LB_COUNT_IN_PAGE*this._currentPage;this.isUpdateUiC&&this.UpdateListBoard(this.ListEntryLeadBoardCountry,n,n+o.RankConfig.LB_COUNT_IN_PAGE)},t.prototype.onClickClose=function(){this.Hide()},t.prototype.onClickLeft=function(){this._currentPage--,this._currentPage<=0&&(this._currentPage=0),o.RankConfig.LB_COUNT_IN_PAGE,this._currentPage,this.updateUi()},t.prototype.onClickRight=function(){if(this._currentPage++,"normal"==this.cfg.type)if(this._currentTap==i.WORLD){this._currentPage*o.RankConfig.LB_COUNT_IN_PAGE>=this.ListEntryLeadBoard.length&&this.ListEntryLeadBoard.length>0&&this.getLeaderBoard(s.StatisticNameConfig.BEST_LEVEL);var e=o.RankConfig.LB_COUNT_IN_PAGE*this._currentPage;this.UpdateListBoard(this.ListEntryLeadBoard,e,e+o.RankConfig.LB_COUNT_IN_PAGE)}else{if(this._currentPage*o.RankConfig.LB_COUNT_IN_PAGE>=this.ListEntryLeadBoardCountry.length&&this.ListEntryLeadBoardCountry.length>0){var t=c.StringUtil.getCodeLeaderBoardCountry(s.default.DisplayName,s.StatisticNameConfig.BEST_LEVEL);this.getLeaderBoardCountry(t)}e=o.RankConfig.LB_COUNT_IN_PAGE*this._currentPage,this.UpdateListBoard(this.ListEntryLeadBoardCountry,e,e+o.RankConfig.LB_COUNT_IN_PAGE)}else this._currentPage*o.RankConfig.LB_COUNT_IN_PAGE>=this.ListEntryLeadBoard.length&&this.ListEntryLeadBoard.length>0&&this.getLeaderBoard(this.cfg.StatisticName),e=o.RankConfig.LB_COUNT_IN_PAGE*this._currentPage,this.UpdateListBoard(this.ListEntryLeadBoard,e,e+o.RankConfig.LB_COUNT_IN_PAGE)},t.prototype.updateUi=function(){if("normal"==this.cfg.type)if(this._currentTap==i.WORLD){this._currentPage*o.RankConfig.LB_COUNT_IN_PAGE>=this.ListEntryLeadBoard.length&&this.ListEntryLeadBoard.length>0&&this.getLeaderBoard(s.StatisticNameConfig.BEST_LEVEL);var e=o.RankConfig.LB_COUNT_IN_PAGE*this._currentPage;this.UpdateListBoard(this.ListEntryLeadBoard,e,e+o.RankConfig.LB_COUNT_IN_PAGE)}else{if(this._currentPage*o.RankConfig.LB_COUNT_IN_PAGE>=this.ListEntryLeadBoardCountry.length&&this.ListEntryLeadBoardCountry.length>0){var t=c.StringUtil.getCodeLeaderBoardCountry(s.default.DisplayName,s.StatisticNameConfig.BEST_LEVEL);this.getLeaderBoardCountry(t)}e=o.RankConfig.LB_COUNT_IN_PAGE*this._currentPage,this.UpdateListBoard(this.ListEntryLeadBoardCountry,e,e+o.RankConfig.LB_COUNT_IN_PAGE)}else this._currentPage*o.RankConfig.LB_COUNT_IN_PAGE>=this.ListEntryLeadBoardCountry.length&&this.ListEntryLeadBoardCountry.length>0&&this.getLeaderBoard(this.cfg.StatisticName),e=o.RankConfig.LB_COUNT_IN_PAGE*this._currentPage,this.UpdateListBoard(this.ListEntryLeadBoard,e,e+o.RankConfig.LB_COUNT_IN_PAGE)},t.prototype.UpdateListBoard=function(e,t,o){e=e.slice(t,o);for(var n=0;n<o&&n<e.length;n++){var i=e[n];(s=this.content.children[n])||(s=cc.instantiate(this.itemRank),this.content.addChild(s)),s.active=!0;var r=s.getComponent(l.default),a=c.StringUtil.splitCountry(i.DisplayName);r.InitInfo(a.name,i.StatValue,i.Position,a.countryCodes)}for(;n<this.content.children.length;n++){var s;(s=this.content.children[n]).active=!1}this.updateBottomPage()},t.prototype.getMyRankInLeaderboard=function(e){s.default.getMyRankLeadBoard(e,this._CallbackDataMyRank)},t.prototype.getLeaderBoardCountry=function(e){var t=o.RankConfig.LB_COUNT_IN_PAGE*this._currentPage;s.default.getRankLeadBoard(e,t,o.RankConfig.LB_COUNT_PLAYER,this._CallbackGetNextDataLeaderBoardCountry)},t.prototype.callBackDataMyRank=function(e){for(var t=0;t<e.data.Leaderboard.length;t++){var o=e.data.Leaderboard[t];this.lbMyName.string=c.StringUtil.splitCountry(o.DisplayName).name,this.lbMyRank.string=o.Position+1+""}},t.prototype.onClickWorld=function(){this._currentTap!=i.WORLD&&(this._currentTap=i.WORLD,this.isUpdateUiC=!1,this.isUpdateUiW=!0,this.CurrentListEntryLeadBoard=this.ListEntryLeadBoard,this._currentPage=0,this.UpdateListBoard(this.ListEntryLeadBoard,0,10))},t.prototype.onClickCountry=function(){this._currentTap!=i.COUNTRY&&(this._currentTap=i.COUNTRY,this.isUpdateUiC=!0,this.isUpdateUiW=!1,this.CurrentListEntryLeadBoard=this.ListEntryLeadBoardCountry,this._currentPage=0,this.UpdateListBoard(this.ListEntryLeadBoardCountry,0,10))},t.prototype.RestBottomPage=function(){},t.prototype.updateBottomPage=function(){this._currentPage<=0?this.btnLeft.node.active=!1:this.btnLeft.node.active=!0,this.lbPage.string="Page "+(this._currentPage+1)},a([d(cc.Node)],t.prototype,"content",void 0),a([d(cc.Node)],t.prototype,"itemRank",void 0),a([d(cc.Label)],t.prototype,"lbMyName",void 0),a([d(cc.Label)],t.prototype,"lbMyRank",void 0),a([d(cc.Label)],t.prototype,"lbPage",void 0),a([d(cc.Toggle)],t.prototype,"toggleWorld",void 0),a([d(cc.Toggle)],t.prototype,"toggleCountry",void 0),a([d(cc.Button)],t.prototype,"btnLeft",void 0),a([d(cc.Button)],t.prototype,"btnRight",void 0),a([d(cc.Label)],t.prototype,"lbStatValue",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../UserPlayFab":"UserPlayFab","../base/utils/StringUtil":"StringUtil","./ItemRankPopup":"ItemRankPopup"}],RedirectBox:[function(e,t,o){"use strict";cc._RF.push(t,"058d0xuib9Irref/RDYDp4j","RedirectBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/TagObject"),c=cc._decorator.requireComponent,s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){var e=this.getComponent(cc.Sprite);e&&(e.enabled=!1)},r([l,c(cc.BoxCollider)],t)}(a.default));o.default=u,cc._RF.pop()},{"../config/TagObject":"TagObject"}],RenderMask:[function(e,t,o){"use strict";cc._RF.push(t,"a614br+C3hLLpr2mTVO2UTF","RenderMask");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.sprite=null,t}return i(t,e),t.prototype.onLoad=function(){this.renderTexture=new cc.RenderTexture,this.renderTexture.initWithSize(cc.winSize.width,cc.winSize.height),this.camera.targetTexture=this.renderTexture},t.prototype.start=function(){this.sprite.node.active=!0,this.sprite.spriteFrame=new cc.SpriteFrame(this.renderTexture);var e=cc.winSize;this.sprite.node.height=e.height,this.sprite.node.width=e.width},r([s(cc.Camera)],t.prototype,"camera",void 0),r([s(cc.Sprite)],t.prototype,"sprite",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ReplaceItem:[function(e,t,o){"use strict";cc._RF.push(t,"4ce22WmDM5HTKiCTY9oGBzE","ReplaceItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ReplaceItemType=void 0;var a,c=cc.easeBackOut,s=cc._decorator,l=s.ccclass,u=s.property;(function(e){e[e.NORMAL=0]="NORMAL",e[e.SLIDING_RIGHT=1]="SLIDING_RIGHT",e[e.SLIDING_TOP=2]="SLIDING_TOP"})(a=o.ReplaceItemType||(o.ReplaceItemType={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.replaceType=a.NORMAL,t.replaceBy=null,t}return i(t,e),t.prototype.replace=function(e){this.replaceType===a.NORMAL&&(this.node.active=!1,this.replaceBy.active=!0,this.replaceBy.scale=1,cc.tween(this.replaceBy).to(.2,{scale:.8}).to(.25,{scale:1},c()).delay(2).call(e).start())},r([u({type:cc.Enum(a)})],t.prototype,"replaceType",void 0),r([u(cc.Node)],t.prototype,"replaceBy",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],ResUtil:[function(e,t,o){"use strict";cc._RF.push(t,"9fb44pIzLhBGbM9vI6AHeWX","ResUtil");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],a=0,c=r.length;a<c;a++,i++)n[i]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.ResUtil=void 0;var i=e("./config/RoomConfig"),r=e("./config/LevelConfig"),a=e("./config/KingdomConfig"),c=e("./config/FeatureSkinConfig"),s=e("./GameData"),l=function(){function e(){}return e.loadPopupByDir=function(e,t,o){var n=this;void 0===t&&(t=null),void 0===o&&(o=null);var i=e.split("/").pop();this.mapPrefab.has(i)?t&&t(this.mapPrefab.get(i)):this.loadPrefab(e,function(e){n.mapPrefab.set(i,e),t&&t(e)},o)},e.loadKingdomByName=function(e,t,o){var n=this;void 0===t&&(t=null),void 0===o&&(o=null);var i=a.KingdomConfig.getKingdomCfg(e);if(!i)return cc.warn("loadKingdomByName name = "+e+", cfg is null!"),void(o&&o());if(this.mapPrefab.has(i.kingdom))t&&t(this.mapPrefab.get(i.kingdom));else{var r="prefabs/castle/"+i.name+"/"+i.kingdom;this.loadPrefab(r,function(e){n.mapPrefab.set(i.kingdom,e),t&&t(e)},o)}},e.loadKingdomBuilderByName=function(e,t,o){var n=this;void 0===t&&(t=null),void 0===o&&(o=null);var i=a.KingdomConfig.getKingdomCfg(e);if(!i)return cc.warn("loadKingdomBuilderByName name = "+e+", cfg is null!"),void(o&&o());if(this.mapPrefab.has(i.builder))t&&t(this.mapPrefab.get(i.builder));else{var r="prefabs/castle/"+i.name+"/"+i.builder;this.loadPrefab(r,function(e){n.mapPrefab.set(i.builder,e),t&&t(e)},o)}},e.loadRoomById=function(e,t,o){var n=this;if(void 0===t&&(t=null),void 0===o&&(o=null),e<0||e>=i.RoomConfig.rooms.length)return cc.warn("loadRoomById: "+e),void(o&&o());var r=i.RoomConfig.rooms[e].name;this.mapPrefab.has(r)?t&&t(this.mapPrefab.get(r)):this.loadRoomByName(r,function(e){n.mapPrefab.set(r,e),t&&t(e)},o)},e.releaseRoomById=function(e){if(!(e<0||e>=i.RoomConfig.rooms.length)){var t=i.RoomConfig.rooms[e].name;this.mapPrefab.has(t)&&(this.mapPrefab.delete(t),cc.log("release: "+t))}},e.loadLevelById=function(e,t,o){var n=this;void 0===t&&(t=null),void 0===o&&(o=null);var i=0;(e>r.LevelConfig.levels.length||!r.LevelConfig.levels[e])&&(i=Math.floor(Math.random()*this.cloneArray.length),e>s.GameData.levelSize||s.GameData.currentLevelReal!=s.GameData.levelSize?0==s.GameData.currentLevelReal?(s.GameData.setLevelReal(i),r.LevelConfig.levels[e]=this.cloneArray[s.GameData.currentLevelReal]):r.LevelConfig.levels[e]=this.cloneArray[s.GameData.currentLevelReal]:r.LevelConfig.levels[e]=this.cloneArray[i]);var a=r.LevelConfig.levels[e];this.mapPrefab.has(a)?t&&t(this.mapPrefab.get(a)):this.loadLevelByName(a,function(e){n.mapPrefab.set(a,e),t&&t(e)},o)},e.releaseLevelById=function(e){if(!(e<0||e>=r.LevelConfig.levels.length)){var t=r.LevelConfig.levels[e];this.mapPrefab.has(t)&&this.mapPrefab.delete(t)}},e.loadLevelByName=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n="prefabs/levels/"+e;this.loadPrefab(n,t,o)},e.loadRoomByName=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n="prefabs/rooms/"+e;this.loadPrefab(n,t,o)},e.loadScreenByName=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null);var n="prefabs/screens/"+e;this.loadPrefab(n,t,o)},e.loadPrefab=function(e,t,o){cc.resources.load(e,function(n,i){n?o&&o(n):t&&(cc.log("loadPrefab: "+e),t(i))})},e.loadRes=function(e,t,o){t?cc.loader.loadRes(e,t,function(e,t){if(e)return cc.error(e.message||e),void(o&&o(e,t));o&&o(e,t)}):cc.loader.load(e,function(e,t){if(e)return cc.error(e.message||e),void(o&&o(e,t));o&&o(e,t)})},e.getIconCountry=function(e,t){var o=this;if(""!=e&&e)if(this.iconCountry.has(e)){var n=this.iconCountry.get(e);t(null,n)}else this.loadRes("/sprites/CountryIcon/"+e,cc.SpriteFrame,function(n,i){i&&o.iconCountry.set(e,i),t(n,i)})},e.getSpineAnimFeature=function(e,t){var o=c.FeatureSkinConfig.getSkinConfigById(e).pathDir+"/DragonSmall";this.getSpineAnim(o,"DragonSmall",t)},e.getSpineAnim=function(e,t,o){var n=this;if(this.spineAnim.has(t)){var i=this.spineAnim.get(t);o(null,i)}else this.loadRes(e,sp.SkeletonData,function(e,i){i&&n.spineAnim.set(t,i),o(e,i)})},e.getSpineAnimPet=function(e,t){var o=e.pathDir;this.getSpineAnim(o,e.petId,t)},e.mapPrefab=new Map,e.iconCountry=new Map,e.spineAnim=new Map,e.cloneArray=n(r.LevelConfig.levels),e}();o.ResUtil=l,cc._RF.pop()},{"./GameData":"GameData","./config/FeatureSkinConfig":"FeatureSkinConfig","./config/KingdomConfig":"KingdomConfig","./config/LevelConfig":"LevelConfig","./config/RoomConfig":"RoomConfig"}],RockGO:[function(e,t,o){"use strict";cc._RF.push(t,"05a511vQ/dK6brRHisPIMnD","RockGO");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/PhysicsConfig"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){a.PhysicsConfig.initPhysicConfig(this.node,"rock")},r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../config/PhysicsConfig":"PhysicsConfig"}],RoomConfig:[function(e,t,o){"use strict";cc._RF.push(t,"a08e9OqjtxLA7vTG49W3C13","RoomConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.RoomConfig=void 0;var n=function(){function e(){}return e.getRoomIdByName=function(t){for(var o=e.rooms,n=0;n<o.length;n++)if(o[n].name===t)return n;return-1},e.rooms=[{name:"Room1",size:8},{name:"Room2",size:8},{name:"Room6",size:8}],e}();o.RoomConfig=n,cc._RF.pop()},{}],RopeFull:[function(e,t,o){"use strict";cc._RF.push(t,"6635aO0sr9Oyr3AEOv3cQ/f","RopeFull");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./RopePart"),c=e("../../config/AudioPlayId"),s=e("../../MainScene"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){var e=this;this.node.children.forEach(function(t){var o=t.getComponent(a.default);o&&o.setCutCallback(e.cutRopeInNode.bind(e))})},t.prototype.cutRopeInNode=function(e){cc.log("cutRopeInNode"),e.removeFromParent(),this.node.children.forEach(function(e){var t=e.getComponent(a.default);t&&(t.enabled=!1)}),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.rope_cut)},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([u],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../../MainScene":"MainScene","../../config/AudioPlayId":"AudioPlayId","./RopePart":"RopePart"}],RopePart:[function(e,t,o){"use strict";cc._RF.push(t,"d8140MIb8lO+6wUn4tOHlGX","RopePart");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cutCallback=null,t}return i(t,e),t.prototype.start=function(){if(!this.getComponent(cc.BoxCollider)){var e=this.getComponent(cc.PhysicsBoxCollider),t=this.addComponent(cc.BoxCollider);t.offset=e.offset,t.size=e.size}},t.prototype.setCutCallback=function(e){this.cutCallback=e},t.prototype.onCollisionEnter=function(e){e.node.group!==a.GroupConfig.TOUCH||this.cutCallback&&this.cutCallback(this.node)},r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../config/GroupConfig":"GroupConfig"}],RotateByRepeatAnimX2:[function(e,t,o){"use strict";cc._RF.push(t,"97cddXVcLlODqus7E1jO7Be","RotateByRepeatAnimX2");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator.menu,c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.repeatForever=!0,t.duration1=.2,t.rotate1=20,t.duration2=.2,t.rotate2=-20,t.autoPlay=!0,t.rotateStart=0,t}return i(t,e),t.prototype.onLoad=function(){this.rotateStart=this.node.angle},t.prototype.play=function(e){var t=cc.sequence(cc.rotateTo(this.duration1,this.rotateStart+this.rotate1),cc.rotateTo(this.duration2,this.rotateStart+this.rotate2));this.repeatForever&&(t=t.repeatForever()),e.stopAllActions(),e.active||(e.active=!0),e.runAction(t)},t.prototype.onEnable=function(){this.autoPlay&&this.play(this.node)},r([l(cc.Boolean)],t.prototype,"repeatForever",void 0),r([l(cc.Float)],t.prototype,"duration1",void 0),r([l(cc.Float)],t.prototype,"rotate1",void 0),r([l(cc.Float)],t.prototype,"duration2",void 0),r([l(cc.Float)],t.prototype,"rotate2",void 0),r([l(cc.Boolean)],t.prototype,"autoPlay",void 0),r([s,a("Add Anim/RotateByRepeatAnimX2")],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],RotateByRepeatAnim:[function(e,t,o){"use strict";cc._RF.push(t,"74217uxCGJHJKu4GavSlA32","RotateByRepeatAnim");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator.menu,c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.repeatForever=!0,t.duration1=1,t.rotate1=360,t.autoPlay=!0,t}return i(t,e),t.prototype.play=function(e){var t=cc.rotateBy(this.duration1,this.rotate1);this.repeatForever&&(t=t.repeatForever()),e.stopAllActions(),e.active||(e.active=!0),e.runAction(t)},t.prototype.onEnable=function(){this.autoPlay&&this.play(this.node)},t.prototype.onDisable=function(){this.node.stopAllActions()},r([l(cc.Boolean)],t.prototype,"repeatForever",void 0),r([l(cc.Float)],t.prototype,"duration1",void 0),r([l(cc.Float)],t.prototype,"rotate1",void 0),r([l(cc.Boolean)],t.prototype,"autoPlay",void 0),r([s,a("Add Anim/RotateByRepeatAnim")],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],SHA256:[function(e,t,o){"use strict";cc._RF.push(t,"c963eSzGL5MMZp9Q7JgMatl","SHA256");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.SHA256=void 0;var r=e("../lib/Hasher"),a=e("../lib/WordArray"),c=[],s=[],l=[],u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this._hash=new a.WordArray(c.slice(0))},t.prototype._doProcessBlock=function(e,t){for(var o=this._hash.words,n=o[0],i=o[1],r=o[2],a=o[3],c=o[4],u=o[5],p=o[6],d=o[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var h=l[f-15],y=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=l[f-2],_=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[f]=y+l[f-7]+_+l[f-16]}var v=n&i^n&r^i&r,m=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&p)+s[f]+l[f];d=p,p=u,u=c,c=a+b|0,a=r,r=i,i=n,n=b+(m+v)|0}o[0]=o[0]+n|0,o[1]=o[1]+i|0,o[2]=o[2]+r|0,o[3]=o[3]+a|0,o[4]=o[4]+c|0,o[5]=o[5]+u|0,o[6]=o[6]+p|0,o[7]=o[7]+d|0},t.prototype._doFinalize=function(){var e=8*this._nDataBytes,t=8*this._data.sigBytes;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[14+(t+64>>>9<<4)]=Math.floor(e/4294967296),this._data.words[15+(t+64>>>9<<4)]=e,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash},t}(r.Hasher);o.SHA256=u,cc._RF.pop()},{"../lib/Hasher":"Hasher","../lib/WordArray":"WordArray"}],ScaleRepeatAnim:[function(e,t,o){"use strict";cc._RF.push(t,"6217devR7JH3ad1/GjLdKfy","ScaleRepeatAnim");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.repeatForever=!0,t.duration1=.2,t.scale1=1.2,t.duration2=.2,t.scale2=1,t}return i(t,e),t.prototype.play=function(e){var t=cc.sequence(cc.scaleTo(this.duration1,this.scale1),cc.scaleTo(this.duration2,this.scale2));this.repeatForever&&(t=t.repeatForever()),e.stopAllActions(),e.active||(e.active=!0),e.runAction(t)},t.prototype.onEnable=function(){this.play(this.node)},r([s(cc.Boolean)],t.prototype,"repeatForever",void 0),r([s(cc.Float)],t.prototype,"duration1",void 0),r([s(cc.Float)],t.prototype,"scale1",void 0),r([s(cc.Float)],t.prototype,"duration2",void 0),r([s(cc.Float)],t.prototype,"scale2",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ScreenManager:[function(e,t,o){"use strict";cc._RF.push(t,"901c3FK5gZOZ6/0KHHjo2D4","ScreenManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenConfig=o.ScreenId=void 0;var a,c=cc._decorator,s=c.ccclass,l=c.property;(function(e){e[e.NONE=0]="NONE",e[e.HOME_SCREEN=1]="HOME_SCREEN",e[e.PLAY_SCREEN=2]="PLAY_SCREEN",e[e.CASTLE_SCREEN=3]="CASTLE_SCREEN",e[e.LOADING_SCREEN=4]="LOADING_SCREEN"})(a=o.ScreenId||(o.ScreenId={}));var u=function(){function e(){this.screenId=a.HOME_SCREEN,this.screen=null}return r([l({type:cc.Enum(a)})],e.prototype,"screenId",void 0),r([l(cc.Node)],e.prototype,"screen",void 0),r([s("ScreenConfig")],e)}();o.ScreenConfig=u;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flash=null,t.arrayConfig=[],t}return i(t,e),t.prototype.showScreenById=function(e,t,o){var n=this;if(void 0===o&&(o=!1),cc.log("showScreenById: "+e),o){var i=this.activeScreenById(e);t&&t(i)}else this.showFlash(1,function(){var o=n.activeScreenById(e);t&&t(o)})},t.prototype.activeScreenById=function(e){for(var t=null,o=0;o<this.arrayConfig.length;o++)this.arrayConfig[o].screenId===e?(this.arrayConfig[o].screen.active=!0,t=this.arrayConfig[o].screen):this.arrayConfig[o].screen.active=!1;return t},t.prototype.getScreenById=function(e){for(var t=0;t<this.arrayConfig.length;t++)if(this.arrayConfig[t].screenId===e)return this.arrayConfig[t].screen;return null},t.prototype.showFlash=function(e,t){var o=this;void 0===t&&(t=null),this.flash.opacity=0,this.flash.active=!0,cc.Tween.stopAllByTarget(this.flash),cc.tween(this.flash).to(e/2,{opacity:255}).call(function(){t&&t()}).to(e/2,{opacity:0}).call(function(){o.flash.active=!1}).start()},r([l(cc.Node)],t.prototype,"flash",void 0),r([l([u])],t.prototype,"arrayConfig",void 0),r([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],SelectRoomItem:[function(e,t,o){"use strict";cc._RF.push(t,"2454fqSpTFBzaqjc3+RKCvv","SelectRoomItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../base/utils/GUIUtil"),c=e("../GameData"),s=e("../MainScene"),l=e("../HomeScreen"),u=e("../config/RoomConfig"),p=e("../config/LevelConfig"),d=cc._decorator,f=d.ccclass,h=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabName="Room1",t.levelUnlock=40,t.lock=null,t.label_unlock=null,t.button=null,t}return i(t,e),t.prototype.onLoad=function(){this.button=this.node.getComponent(cc.Button),this.button?a.default.addClickListener(this.button,this.node,"SelectRoomItem","onClick"):this.button=this.node.addComponent(cc.Button)},t.prototype.onEnable=function(){c.GameData.currentLevelId>=this.levelUnlock&&p.LevelConfig.realLevelSize>=this.levelUnlock?(this.lock.active=!1,this.button.interactable=!0):(this.lock.active=!0,this.button.interactable=!1,p.LevelConfig.realLevelSize<this.levelUnlock?(this.label_unlock.string="COMING SOON",this.label_unlock.fontSize=14):this.label_unlock.string="LEVEL "+this.levelUnlock)},t.prototype.onClick=function(){var e=u.RoomConfig.getRoomIdByName(this.prefabName);e!=l.default.instance.visibleRoomId?l.default.instance.loadRoom(e,function(){s.default.instance.showHomeScreen(function(){s.default.instance.selectRoomPopup.active=!1})}):s.default.instance.showHomeScreen(function(){s.default.instance.selectRoomPopup.active=!1})},r([h(cc.String)],t.prototype,"prefabName",void 0),r([h(cc.Integer)],t.prototype,"levelUnlock",void 0),r([h(cc.Node)],t.prototype,"lock",void 0),r([h(cc.Label)],t.prototype,"label_unlock",void 0),r([f],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../GameData":"GameData","../HomeScreen":"HomeScreen","../MainScene":"MainScene","../base/utils/GUIUtil":"GUIUtil","../config/LevelConfig":"LevelConfig","../config/RoomConfig":"RoomConfig"}],SerializableCipher:[function(e,t,o){"use strict";cc._RF.push(t,"e5f80C4+uJKCYlc2R9+sxYd","SerializableCipher"),Object.defineProperty(o,"__esModule",{value:!0}),o.SerializableCipher=void 0;var n=e("./WordArray"),i=e("../format/OpenSSL"),r=e("./CipherParams"),a=function(){function e(){}return e.encrypt=function(e,t,o,n){var i=Object.assign({},this.cfg,n),a=e.createEncryptor(o,i),c=a.finalize(t);return new r.CipherParams({ciphertext:c,key:o,iv:a.cfg.iv,algorithm:e,mode:a.cfg.mode,padding:a.cfg.padding,blockSize:a.cfg.blockSize,formatter:i.format})},e.decrypt=function(e,t,o,n){var i=Object.assign({},this.cfg,n);if(!i.format)throw new Error("could not determine format");if(!(t=this._parse(t,i.format)).ciphertext)throw new Error("could not determine ciphertext");return e.createDecryptor(o,i).finalize(t.ciphertext)},e._parse=function(e,t){return"string"==typeof e?t.parse(e):e},e.cfg={blockSize:4,iv:new n.WordArray([]),format:i.OpenSSL},e}();o.SerializableCipher=a,cc._RF.pop()},{"../format/OpenSSL":"OpenSSL","./CipherParams":"CipherParams","./WordArray":"WordArray"}],SetLanguage:[function(e,t,o){"use strict";cc._RF.push(t,"329b7HJOYxDNpEiugde1Lb0","SetLanguage");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ChangeLanguage=o.CodeLanguage=void 0;var a=e("./Language"),c=e("./MainScene"),s=cc._decorator,l=s.ccclass,u=s.property;o.CodeLanguage={0:"EN",1:"JA",2:"ID",3:"DE"};var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.key="",t.SpriteFrameLanguage=[],t.skeletonLanguageData=[],t}return i(t,e),t.prototype.onLoad=function(){this.codeLanguage=Object.values(o.CodeLanguage).indexOf(c.default.instance.language)},t.prototype.onEnable=function(){if(this.key)switch(this.codeLanguage){case 2:if("build"==this.key)return void this.resizeLabel(28,28);if("update"==this.key)return void this.resizeLabel(26,26);if("complete"==this.key)return void this.resizeLabel(28,28);if("visit"==this.key)return void this.resizeLabel(27,27);if("claim"==this.key)return void this.resizeLabel(21,21);this.node.getComponent(cc.Label).string=a.TextLanguage[c.default.instance.language][this.key];break;case 3:if("dailyRewardTitle"==this.key)return void this.resizeLabel(40,40);if("update"==this.key)return void this.resizeLabel(22,22);if("claim"==this.key)return void this.resizeLabel(18.5,18.5);if("dailyReward"==this.key)return void this.resizeLabel(20,20);if("match"==this.key)return void this.resizeLabel(15,15);if("skip"==this.key)return void this.resizeLabel(30,30);this.node.getComponent(cc.Label).string=a.TextLanguage[c.default.instance.language][this.key];break;default:this.node.getComponent(cc.Label).string=a.TextLanguage[c.default.instance.language][this.key]}if(this.SpriteFrameLanguage.length>0&&(this.node.getComponent(cc.Sprite).spriteFrame=this.SpriteFrameLanguage[this.codeLanguage]),this.skeletonLanguageData.length>0){var e=this.node.getComponent(sp.Skeleton);e.skeletonData=this.skeletonLanguageData[this.codeLanguage],e.setAnimation(0,"animation",!0)}},t.prototype.resizeLabel=function(e,t){var o=this.node.getComponent(cc.Label);o.string=a.TextLanguage[c.default.instance.language][this.key],o.fontSize=e,o.lineHeight=t},r([u(cc.String)],t.prototype,"key",void 0),r([u([cc.SpriteFrame])],t.prototype,"SpriteFrameLanguage",void 0),r([u([sp.SkeletonData])],t.prototype,"skeletonLanguageData",void 0),r([l],t)}(cc.Component);o.default=p;var d=function(){function e(){}return e.getText=function(e){return a.TextLanguage[c.default.instance.language][e]},e}();o.ChangeLanguage=d,cc._RF.pop()},{"./Language":"Language","./MainScene":"MainScene"}],SettingsPopup:[function(e,t,o){"use strict";cc._RF.push(t,"1ae5czkyCxFupccCa3ZqkvT","SettingsPopup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../base/toggle/ToggleSliderGroup"),c=e("../base/audio/AudioManager"),s=e("../GameData"),l=e("../config/GlobalSignals"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_sound_effect=null,t.btn_sound_music=null,t.btn_reset_data=null,t}return i(t,e),t.prototype.onLoad=function(){this.btn_sound_effect.setOnClickCallback(function(e){c.default.EffectEnable=e}),this.btn_sound_music.setOnClickCallback(function(e){c.default.MusicEnable=e}),this.btn_reset_data&&(this.btn_reset_data.node.active=!1),l.GlobalSignals.updateToggleSound.add(this.onSound.bind(this))},t.prototype.onEnable=function(){this.onSound()},t.prototype.onDisable=function(){l.GlobalSignals.updateToggleSound.remove(this.onSound.bind(this))},t.prototype.onSound=function(){this.btn_sound_effect.setToggleState(c.default.EffectEnable,!1),this.btn_sound_music.setToggleState(c.default.MusicEnable,!1)},t.prototype.onClearData=function(){cc.warn("onClearData"),s.GameData.clearData()},r([d(a.default)],t.prototype,"btn_sound_effect",void 0),r([d(a.default)],t.prototype,"btn_sound_music",void 0),r([d(cc.Button)],t.prototype,"btn_reset_data",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameData":"GameData","../base/audio/AudioManager":"AudioManager","../base/toggle/ToggleSliderGroup":"ToggleSliderGroup","../config/GlobalSignals":"GlobalSignals"}],Shooter:[function(e,t,o){"use strict";cc._RF.push(t,"a8a2dNNjvlKtoo9HsNqpYQV","Shooter");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Enemies"),c=e("../../../level/MapLevel"),s=e("../../../config/GroupConfig"),l=e("../../../config/TagObject"),u=e("../../../MainScene"),p=e("../../../config/AudioPlayId"),d=e("../../more/Bullet"),f=cc._decorator,h=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t}return i(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.hit.active=!0},t.prototype.onAttackCollider=function(){},t.prototype.onSearchCollider=function(e){this.isAlive&&(cc.log("Enemies onSearchCollider: "+e.node.name),c.default.instance.isPlaying&&(e.node.group!==s.GroupConfig.CHARACTER||(e.node.name==l.TagConfig.BOSS||e.node.name==l.TagConfig.GIRL||e.node.name==l.TagConfig.DOG?this.playAttack(e):this.addToIgnoreSearchCollier(e.node))))},t.prototype.playAttack=function(){var e=this;if(!this.isAttack){this.isAttack=!0,this.playAnimation(this.attackAnim);var t=cc.instantiate(this.bulletPrefab);t.active=!1,this.hit.addChild(t);var o=500/d.default.velocityHit;cc.tween(t).delay(.8).call(function(){e.isAlive||(cc.Tween.stopAllByTarget(t),t.removeFromParent()),t.active=!0}).by(o,{position:new cc.Vec3(500,0,0)}).call(function(){t.active&&(t.active=!1,t.removeFromParent())}).start(),this.scheduleOnce(function(){e.isAlive&&(e.isAttack=!1,e.playAnimation(e.idleAnim,!0),e.scheduleOnce(function(){e.searchCollider.refreshPingToTarget()},.5))},.8)}},t.prototype.onDieIce=function(){e.prototype.onDieIce.call(this),u.default.instance.audioPlayer.playAudio(p.AudioPlayId.stealer_die)},t.prototype.onDieNormal=function(){e.prototype.onDieNormal.call(this),u.default.instance.audioPlayer.playAudio(p.AudioPlayId.stealer_die)},t.prototype.onDieFire=function(){e.prototype.onDieFire.call(this),u.default.instance.audioPlayer.playAudio(p.AudioPlayId.stealer_die)},r([y(cc.Prefab)],t.prototype,"bulletPrefab",void 0),r([h],t)}(a.default);o.default=g,cc._RF.pop()},{"../../../MainScene":"MainScene","../../../config/AudioPlayId":"AudioPlayId","../../../config/GroupConfig":"GroupConfig","../../../config/TagObject":"TagObject","../../../level/MapLevel":"MapLevel","../../more/Bullet":"Bullet","./Enemies":"Enemies"}],SignalBinding:[function(e,t,o){"use strict";cc._RF.push(t,"986cbDaJqlNrbiJVow96Bwm","SignalBinding"),Object.defineProperty(o,"__esModule",{value:!0}),o.SignalBinding=void 0;var n=function(){function e(e,t,o,n,i){void 0===i&&(i=0),this.active=!0,this.params=null,this._listener=t,this._isOnce=o,this.context=n,this._signal=e,this.priority=i||0}return e.prototype.execute=function(e){var t,o;return this.active&&this._listener&&(o=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,o),this._isOnce&&this.detach()),t},e.prototype.detach=function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},e.prototype.isBound=function(){return!!this._signal&&!!this._listener},e.prototype.isOnce=function(){return this._isOnce},e.prototype.getListener=function(){return this._listener},e.prototype.getSignal=function(){return this._signal},e.prototype._destroy=function(){delete this._signal,delete this._listener,delete this.context},e.prototype.toString=function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"},e}();o.SignalBinding=n,cc._RF.pop()},{}],Signal:[function(e,t,o){"use strict";cc._RF.push(t,"cb5e6YetPdPRqAkDnrTk1Ag","Signal"),Object.defineProperty(o,"__esModule",{value:!0}),o.Signal=void 0;var n=e("./SignalBinding"),i=function(){function e(){this._bindings=[],this._prevParams=null,this.memorize=!1,this._shouldPropagate=!0,this.active=!0}return e.prototype.validateListener=function(e,t){if("function"!=typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))},e.prototype._registerListener=function(e,t,o,i){var r,a=this._indexOfListener(e,o);if(-1!==a){if((r=this._bindings[a]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else r=new n.SignalBinding(this,e,t,o,i),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},e.prototype._addBinding=function(e){var t=this._bindings.length;do{--t}while(this._bindings[t]&&e.priority<=this._bindings[t].priority);this._bindings.splice(t+1,0,e)},e.prototype._indexOfListener=function(e,t){for(var o,n=this._bindings.length;n--;)if((o=this._bindings[n]).getListener()===e&&o.context===t)return n;return-1},e.prototype.has=function(e,t){return void 0===t&&(t=null),-1!==this._indexOfListener(e,t)},e.prototype.add=function(e,t,o){return void 0===t&&(t=null),void 0===o&&(o=0),this.validateListener(e,"add"),this._registerListener(e,!1,t,o)},e.prototype.addOnce=function(e,t,o){return void 0===t&&(t=null),void 0===o&&(o=0),this.validateListener(e,"addOnce"),this._registerListener(e,!0,t,o)},e.prototype.remove=function(e,t){void 0===t&&(t=null),this.validateListener(e,"remove");var o=this._indexOfListener(e,t);return-1!==o&&(this._bindings[o]._destroy(),this._bindings.splice(o,1)),e},e.prototype.removeAll=function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},e.prototype.getNumListeners=function(){return this._bindings.length},e.prototype.halt=function(){this._shouldPropagate=!1},e.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.active){var o,n=this._bindings.length;if(this.memorize&&(this._prevParams=e),n){o=this._bindings.slice(0),this._shouldPropagate=!0;do{n--}while(o[n]&&this._shouldPropagate&&!1!==o[n].execute(e))}}},e.prototype.forget=function(){this._prevParams=null},e.prototype.dispose=function(){this.removeAll(),delete this._bindings,delete this._prevParams},e.prototype.toString=function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"},e.VERSION="1.0.0",e}();o.Signal=i,cc._RF.pop()},{"./SignalBinding":"SignalBinding"}],SkinBossUpdater:[function(e,t,o){"use strict";cc._RF.push(t,"b96455DzyhL1JYIEFU8HEc7","SkinBossUpdater");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/FeatureSkinConfig"),c=e("../config/GlobalSignals"),s=e("../config/SkinConfig"),l=e("../GameData"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.skeletonFeature=null,t.anim="idle",t._onUpdateSkinBoss=null,t}return i(t,e),t.prototype.onLoad=function(){this.skeleton||(this.skeleton=this.node.getComponent(sp.Skeleton))},t.prototype.onEnable=function(){this._onUpdateSkinBoss=this.onUpdateSkinBoss.bind(this),c.GlobalSignals.changeSkinBossSignal.add(this._onUpdateSkinBoss),this.onUpdateSkinBoss()},t.prototype.onDisable=function(){c.GlobalSignals.changeSkinBossSignal.remove(this._onUpdateSkinBoss)},t.prototype.onUpdateSkinBoss=function(){var e=s.SkinConfig.getSkinNameById(l.GameData.currentSkinBoss);cc.log("onUpdateSkinBoss: "+e),this.skeleton.setSkin(e),this.skeleton.setSlotsToSetupPose(),this.anim&&this.skeleton.setAnimation(0,this.anim,!0)},t.prototype.updateFeatureSkin=function(){this.skeletonFeature.node.active=!1;var e=s.SkinConfig.getSkinConfigById(l.GameData.currentSkinBoss);if(s.SkinConfig.CheckSkinHaveFeature(e)){var t=e,o=a.FeatureSkinConfig.getSkinConfigById(t.idFeatures[0]);o&&(this.skeletonFeature.node.active=!0,this.skeletonFeature.setSkin(o.skins))}else this.skeletonFeature.node.active=!1},r([d(sp.Skeleton)],t.prototype,"skeleton",void 0),r([d(sp.Skeleton)],t.prototype,"skeletonFeature",void 0),r([d(cc.String)],t.prototype,"anim",void 0),r([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameData":"GameData","../config/FeatureSkinConfig":"FeatureSkinConfig","../config/GlobalSignals":"GlobalSignals","../config/SkinConfig":"SkinConfig"}],SkinConfig:[function(e,t,o){"use strict";cc._RF.push(t,"c02cavE5GRJyqMzIcM60HHk","SkinConfig");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.SkinConfig=o.ItemSkinHaveFeature=o.GroupItemSkinVsFeature=o.GroupItemSkinConfig=o.ItemSkinConfig=void 0;var r=function(e,t,o,n,i){this.skinId=e,this.skins=t,this.type=o,this.value=n,this.stickName=i};o.ItemSkinConfig=r;var a=function(e){function t(t,o,n,i,r,a,c,s){var l=e.call(this,t,o,n,i,r)||this;return l.graph=a,l.isRoot=c,l.group=s,l}return i(t,e),t}(r);o.GroupItemSkinConfig=a;var c=function(e){function t(t,o,n,i,r,a,c,s,l){var u=e.call(this,t,o,n,i,r,a,c,l)||this;return u.graph=a,u.isRoot=c,u.idFeatures=s,u}return i(t,e),t}(a);o.GroupItemSkinVsFeature=c;var s=function(e){function t(t,o,n,i,r,a){var c=e.call(this,t,o,n,i,r)||this;return c.idFeatures=a,c}return i(t,e),t}(r);o.ItemSkinHaveFeature=s;var l=function(){function e(){}return e.getSkinNameById=function(t){for(var o=e.arraySkinBoss,n=0;n<o.length;n++)if(o[n].skinId===t){var i=o[n];return i.skins[i.skins.length-1]}return"Base/1"},e.getSkinConfigById=function(t){for(var o=e.arraySkinBoss,n=0;n<o.length;n++)if(o[n].skinId===t)return o[n];return null},e.getSkinGirlConfigById=function(t){for(var o=e.arraySkinGirl,n=0;n<o.length;n++)if(o[n].skinId===t)return o[n];return null},e.GetAllItemSampleGroup=function(t){var o=[];return e.arraySkinBoss.forEach(function(e){e instanceof a&&e.group==t&&o.push(e)}),o},e.CheckSkinInGroup=function(e){return e instanceof a||e instanceof c},e.CheckSkinHaveFeature=function(e){return e instanceof s||e instanceof c},e.get_type={free:"free",buy:"buy",claim_ad:"claim_ad",gift_code:"gift_code",share_fb:"share_fb",daily_reward:"daily_reward",event:"halloween"},e.arraySkinBoss=[new r("hero_0",["Base/1"],e.get_type.free,0,"Base/kiem"),new r("hero_1",["BlackPanther/BlackPanther"],e.get_type.claim_ad,0,"BlackPanther/KiemBlackPanther"),new r("hero_2",["Hercules/hercules"],e.get_type.claim_ad,0,"Hercules/kiem hercules"),new r("hero_3",["Superman/superman"],e.get_type.buy,3e4,"Superman/kiem superman"),new r("hero_4",["Holy/holy"],e.get_type.buy,5e4,"Holy/kiem holy"),new r("hero_5",["Athur/Athur"],e.get_type.buy,1e4,"Athur/kiem Athur"),new s("hero_6",["dragon Knight/dragon knight"],e.get_type.daily_reward,0,"dragon Knight/kiem dragon knight",["feature_3"]),new r("hero_7",["Zeus/Zeus"],e.get_type.buy,15e3,"Zeus/kiem Zeus"),new r("hero_8",["HP/HP"],e.get_type.buy,5e4,"HP/kiem HP"),new r("hero_9",["Viking/viking"],e.get_type.buy,5e4,"Viking/kiem viking"),new r("hero_10",["Ice Man/iceman"],e.get_type.buy,5e4,"Ice Man/kiem iceman"),new r("hero_11",["Greymane/Greymane"],e.get_type.buy,1e4,"Greymane/kiem Greymane"),new r("hero_12",["UncleSame/Uncle"],e.get_type.buy,2e4,"UncleSame/KiemUncle"),new r("hero_13",["Luffy/Luffy"],e.get_type.buy,3e4,"Luffy/KiemLuffy"),new r("hero_14",["Goku/Goku"],e.get_type.buy,3e4,"Goku/KiemGoku"),new r("hero_15",["McFly2/McFly"],e.get_type.buy,5e4,"McFly2/KiemMcfly2"),new r("hero_16",["Base2/Base2"],e.get_type.buy,2e4,"Base2/Kiem2"),new r("hero_17",["Pharaoh/Pharaoh"],e.get_type.buy,4e4,"Pharaoh/KiemPharaoh"),new r("hero_18",["Aladin/Aladin"],e.get_type.buy,5e4,"Aladin/KiemAladin"),new r("hero_19",["Dracula/Dracula"],e.get_type.buy,15e3,"Dracula/KiemDracula"),new r("hero_20",["CH/CH"],e.get_type.buy,1e4,"CH/KiemCH"),new r("hero_21",["Samurai/Samurai"],e.get_type.buy,5e4,"Samurai/KiemSamurai"),new r("hero_22",["Koria/Koria"],e.get_type.buy,5e5,"Koria/KiemKoria"),new r("hero_23",["Japan/Japorn"],e.get_type.buy,5e5,"Japan/KiemJaporn"),new r("hero_24",["MCFly/MCFly"],e.get_type.buy,3e5,"MCFly/kiem MCFly"),new r("hero_25",["Robocop/Robocop"],e.get_type.buy,5e4,"Robocop/KiemRobocop"),new r("hero_26",["Elvis/Elvis"],e.get_type.buy,3e4,"Elvis/KiemElvis"),new s("hero_27",["Angel/Angel"],e.get_type.daily_reward,2e5,"Angel/KiemAngel",["feature_1"]),new s("hero_28",["Demon/Demon"],e.get_type.daily_reward,2e5,"Demon/KiemDemon",["feature_2"]),new a("hero_29",["pumkin1/Pumkin1"],e.get_type.buy,2e5,"pumkin1/kiemPumkin1",["hero_30"],!1,"Halloween"),new a("hero_30",["pumkin2/Pumkin2"],e.get_type.buy,2e5,"pumkin2/kiemPumkin2",["hero_29","hero_31"],!1,"Halloween"),new c("hero_31",["pumkin3/Pumkin3"],e.get_type.buy,2e5,"pumkin3/kiemPumkin3",["hero_30"],!0,["feature_8"],"Halloween"),new a("hero_32",["Noel/Noel"],e.get_type.buy,2e5,"Noel/Kiem",["boss_39"],!1,"valentine"),new a("hero_33",["Noel2/Noel2"],e.get_type.buy,2e5,"Noel2/Kiem",["boss_38,boss_60"],!1,"valentine"),new c("hero_34",["Noel2/Noel2"],e.get_type.buy,2e5,"Noel2/Kiem",["boss_39"],!0,["feature_6"],"valentine"),new a("hero_35",["Lunar1/Lunar1"],e.get_type.buy,2e5,"Lunar1/Kiem",["boss_32"],!1,"MuaLan"),new a("hero_36",["Lunar2/Lunar2"],e.get_type.buy,2e5,"Lunar2/Kiem",["hero_37"],!1,"MuaLan"),new c("hero_37",["Lunar2/Lunar2"],e.get_type.buy,2e5,"Lunar2/Kiem",["hero_36","hero_38"],!0,["feature_5"],"MuaLan"),new r("hero_38",["Lunar3/Lunar3"],e.get_type.buy,5e4,"Lunar3/kiem"),new r("hero_39",["Lunar4/Lunar4"],e.get_type.buy,5e4,"Lunar4/kiem"),new a("hero_40",["Halloween/Halloween"],e.get_type.buy,2e5,"Halloween/Kiem",["boss_32"],!1,"Halloween2021"),new a("hero_41",["Halloween2/Halloween2"],e.get_type.buy,2e5,"Halloween2/Kiem",["boss_32"],!1,"Halloween2021"),new c("hero_42",["Halloween2/Halloween2"],e.get_type.buy,2e5,"Halloween2/Kiem",["boss_32"],!0,["feature_4"],"Halloween2021"),new a("hero_43",["Thanksgiving/Thanksgiving"],e.get_type.buy,2e5,"Thanksgiving/Kiem",["hero_44"],!1,"Thanksgiving2021"),new a("hero_44",["Thanksgiving2/Thanksgiving2"],e.get_type.buy,2e5,"Thanksgiving2/Kiem",["boss_32"],!1,"Thanksgiving2021"),new c("hero_45",["Thanksgiving2/Thanksgiving2"],e.get_type.buy,2e5,"Thanksgiving2/Kiem",["boss_32"],!0,["feature_9"],"Thanksgiving2021")],e.arraySkinGirl=[{skinId:"wife_0",skins:["Princess"],type:e.get_type.free,value:0,stickName:""},{skinId:"wife_1",skins:["Elsa"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_2",skins:["Cinderlera"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_3",skins:["Event"],type:e.get_type.buy,value:3e5,stickName:""},{skinId:"wife_4",skins:["Claus"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_5",skins:["SnowWhite"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_6",skins:["Mermaid"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_7",skins:["Lunar1"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_8",skins:["Lunar2"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_9",skins:["Lunar3"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_10",skins:["Halloween"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_11",skins:["Halloween2"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_12",skins:["Halloween3"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_13",skins:["Thanksgiving"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_14",skins:["Thanksgiving2"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_15",skins:["Noel2021"],type:e.get_type.buy,value:1e5,stickName:""},{skinId:"wife_16",skins:["Noel2021_2"],type:e.get_type.buy,value:4e4,stickName:""}],e}();o.SkinConfig=l,cc._RF.pop()},{}],SkinItemGroup:[function(e,t,o){"use strict";cc._RF.push(t,"de173CvGxpEfZzMwkCHWBEy","SkinItemGroup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../base/utils/GUIUtil"),c=e("../GameData"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.light=null,t.text="hello",t.skinConfig=null,t.btn_click=null,t.skinClickCallback=null,t}return i(t,e),t.prototype.onLoad=function(){this.btn_click=this.node.getComponent(cc.Button),this.btn_click||(this.btn_click=this.node.addComponent(cc.Button)),a.default.addClickListener(this.btn_click,this.node,"SkinItemGroup","onClickBoss")},t.prototype.initSkinItem=function(e,t){this.skinConfig=e,this.skinClickCallback=t,e.skinId===c.GameData.currentSkinBoss?this.light.active=!0:this.light.active=!1,1===e.skins.length?this.skeleton.setSkin(e.skins[0]):this.skeleton.setSkin(e.skins[e.skins.length-1]),this.skeleton.setSlotsToSetupPose(),a.default.ativeSkinFeatureIfHave(e,this.skeleton.node)},t.prototype.onClickBoss=function(){this.skinClickCallback&&this.skinClickCallback(this.skinConfig)},r([u(sp.Skeleton)],t.prototype,"skeleton",void 0),r([u(cc.Node)],t.prototype,"light",void 0),r([u],t.prototype,"text",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../GameData":"GameData","../base/utils/GUIUtil":"GUIUtil"}],SkinItem:[function(e,t,o){"use strict";cc._RF.push(t,"2f495wKQ/JFyJrI9qhSlw0S","SkinItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/SkinConfig"),c=e("../GameData"),s=e("../base/utils/GUIUtil"),l=e("../plugins/fb/FBInstantGames"),u=e("../plugins/tracking/GameTracking"),p=e("../MainScene"),d=e("../base/audio/AudioManager"),f=e("../base/glance_Global"),h=cc._decorator,y=h.ccclass,g=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.btn_claim=null,t.btn_share=null,t.btn_giftcode=null,t.btn_daily_reward=null,t.btn_buy=null,t.btn_event=null,t.label_price=null,t.light=null,t.skinConfig=null,t.btn_click=null,t.person="hero",t.skinClickCallback=null,t}return i(t,e),t.prototype.onLoad=function(){this.btn_click=this.node.getComponent(cc.Button),this.btn_click||(this.btn_click=this.node.addComponent(cc.Button)),s.default.addClickListener(this.btn_click,this.node,"SkinItem","onClickBoss"),s.default.addClickListener(this.btn_buy,this.node,"SkinItem","onClickBuy"),s.default.addClickListener(this.btn_share,this.node,"SkinItem","onClickShareFb"),s.default.addClickListener(this.btn_claim,this.node,"SkinItem","onClickClaim"),s.default.addClickListener(this.btn_giftcode,this.node,"SkinItem","onClickGiftCode"),s.default.addClickListener(this.btn_daily_reward,this.node,"SkinItem","onClickDailyReward"),s.default.addClickListener(this.btn_event,this.node,"SkinItem","onClickEvent")},t.prototype.onClickBoss=function(){this.skinClickCallback&&this.skinClickCallback(this.skinConfig)},t.prototype.onClickBuy=function(){var e=this;if(this.skinConfig.value<c.GameData.playerCoin){if(a.SkinConfig.CheckSkinInGroup(this.skinConfig)){var t=this.skinConfig,o=a.SkinConfig.GetAllItemSampleGroup(t.group);c.GameData.addCoin(-this.skinConfig.value);for(var n=0;n<o.length;n++){var i=o[n];c.GameData.addSkinBoss(i.skinId,function(){})}this.updateUI()}else c.GameData.addSkinBoss(this.skinConfig.skinId,function(t){t||(c.GameData.addCoin(-e.skinConfig.value),e.updateUI())});f.default.instance.sendEventransactions(c.GameData.currentLevelId+1,this.person+" "+this.skinConfig.type)}},t.prototype.onClickEvent=function(){p.default.instance.showEventPopup()},t.prototype.onClickShareFb=function(){var e=this;l.FBInstantGames.onShareGame(function(){if(u.GameTracking.logEventShareGame(c.GameData.currentLevelId),a.SkinConfig.CheckSkinInGroup(e.skinConfig)){for(var t=e.skinConfig,o=a.SkinConfig.GetAllItemSampleGroup(t.group),n=0;n<o.length;n++){var i=o[n];c.GameData.addSkinBoss(i.skinId,function(){})}e.updateUI()}else c.GameData.addSkinBoss(e.skinConfig.skinId,function(t){t||e.updateUI()})})},t.prototype.onClickClaim=function(){p.default.instance.rewardType="claim",f.default.instance.effectSoundState=d.default.EffectEnable,f.default.instance.musicSoundState=d.default.MusicEnable,window.watchSkin=function(){var e=this;c.GameData.addSkinBoss(this.skinConfig.skinId,function(t){t||e.updateUI()}),f.default.instance.sendEventransactions(c.GameData.currentLevelId+1,this.person+" "+this.skinConfig.type)}.bind(this),f.default.instance.sendEventReward(),f.default.instance.rewardEvent()},t.prototype.onClickGiftCode=function(){},t.prototype.onClickDailyReward=function(){p.default.instance.showDailyPopup()},t.prototype.initSkinItem=function(e,t){this.skinConfig=e,this.skinClickCallback=t,e.skinId===c.GameData.currentSkinBoss&&(this.light.active=!0),this.setSkin(e),this.skeleton.setSlotsToSetupPose(),this.updateUI()},t.prototype.setSkin=function(e){s.default.ativeSkinFeatureIfHave(e,this.skeleton.node),1===e.skins.length?this.skeleton.setSkin(e.skins[0]):this.skeleton.setSkin(e.skins[e.skins.length-1])},t.prototype.updateUI=function(){var e=this.skinConfig;if(e.type!=a.SkinConfig.get_type.event&&(e.type===a.SkinConfig.get_type.free||-1!=c.GameData.myBossSkins.indexOf(e.skinId)))return this.btn_buy.node.active=!1,this.btn_daily_reward.node.active=!1,this.btn_claim.node.active=!1,this.btn_giftcode.node.active=!1,void(this.btn_share.node.active=!1);switch(e.type){case a.SkinConfig.get_type.buy:this.btn_buy.node.active=!0,this.label_price.string=e.value+"",c.GameData.playerCoin>=e.value?this.label_price.node.color=cc.Color.WHITE:this.label_price.node.color=cc.Color.RED,this.btn_buy.interactable=c.GameData.playerCoin>=e.value;break;case a.SkinConfig.get_type.event:this.btn_event.node.active=!0;break;case a.SkinConfig.get_type.daily_reward:this.btn_daily_reward.node.active=!0;break;case a.SkinConfig.get_type.claim_ad:this.btn_claim.node.active=!0;break;case a.SkinConfig.get_type.gift_code:this.btn_giftcode.node.active=!0;break;case a.SkinConfig.get_type.share_fb:this.btn_share.node.active=!0}},r([g(sp.Skeleton)],t.prototype,"skeleton",void 0),r([g(cc.Button)],t.prototype,"btn_claim",void 0),r([g(cc.Button)],t.prototype,"btn_share",void 0),r([g(cc.Button)],t.prototype,"btn_giftcode",void 0),r([g(cc.Button)],t.prototype,"btn_daily_reward",void 0),r([g(cc.Button)],t.prototype,"btn_buy",void 0),r([g(cc.Button)],t.prototype,"btn_event",void 0),r([g(cc.Label)],t.prototype,"label_price",void 0),r([g(cc.Node)],t.prototype,"light",void 0),r([y],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../GameData":"GameData","../MainScene":"MainScene","../base/audio/AudioManager":"AudioManager","../base/glance_Global":"glance_Global","../base/utils/GUIUtil":"GUIUtil","../config/SkinConfig":"SkinConfig","../plugins/fb/FBInstantGames":"FBInstantGames","../plugins/tracking/GameTracking":"GameTracking"}],SkinPopup:[function(e,t,o){"use strict";cc._RF.push(t,"077a2KjJEZJZpHqt/lLWN7i","SkinPopup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./SkinItem"),c=e("../config/SkinConfig"),s=e("../config/GlobalSignals"),l=e("../GameData"),u=e("./SkinWifePopup"),p=e("../base/utils/GUIUtil"),d=e("./SkinItemGroup"),f=cc._decorator,h=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeletonNode=null,t.container=null,t.skinWifePopup=null,t.rowPrefab=null,t.skinPrefab=null,t.scrollView=null,t.scrollView2=null,t.itemBossScroll=null,t.skeleton=null,t.arraySkin=[],t.listContent=null,t._scrollViewCollisonBox=null,t}return i(t,e),t.prototype.onLoad=function(){this.node.setPosition(0,0,0),this.skeleton=this.skeletonNode.getComponentInChildren(sp.Skeleton),this.initData(),this.basePoint=this.scrollView2.node.parent.convertToWorldSpaceAR(cc.v2(this.scrollView2.node.x-this.scrollView2.node.anchorX*this.scrollView2.node.width,this.scrollView2.node.y-this.scrollView2.node.anchorY*this.scrollView2.node.height))},t.prototype.onEnable=function(){var e=this;this._scrollViewCollisonBox=cc.rect(this.basePoint.x,this.basePoint.y,this.scrollView2.node.width,this.scrollView2.node.height),this.scrollView2.node.on("scrolling",this.onScrolling,this),this.listContent=this.scrollView2.content,this.scheduleOnce(function(){e.onScrolling()})},t.prototype.onScrolling=function(){var e=this;this.listContent.children.forEach(function(t){var o=e.checkVisible(t);t.opacity=o?255:0})},t.prototype.selectSkinBossByCfg=function(e,t){var o=this;this.SetSkinSelect(e,t),e.type!==c.SkinConfig.get_type.free&&-1==l.GameData.myBossSkins.indexOf(e.skinId)||l.GameData.setSkinBoss(e.skinId,function(n){n||(s.GlobalSignals.changeSkinBossSignal.dispatch(),o.arraySkin.forEach(function(t){t.skinConfig.skinId===e.skinId?t.light.active=!0:t.light.active&&(t.light.active=!1)}),o.SetSkinSelect(e,t))})},t.prototype.SetSkinSelect=function(e,t){if(e instanceof c.GroupItemSkinConfig){this.scrollView.node.active=!0,this.skeletonNode.active=!1;var o=c.SkinConfig.GetAllItemSampleGroup(e.group);this.SetItemsScrollView(o,t)}else{this.skeletonNode.active=!0,this.scrollView.node.active=!1;var n=e.skins[e.skins.length-1];this.setSkinHeroInShop(n),this.skeleton.setSlotsToSetupPose(),this.skeleton.setAnimation(0,"idle",!0),p.default.ativeSkinFeatureIfHave(e,this.skeleton.node)}},t.prototype.setSkinHeroInShop=function(e){var t=cc.instantiate(this.skeleton.node);this.skeletonNode.removeAllChildren(),this.skeletonNode.addChild(t),this.skeletonNode.getComponentInChildren(sp.Skeleton).setSkin(e)},t.prototype.initData=function(){var e=this,t=[];c.SkinConfig.arraySkinBoss.forEach(function(e){if(e.type!=c.SkinConfig.get_type.gift_code){if(e instanceof c.GroupItemSkinConfig&&!e.isRoot)return;t.push(e)}});for(var o=t.length,n=Math.ceil(o/3),i=0,r=0;r<n;r++){var s=cc.instantiate(this.rowPrefab);this.container.addChild(s);for(var l=function(n){if(i>=o)return"break";var r=t[i],c=cc.instantiate(u.skinPrefab);c.position=s.children[n].position,s.addChild(c);var l=c.getComponent(a.default);l.initSkinItem(r,function(t){e.selectSkinBossByCfg(t,l)}),u.arraySkin.push(l),i++},u=this,p=0;p<3&&"break"!==l(p);p++);}},t.prototype.onClickBack=function(){this.node.active=!1},t.prototype.SetItemsScrollView=function(e,t){for(var o=this,n=function(n){var r=e[n],a=i.scrollView.content.children[n];a||(a=cc.instantiate(i.itemBossScroll),i.scrollView.content.addChild(a));var u=a.getComponent(d.default);u.initSkinItem(r,function(e){e.type!==c.SkinConfig.get_type.free&&-1==l.GameData.myBossSkins.indexOf(e.skinId)||(o.scrollView.content.children.forEach(function(e){e.children[1].active=!1}),u.node.children[1].active=!0,t.skinConfig=e,t.setSkin(e),l.GameData.setSkinBoss(e.skinId,function(e){e||s.GlobalSignals.changeSkinBossSignal.dispatch()}))})},i=this,r=0;r<e.length;r++)n(r)},t.prototype.onClickSkinWife=function(){this.skinWifePopup.Show()},t.prototype.checkVisible=function(e){return e.getBoundingBoxToWorld().intersects(this._scrollViewCollisonBox)},r([y(cc.Node)],t.prototype,"skeletonNode",void 0),r([y(cc.Node)],t.prototype,"container",void 0),r([y(u.default)],t.prototype,"skinWifePopup",void 0),r([y(cc.Prefab)],t.prototype,"rowPrefab",void 0),r([y(cc.Prefab)],t.prototype,"skinPrefab",void 0),r([y(cc.ScrollView)],t.prototype,"scrollView",void 0),r([y(cc.ScrollView)],t.prototype,"scrollView2",void 0),r([y(cc.Node)],t.prototype,"itemBossScroll",void 0),r([h],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../GameData":"GameData","../base/utils/GUIUtil":"GUIUtil","../config/GlobalSignals":"GlobalSignals","../config/SkinConfig":"SkinConfig","./SkinItem":"SkinItem","./SkinItemGroup":"SkinItemGroup","./SkinWifePopup":"SkinWifePopup"}],SkinWifeItem:[function(e,t,o){"use strict";cc._RF.push(t,"4ad015xw45Nirmh1TEfe2aC","SkinWifeItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../base/glance_Global"),c=e("../config/SkinConfig"),s=e("../GameData"),l=e("../plugins/fb/FBInstantAds"),u=e("../plugins/fb/FBInstantGames"),p=e("../plugins/tracking/GameTracking"),d=e("./SkinItem"),f=cc._decorator,h=f.ccclass,y=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.person="wife",t}return i(t,e),t.prototype.onClickBuy=function(){var e=this;this.skinConfig.value<s.GameData.playerCoin&&(s.GameData.addSkinWife(this.skinConfig.skinId,function(t){t||(s.GameData.addCoin(-e.skinConfig.value),e.updateUI())}),a.default.instance.sendEventransactions(s.GameData.currentLevelId+1,this.person+" "+this.skinConfig.type))},t.prototype.initSkinItem=function(e,t){this.skinConfig=e,this.skinClickCallback=t,e.skinId===s.GameData.currentSkinWife?this.light.active=!0:this.light.active=!1,this.setSkin(e),this.skeleton.setSlotsToSetupPose(),this.updateUI()},t.prototype.updateUI=function(){var e=this.skinConfig;if(e.type===c.SkinConfig.get_type.free||-1!=s.GameData.myWifeSkins.indexOf(e.skinId))return this.btn_buy.node.active=!1,this.btn_daily_reward.node.active=!1,this.btn_claim.node.active=!1,this.btn_giftcode.node.active=!1,void(this.btn_share.node.active=!1);switch(e.type){case c.SkinConfig.get_type.buy:this.btn_buy.node.active=!0,this.label_price.string=e.value+"",s.GameData.playerCoin>=e.value?this.label_price.node.color=cc.Color.WHITE:this.label_price.node.color=cc.Color.RED,this.btn_buy.interactable=s.GameData.playerCoin>=e.value;break;case c.SkinConfig.get_type.event:this.btn_event.node.active=!0;break;case c.SkinConfig.get_type.daily_reward:this.btn_daily_reward.node.active=!0;break;case c.SkinConfig.get_type.claim_ad:this.btn_claim.node.active=!0;break;case c.SkinConfig.get_type.gift_code:this.btn_giftcode.node.active=!0;break;case c.SkinConfig.get_type.share_fb:this.btn_share.node.active=!0}},t.prototype.onClickClaim=function(){var e=this;l.FBInstantAds.showRewardedVideoAd(function(t){t||s.GameData.addSkinWife(e.skinConfig.skinId,function(t){t||e.updateUI()})})},t.prototype.onClickShareFb=function(){var e=this;u.FBInstantGames.onShareGame(function(){p.GameTracking.logEventShareGame(s.GameData.currentLevelId),s.GameData.addSkinWife(e.skinConfig.skinId,function(t){t||e.updateUI()})})},r([h],t)}(d.default));o.default=y,cc._RF.pop()},{"../GameData":"GameData","../base/glance_Global":"glance_Global","../config/SkinConfig":"SkinConfig","../plugins/fb/FBInstantAds":"FBInstantAds","../plugins/fb/FBInstantGames":"FBInstantGames","../plugins/tracking/GameTracking":"GameTracking","./SkinItem":"SkinItem"}],SkinWifePopup:[function(e,t,o){"use strict";cc._RF.push(t,"e2b9efoI5FCxpk9qU9Sp9Jc","SkinWifePopup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../config/SkinConfig"),c=e("../GameData"),s=e("./SkinItem"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemSkin=null,t.itemPanel=null,t.scrollView=null,t.arraySkin=[],t.listContent=null,t._scrollViewCollisonBox=null,t}return i(t,e),t.prototype.onLoad=function(){this.initData(),this.basePoint=this.scrollView.node.parent.convertToWorldSpaceAR(cc.v2(this.scrollView.node.x-this.scrollView.node.anchorX*this.scrollView.node.width,this.scrollView.node.y-this.scrollView.node.anchorY*this.scrollView.node.height))},t.prototype.onEnable=function(){var e=this;this._scrollViewCollisonBox=cc.rect(this.basePoint.x,this.basePoint.y,this.scrollView.node.width,this.scrollView.node.height),this.scrollView.node.on("scrolling",this.onScrolling,this),this.listContent=this.scrollView.content,this.scheduleOnce(function(){e.onScrolling()})},t.prototype.onScrolling=function(){var e=this;this.listContent.children.forEach(function(t){var o=e.checkVisible(t);t.opacity=o?255:0})},t.prototype.checkVisible=function(e){return e.getBoundingBoxToWorld().intersects(this._scrollViewCollisonBox)},t.prototype.Show=function(){this.node.active=!0},t.prototype.Hide=function(){this.node.active=!1},t.prototype.initData=function(){for(var e,t=this,o=(e=a.SkinConfig.arraySkinGirl).length,n=Math.ceil(o/3),i=0,r=0;r<n;r++){var c=this.scrollView.content.children[r];c||(c=cc.instantiate(this.itemPanel),this.scrollView.content.addChild(c));for(var l=0;l<3;l++){if(i>=o){var u=c.children[l];u&&(u.active=!1);break}var p=e[i],d=c.children[l];d||(d=cc.instantiate(this.itemSkin),c.addChild(d));var f=d.getComponent(s.default);f.initSkinItem(p,function(e){t.selectSkinBossByCfg(e)}),this.arraySkin.push(f),i++}}},t.prototype.selectSkinBossByCfg=function(e){var t=this;e.type!==a.SkinConfig.get_type.free&&-1==c.GameData.myWifeSkins.indexOf(e.skinId)||c.GameData.setSkinWife(e.skinId,function(o){o||t.arraySkin.forEach(function(t){t.skinConfig.skinId===e.skinId?t.light.active=!0:t.light.active&&(t.light.active=!1)})})},t.prototype.onClickClose=function(){this.Hide()},r([p(cc.Node)],t.prototype,"itemSkin",void 0),r([p(cc.Node)],t.prototype,"itemPanel",void 0),r([p(cc.ScrollView)],t.prototype,"scrollView",void 0),r([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../GameData":"GameData","../config/SkinConfig":"SkinConfig","./SkinItem":"SkinItem"}],SnowGO:[function(e,t,o){"use strict";cc._RF.push(t,"114d3NpwDFJL7EK1S8sR0Cw","SnowGO");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=e("../../level/MapLevel"),s=e("../../config/PhysicsConfig"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.border=null,t.drop=null,t.icePrefab=null,t.available=!0,t}return i(t,e),t.prototype.onLoad=function(){s.PhysicsConfig.initPhysicConfig(this.node,"snow")},t.prototype.start=function(){this.border.active=!0,this.drop.active=!0;var e=this.getComponent(cc.Sprite);e&&(e.enabled=!1)},t.prototype.transformToRock=function(){var e=c.default.instance.rockContainer,t=cc.instantiate(this.icePrefab);t.position=e.convertToNodeSpaceAR(this.node.getParent().convertToWorldSpaceAR(this.node.position)),t.parent=e,this.node.removeFromParent()},t.prototype.onCollisionEnter=function(e){this.available&&(e.node.group!==a.GroupConfig.WATER&&e.node.group!==a.GroupConfig.ROCK||(this.available=!1,this.transformToRock()))},r([p(cc.Node)],t.prototype,"border",void 0),r([p(cc.Node)],t.prototype,"drop",void 0),r([p(cc.Prefab)],t.prototype,"icePrefab",void 0),r([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../config/GroupConfig":"GroupConfig","../../config/PhysicsConfig":"PhysicsConfig","../../level/MapLevel":"MapLevel"}],Stealer:[function(e,t,o){"use strict";cc._RF.push(t,"59a11YXUHNE+b4oPsB3zGua","Stealer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Enemies"),c=e("../../../config/AudioPlayId"),s=e("../../../MainScene"),l=e("../Character"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.superSkin="",t.superAppearAnim="Appear1",t.superAttackAnim="Attack2",t.superIdleAnim="Idle2",t.superRunAnim="Walk2",t}return i(t,e),t.prototype.playAttack=function(e){var t=this;if(this.isAttack){var o=e.getComponent(l.default);if(o&&!o.isAlive)return}this.isAttack=!0,this.rotateFaceToTarget(e),this.isSuper?this.playAnimation(this.superAttackAnim):this.playAnimation(this.attackAnim),this.stopMove(),this.scheduleOnce(function(){t.hit.active=!0},.25),this.skeleton.setCompleteListener(function(){t.isAlive&&(t.skeleton.setCompleteListener(null),t.isSuper?t.playAnimation(t.superIdleAnim,!0):t.playAnimation(t.idleAnim,!0),t.hit.active=!1,t.isAttack=!1,t.stopMove(),t.searchCollider.refreshPingToTarget())}),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_attack)},t.prototype.changeSkinToSuper=function(){this.isSuper=!0,this.idleAnim+="2",this.attackAnim+="2",this.walkAnim+="2",this.runAnim+="2";var e=this.node.getChildByName("Steal Fat");e&&(e.y=e.y+15);var t=this.attackCollider.getComponent(cc.BoxCollider),o=this.hit.getComponent(cc.BoxCollider);this.hit.position=this.attackCollider.node.position,this.hit.angle=this.attackCollider.node.angle,o.offset=t.offset,o.size=t.size,this.playAnimation(this.superAppearAnim).addAnimation(this.superIdleAnim,!0)},t.prototype.walkToTarget=function(e){this.isSuper?this.moveToTarget(e,this.superRunAnim):this.moveToTarget(e,this.walkAnim)},t.prototype.onDieIce=function(){e.prototype.onDieIce.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},t.prototype.onDieNormal=function(){e.prototype.onDieNormal.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},t.prototype.onDieFire=function(){e.prototype.onDieFire.call(this),s.default.instance.audioPlayer.playAudio(c.AudioPlayId.stealer_die)},r([p],t)}(a.default));o.default=d,cc._RF.pop()},{"../../../MainScene":"MainScene","../../../config/AudioPlayId":"AudioPlayId","../Character":"Character","./Enemies":"Enemies"}],StickHold:[function(e,t,o){"use strict";cc._RF.push(t,"ac6a0Le9y5BMIU4IVuP9T0u","StickHold");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.StickHoldType=void 0;var a,c=e("../../config/GroupConfig"),s=e("../../base/utils/GUIUtil"),l=e("../../base/ColliderCallback"),u=cc.easeInOut,p=cc.easeOut,d=cc._decorator,f=d.ccclass,h=d.property;(function(e){e[e.FREE=0]="FREE",e[e.SLIDER=1]="SLIDER"})(a=o.StickHoldType||(o.StickHoldType={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stickHoldType=a.FREE,t.points=[],t.headCollider=null,t._active=!0,t.headRootPos=null,t.holdCallback=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this.getComponent(cc.PhysicsCircleCollider),t=this.getComponent(cc.PhysicsBoxCollider),o=this.getComponent(cc.BoxCollider),n=this.node.width-2*e.radius;o.size.height+=8,o.size.width=this.node.width-10,t.size.width=n;var i=2*e.radius+n/2;t.offset.x=-i,o.offset.x=-n/2-e.radius,this.stickHoldType===a.SLIDER&&(this.p0=this.points[0].position,this.p1=this.points[1].position,this.p0.x+=this.node.x,this.p0.y+=this.node.y,this.p1.x+=this.node.x,this.p1.y+=this.node.y),this.headCollider&&this.headCollider.setColliderCallback(this.onHeadCollider.bind(this))},t.prototype.onEnable=function(){this.headRootPos=this.node.position},t.prototype.onClick=function(){var e=this;if(this._active)if(this._active=!1,this.stickHoldType===a.FREE)(n=this.node.position).x+=1200,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.5,{position:n},u(2)).call(function(){e.holdCallback&&e.holdCallback(e)}).start();else if(this.stickHoldType===a.SLIDER){var t=this.node,o=s.default.getDistancePoints(t.position,this.p0),n=s.default.getDistancePoints(t.position,this.p1)>o?this.p1:this.p0;cc.Tween.stopAllByTarget(t),cc.tween(t).to(1.2,{position:n},u(3)).call(function(){e.holdCallback&&e.holdCallback(e),e._active=!0}).start()}},t.prototype.onHeadCollider=function(e){var t=this;if(e.node.group===c.GroupConfig.BERRIE&&e.node!=this.node){cc.log("onHeadCollider: "+e.node.name);var o=this.node;this.scheduleOnce(function(){cc.Tween.stopAllByTarget(o),cc.tween(o).to(.5,{position:t.headRootPos},p(1)).call(function(){t._active=!0}).start()},.01)}},t.prototype.setHoldCallback=function(e){this.holdCallback=e},t.prototype.onCollisionEnter=function(e){e.node.group===c.GroupConfig.TOUCH&&this.onClick()},r([h({type:cc.Enum(a)})],t.prototype,"stickHoldType",void 0),r([h({type:[cc.Node],visible:function(){return this.stickHoldType===a.SLIDER}})],t.prototype,"points",void 0),r([h(l.default)],t.prototype,"headCollider",void 0),r([f],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../base/ColliderCallback":"ColliderCallback","../../base/utils/GUIUtil":"GUIUtil","../../config/GroupConfig":"GroupConfig"}],StringUtil:[function(e,t,o){"use strict";cc._RF.push(t,"bfe30UxyK5LBZkfVpU92f7E","StringUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.StringUtil=void 0;var n=function(){function e(){}return e.toKMBString=function(e){var t="";return e<0&&(t+="-",e=-e),e>=this.ONE_BILLION?t+=Math.floor(100*e/this.ONE_BILLION)/100+"B":e>=this.ONE_MILLION?t+=Math.floor(100*e/this.ONE_MILLION)/100+"M":e>=this.ONE_THOUSAND?t+=Math.floor(100*e/this.ONE_THOUSAND)/100+"K":t+=e,t},e.preprocessingMoney=function(t){t=parseInt(t+"");var o=Math.abs(t)+"",n=e.preprocessingString(o);return t<0&&(n="-"+n),n},e.preprocessingString=function(e){if(e.length<4)return e+"";for(var t="",o=1,n=0;n<e.length;n++)t=e[e.length-1-n]+t,o%3==0&&o!==e.length&&(t=","+t),o++;return t},e.preprocessingMoneyWithK=function(e){return e<1e3?e+"":e>=1e6?this.preprocessingMoney(e/1e3)+"K":e/1e3+"K"},e.toMoneyResultString=function(e){var t="";return e>0?t+="+":e<0&&(t+="-",e=-e),e>=this.ONE_BILLION?t+=Math.floor(100*e/this.ONE_BILLION)/100+"B":e>=this.ONE_MILLION?t+=Math.floor(100*e/this.ONE_MILLION)/100+"M":e>=this.ONE_THOUSAND?t+=Math.floor(100*e/this.ONE_THOUSAND)/100+"K":t+=e,t},e.processTimeNumber=function(e){var t=Math.abs(e)+"";return t.length<=1?"0"+t:t},e.preprocessSignMoney=function(e){return e>0?"+"+this.preprocessingMoney(e):this.preprocessingMoney(e)},e.getDateOnly=function(e){return isNaN(Date.parse(e))?e:e.split(" ")[0]},e.parseNumberSecondToClock=function(e){if(e<=0)return"00:00:00";var t=Math.floor(e/3600);e%=3600;var o=Math.floor(e/60),n=e%60;return(t<10?"0"+t:""+t)+":"+(o<10?"0"+o:""+o)+":"+(n<10?"0"+n:""+n)},e.splitCountry=function(e){e||(e="");var t=e.split("_");return{name:t[0],countryCodes:t[1]}},e.getCodeLeaderBoardCountry=function(t,o){return o+"_"+e.splitCountry(t).countryCodes},e.ONE_BILLION=1e9,e.ONE_MILLION=1e6,e.ONE_THOUSAND=1e3,e}();o.StringUtil=n,cc._RF.pop()},{}],SwitchScreen:[function(e,t,o){"use strict";cc._RF.push(t,"43241BxiYNJLaC0BRzvJm6F","SwitchScreen");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blackImage=null,t}return i(t,e),t.prototype.start=function(){this.blackImage||(this.blackImage=this.node)},t.prototype.switch=function(e,t,o){var n=this;void 0===e&&(e=null),void 0===t&&(t=null),void 0===o&&(o=null),this.blackImage.opacity=0,this.blackImage.active=!0,cc.Tween.stopAllByTarget(this.blackImage),cc.tween(this.blackImage).to(.3,{opacity:255}).call(function(){e&&(e.active=!1),t&&(t.active=!0),o&&o()}).to(.3,{opacity:0}).call(function(){n.blackImage.active=!1}).start()},r([s(cc.Node)],t.prototype,"blackImage",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TagObject:[function(e,t,o){"use strict";cc._RF.push(t,"2f711BbpIFCeLUhgrTNsc6d","TagObject");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TagConfig=void 0;var a,c=cc._decorator,s=c.ccclass,l=c.property;(function(e){e[e.NONE=0]="NONE",e[e.BOSS=1]="BOSS",e[e.BOSS_STICK=2]="BOSS_STICK",e[e.GIRL=3]="GIRL",e[e.GIRL_WONDER=4]="GIRL_WONDER",e[e.BOSS_SUPER=5]="BOSS_SUPER",e[e.GEMS=99]="GEMS",e[e.LAVA=100]="LAVA",e[e.WATER=101]="WATER",e[e.SNOW=102]="SNOW",e[e.ROCK=103]="ROCK",e[e.BIG_ROCK=104]="BIG_ROCK",e[e.ICE=105]="ICE",e[e.GAS=106]="GAS",e[e.BOMB=107]="BOMB",e[e.SAW=108]="SAW",e[e.POW=109]="POW",e[e.TRAP=110]="TRAP",e[e.BULLET=111]="BULLET",e[e.FIRE_BALL=112]="FIRE_BALL",e[e.HOLY_WATER=113]="HOLY_WATER",e[e.LAZE=114]="LAZE",e[e.BOOM_TIMER=115]="BOOM_TIMER",e[e.TRAP_ANIMAL=116]="TRAP_ANIMAL",e[e.STEALER=200]="STEALER",e[e.DEMON=201]="DEMON",e[e.BIGFOOT=202]="BIGFOOT",e[e.DRAGON=203]="DRAGON",e[e.DOG=204]="DOG",e[e.SHOOTER=205]="SHOOTER",e[e.GHOSTER=206]="GHOSTER",e[e.CHEST=299]="CHEST",e[e.ITEM=300]="ITEM",e[e.STICK=301]="STICK",e[e.MEAT=302]="MEAT",e[e.REDIRECT_LEFT=303]="REDIRECT_LEFT",e[e.REDIRECT_RIGHT=304]="REDIRECT_RIGHT",e[e.REDIRECT_STOP=305]="REDIRECT_STOP",e[e.HIT=1e3]="HIT"})(a=o.TagConfig||(o.TagConfig={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag=a.NONE,t.tag2=a.NONE,t}return i(t,e),t.prototype.onLoad=function(){this.node.name=""+this.tag},t.prototype.setTag=function(e){this.tag=e,this.node.name=""+this.tag},t.prototype.setTag2=function(e){this.tag2=e},r([l({type:cc.Enum(a)})],t.prototype,"tag",void 0),r([l({type:cc.Enum(a)})],t.prototype,"tag2",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],Task:[function(e,t,o){"use strict";cc._RF.push(t,"48773qwl0FBG4Q1DVTbXLY/","Task"),Object.defineProperty(o,"__esModule",{value:!0}),o.TaskManager=o.Task=void 0;var n=function(){function e(e){this._callback=e}return e.prototype.completed=function(){this._completeCallback&&this._completeCallback()},e}();o.Task=n;var i=function(){function e(){this.tasks=[]}return e.prototype.addTask=function(e){this.tasks.push(e)},e.prototype.run=function(e,t){var o=this;if(0!==this.tasks.length){var n=this.tasks.length;e(0,n);for(var i=function(t){r.tasks[t]._completeCallback=function(){e(t+1,n),o.tasks[t+1]._callback()}},r=this,a=0;a<n-1;a++)i(a);this.tasks[n-1]._completeCallback=function(){e(n,n),t()},this.tasks[0]._callback()}else t()},e}();o.TaskManager=i,cc._RF.pop()},{}],TeleportCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"e80e6lh7qBFrY1MnqJXG1tn","TeleportCtrl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../base/ColliderCallback"),c=e("../../config/GroupConfig"),s=e("../../config/TagObject"),l=e("./Bullet"),u=e("./FireBall"),p=cc.easeOut,d=cc._decorator,f=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listPort=[],t.listObj=[],t}return i(t,e),t.prototype.onLoad=function(){var e=this;if(this.node.children.forEach(function(t){var o=t.getComponent(a.default);o&&e.listPort.push(o)}),cc.log("Init Teleport: Length = "+this.listPort.length),!(this.listPort.length<2))for(var t=function(t){var n=o.listPort[t].node,i=t===o.listPort.length-1?0:t+1,r=o.listPort[i].node;o.listPort[t].setColliderCallback(function(t){if(t.node.group===c.GroupConfig.CHARACTER)e.moveTo(t.node.getParent().getParent(),n,r);else if(t.node.group===c.GroupConfig.COLLIDER&&t.node.width*t.node.height>0){var o=null;if(t.node.name==s.TagConfig.HIT){var i=t.node.getComponent(s.default).tag2;i==s.TagConfig.BULLET?o=e.onMoveBullet:i==s.TagConfig.FIRE_BALL&&(o=e.onMoveFireball)}e.moveTo(t.node,n,r,function(){o&&o(t.node)})}})},o=this,n=0;n<this.listPort.length;n++)t(n)},t.prototype.onMoveBullet=function(e){var t=500/l.default.velocityHit;cc.tween(e).by(t,{position:new cc.Vec3(500,0,0)}).call(function(){e.active=!1,e.removeFromParent()}).start()},t.prototype.onMoveFireball=function(e){var t=400/u.default.velocityHit,o=cc.jumpBy(t,cc.v2(400,-200),400/7,1);e.runAction(cc.sequence(o,cc.callFunc(function(){e.active=!1,e.removeFromParent()})))},t.prototype.moveTo=function(e,t,o,n){var i=this;if(void 0===n&&(n=null),cc.log("Teleport move "+e.group),-1==this.listObj.indexOf(e)){this.listObj.push(e);var r=e.scaleX,a=e.scaleY,c=e.getParent().convertToNodeSpaceAR(t.getParent().convertToWorldSpaceAR(t.position)),s=e.getParent().convertToNodeSpaceAR(o.getParent().convertToWorldSpaceAR(o.position));cc.Tween.stopAllByTarget(e),cc.tween(e).to(.35,{position:c,scaleX:0,scaleY:0},p(2)).call(function(){e.position=s}).to(.2,{scaleX:r,scaleY:a},p(2)).call(function(){cc.log("Teleport move done "+(new Date).getTime());var t=i.listObj.indexOf(e);-1!=t&&i.listObj.splice(t,1),n&&n()}).start()}},r([f],t)}(cc.Component));o.default=h,cc._RF.pop()},{"../../base/ColliderCallback":"ColliderCallback","../../config/GroupConfig":"GroupConfig","../../config/TagObject":"TagObject","./Bullet":"Bullet","./FireBall":"FireBall"}],TestPhysics:[function(e,t,o){"use strict";cc._RF.push(t,"7047dYKXU1Dt6HAam9U89Vs","TestPhysics");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onClick=function(){cc.tween(this.node).by(.1,{position:new cc.Vec3(700,0,0)}).start()},r([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],TestSkeleton:[function(e,t,o){"use strict";cc._RF.push(t,"e04b2/qKM9HOLZ/xuDYNMPc","TestSkeleton");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t}return i(t,e),t.prototype.changeSkin=function(){this.skeleton.setSkin("Boss0/Stick"),this.skeleton.setSlotsToSetupPose(),this.skeleton.setAnimation(0,"Idle",!0)},t.prototype.onEnable=function(){cc.log("TestSkeleton")},r([s(sp.Skeleton)],t.prototype,"skeleton",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TimerController:[function(e,t,o){"use strict";cc._RF.push(t,"5007cud3XlE15W4VgiajdO6","TimerController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/AudioPlayId"),c=e("../../config/GroupConfig"),s=e("../../MainScene"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boomTimer=null,t.leverHandle=null,t}return i(t,e),t.prototype.onCollisionEnter=function(e){if(e.node.group===c.GroupConfig.CHARACTER||e.node.group===c.GroupConfig.ROCK){var t=this.boomTimer.getComponent("BoomTimer");t.onSwitch=!0,this.animationOn(),t.detonActivation()}},t.prototype.animationOn=function(){cc.tween(this.leverHandle).to(.2,{angle:-10,position:cc.v3(this.leverHandle.position.x,this.leverHandle.position.y,this.leverHandle.position.z)}).start(),s.default.instance.audioPlayer.playAudio(a.AudioPlayId.stick_move)},r([p(cc.Node)],t.prototype,"boomTimer",void 0),r([p(cc.Node)],t.prototype,"leverHandle",void 0),r([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../MainScene":"MainScene","../../config/AudioPlayId":"AudioPlayId","../../config/GroupConfig":"GroupConfig"}],ToastReward:[function(e,t,o){"use strict";cc._RF.push(t,"e3b8cf5NOVAqZVszbj4A2Y4","ToastReward");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc.easeBackOut,c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return i(t,e),t.prototype.show=function(e,t){var o=this;e<0?cc.warn("Reward = "+e):(this.label.string="+"+e,this.node.active=!0,this.node.opacity=0,this.node.scale=.4,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.2,{opacity:255,scale:1},a()).delay(t).call(function(){o.hide()}).start())},t.prototype.hide=function(){var e=this;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.5,{opacity:0}).call(function(){e.node.active=!1}).start()},r([l(cc.Label)],t.prototype,"label",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],ToggleSliderGroup:[function(e,t,o){"use strict";cc._RF.push(t,"4e0b2j91yNIqqpERehDI5ZE","ToggleSliderGroup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ToggleSlider"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleOn=null,t.toggleOff=null,t.isOn=!0,t.onClickCallback=null,t}return i(t,e),t.prototype.toggle=function(){this.setToggleState(!this.isOn)},t.prototype.setToggleState=function(e,t){void 0===t&&(t=!0),this.isOn=e,this.toggleOn.setToggleState(e,t),this.toggleOff.setToggleState(!e,t),this.onClickCallback&&this.onClickCallback(e)},t.prototype.setOnClickCallback=function(e){this.onClickCallback=e},r([l(a.default)],t.prototype,"toggleOn",void 0),r([l(a.default)],t.prototype,"toggleOff",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./ToggleSlider":"ToggleSlider"}],ToggleSlider:[function(e,t,o){"use strict";cc._RF.push(t,"3df517scY9F7pmGd1WW8uMz","ToggleSlider");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.dotSlider=null,t.p1=new cc.Vec3,t.p2=new cc.Vec3,t.isOn=!1,t}return i(t,e),t.prototype.onLoad=function(){this.p1.x=-this.dotSlider.position.x,this.p1.y=this.dotSlider.position.y,this.p2.x=this.dotSlider.position.x,this.p2.y=this.dotSlider.position.y},t.prototype.toggle=function(){this.setToggleState(!this.isOn)},t.prototype.setToggleState=function(e,t){void 0===t&&(t=!0),this.isOn=e,e?(this.node.active=!0,t?(this.dotSlider.position=this.p1,cc.tween(this.dotSlider).to(.2,{position:this.p2}).start()):this.dotSlider.position=this.p2):this.node.active=!1},r([s(cc.Label)],t.prototype,"label",void 0),r([s(cc.Node)],t.prototype,"dotSlider",void 0),r([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TouchManager:[function(e,t,o){"use strict";cc._RF.push(t,"dc0adXk/RtCCZVCopuiIlm/","TouchManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../level/MapLevel"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchCollision=null,t.moving=!1,t}var o;return i(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._instance=this},t.prototype.onDestroy=function(){o._instance=null},t.prototype.onEnable=function(){cc.log("init TouchManager"),this.node.on(cc.Node.EventType.TOUCH_START,this.onMouseDown.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMouseMove.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onMouseUp.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,this.onMouseUp.bind(this))},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onMouseDown.bind(this)),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onMouseMove.bind(this)),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onMouseUp.bind(this)),this.node.off(cc.Node.EventType.TOUCH_END,this.onMouseUp.bind(this))},t.prototype.onMouseDown=function(e){a.default.instance&&a.default.instance.isPlaying?(this.moving=!0,this.touchCollision.active=!0,this.touchCollision.position=this.node.convertToNodeSpaceAR(e.getLocation())):this.reset()},t.prototype.onMouseMove=function(e){this.moving&&(this.touchCollision.position=this.node.convertToNodeSpaceAR(e.getLocation()))},t.prototype.onMouseUp=function(){this.reset()},t.prototype.reset=function(){this.moving=!1,this.touchCollision.active=!1},t._instance=null,r([l(cc.Node)],t.prototype,"touchCollision",void 0),o=r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../level/MapLevel":"MapLevel"}],UserPlayFab:[function(e,t,o){"use strict";cc._RF.push(t,"73ec3RTDTdJOK3klBfrcKqq","UserPlayFab"),Object.defineProperty(o,"__esModule",{value:!0}),o.StatisticNameConfig=void 0;var n={titleId:"D1FDC",developerSecretKey:"PY46RZPHSEPFWQOFURG45WHHW41Z81UGFOGIMP9X7X8S8U8YCF",userEmail:"put valid email associated with an existing account here",extraHeaders:{}},i=e("./base/Signal"),r=e("./base/utils/ArrayUtil");o.StatisticNameConfig={BEST_LEVEL:"BestLevel",DAILYDATA:"DailyData"};var a=function(){function e(){}return e.SetUp=function(e){void 0===e&&(e={});var t=e.hasOwnProperty("titleId")&&null!=e.titleId;return t?this.titleData=e:(this.titleData=n,console.log("testTitleData input file did not parse correctly")),PlayFab.settings.titleId=this.titleData.titleId,PlayFab.settings.developerSecretKey=this.titleData.developerSecretKey,PlayFab.settings.GlobalHeaderInjection=this.titleData.extraHeaders,t},e.LoginWithFacebookInstantGamesId=function(){FBInstant.player.getSignedPlayerInfoAsync().then(function(t){var o={TitleId:"",FacebookInstantGamesSignature:t.getSignature(),CreateAccount:!0,InfoRequestParameters:{GetPlayerProfile:!0,ProfileConstraints:{ShowAvatarUrl:!0,ShowDisplayName:!0},GetUserData:!0,GetPlayerStatistics:!0}};console.log("login fb"),Promise.resolve(PlayFabClientSDK.LoginWithFacebookInstantGamesId(o,e.OnLoginCallBack))})},e.LoginWithCustomID=function(){return Promise.resolve(PlayFabClientSDK.LoginWithCustomID({TitleId:"D1FDC",CustomId:"155DCc669868",CreateAccount:!0,InfoRequestParameters:{GetPlayerProfile:!0,ProfileConstraints:{ShowAvatarUrl:!0,ShowDisplayName:!0},GetUserData:!0,GetPlayerStatistics:!0}},e.OnLoginCallBack))},e.UpdateUserCountryCode=function(e){var t={UserCountryCode:e};this.UpdateDataUser(t)},e.OnLoginCallBack=function(t,o){if(!o){if(e.loginsuccessful=!0,e.LoginCallBackSignal.dispatch(),e.PlayFabId=r.default.getValue(t.data,"PlayFabId",""),e.DisplayName=r.default.getValue(t.data.InfoResultPayload.PlayerProfile,"DisplayName",""),t.data.NewlyCreated&&FBInstant.player.getSignedPlayerInfoAsync().then(function(e){var t={FacebookInstantGamesSignature:e.getSignature(),ForceLink:!0};PlayFabClientSDK.LinkFacebookInstantGamesId(t,function(e){console.log(e,"link")})}),t.data.InfoResultPayload){var n=t.data.InfoResultPayload.UserData;if(n){e.UserCountryCode=r.default.getValue(n,"UserCountryCode","");var i=r.default.getValue(n,"EventData",null);i&&(e.EventData=i.Value);var a=r.default.getValue(n,"DailyData",null);a&&(e.DailyData=a.Value)}}""==e.DisplayName&&e.UpdateAvatarVsDisPlayName()}},e.UpdateAvatarVsDisPlayName=function(){try{var t=FBInstant.player.getName();""!=e.UserCountryCode&&(t=t+"_"+e.UserCountryCode);var o={DisplayName:t};PlayFabClientSDK.UpdateUserTitleDisplayName(o,function(e){e&&console.log("updatedisplayname")})}catch(n){}},e.SaveDailyData=function(t){var o=JSON.stringify(t);e.DailyData=o,e.UpdateDataUser({DailyData:o})},e.UpdateDataUser=function(e){var t={Data:e};PlayFabClientSDK.UpdateUserData(t,function(e,t){t&&console.log("fail save data"),console.log("done save data")})},e.GetDataUser=function(t,o){var n={PlayFabId:e.PlayFabId,Keys:t};PlayFabAdminSDK.GetUserData(n,o)},e.getMyRankLeadBoard=function(e,t){var o={StatisticName:e,MaxResultsCount:1,ProfileConstraints:{ShowAvatarUrl:!0,ShowDisplayName:!0}};PlayFabClientSDK.GetLeaderboardAroundPlayer(o,t)},e.setLeaderborad=function(e,t,o){var n={Statistics:[{StatisticName:t,Value:e}]};PlayFabClientSDK.UpdatePlayerStatistics(n,o)},e.getRankLeadBoard=function(e,t,o,n){var i={StartPosition:t,StatisticName:e,MaxResultsCount:o,ProfileConstraints:{ShowAvatarUrl:!0,ShowDisplayName:!0}};PlayFabClientSDK.GetLeaderboard(i,n)},e.UpdateDisPlayName=function(e,t){var o={DisplayName:e};PlayFabClientSDK.UpdateUserTitleDisplayName(o,t)},e.UpdateAvatar=function(e,t){var o={ImageUrl:e};PlayFabClientSDK.UpdateAvatarUrl(o,t)},e.loginsuccessful=!1,e.UserCountryCode="",e.EventData="",e.DailyData="",e.PlayFabId="",e.DisplayName="",e.LoginCallBackSignal=new i.Signal,e}();o.default=a,cc._RF.pop()},{"./base/Signal":"Signal","./base/utils/ArrayUtil":"ArrayUtil"}],Utf8:[function(e,t,o){"use strict";cc._RF.push(t,"3334eM32qZDoa95PQXWOPUh","Utf8"),Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8=void 0;var n=e("./Latin1"),i=function(){function e(){}return e.stringify=function(e){try{return decodeURIComponent(escape(n.Latin1.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},e.parse=function(e){return n.Latin1.parse(unescape(encodeURIComponent(e)))},e}();o.Utf8=i,cc._RF.pop()},{"./Latin1":"Latin1"}],WaterGO:[function(e,t,o){"use strict";cc._RF.push(t,"e8ed1MjmJVIJ6/Y/dlAHXfS","WaterGO");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../config/GroupConfig"),c=e("../../config/TagObject"),s=e("../../config/AudioPlayId"),l=e("../../level/MapLevel"),u=e("../../MainScene"),p=e("../../config/PhysicsConfig"),d=cc._decorator,f=d.ccclass,h=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.border=null,t.drop=null,t.rockPrefab=null,t.icePrefab=null,t.available=!0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){p.PhysicsConfig.initPhysicConfig(this.node,"water")},t.prototype.start=function(){this.border.active=!0,this.drop.active=!0,o.isTransform=!1,o.colliderBarrieCount=0;var e=this.getComponent(cc.Sprite);e&&(e.enabled=!1)},t.prototype.onDisable=function(){this.unscheduleAllCallbacks()},t.prototype.transformToRock=function(e){var t=l.default.instance.rockContainer,n=cc.instantiate(e);n.position=t.convertToNodeSpaceAR(this.node.getParent().convertToWorldSpaceAR(this.node.position)),n.parent=t,this.node.removeFromParent(),!o.isTransform&&l.default.instance.isPlaying&&(u.default.instance.audioPlayer.playAudio(s.AudioPlayId.effect_lava_x_water),o.isTransform=!0)},t.prototype.onCollisionEnter=function(e){var t=this;if(this.available){if(e.node.group===a.GroupConfig.BERRIE)return o.colliderBarrieCount++,void(3===o.colliderBarrieCount&&(u.default.instance.audioPlayer.playAudio(s.AudioPlayId.effect_lava_appear),this.scheduleOnce(function(){o.colliderBarrieCount=0},2)));var n=null;switch(e.node.group){case a.GroupConfig.ROCK:n=e.node.name==c.TagConfig.ROCK?this.rockPrefab:this.icePrefab;break;case a.GroupConfig.LAVA:n=this.rockPrefab;break;case a.GroupConfig.SNOW:n=this.icePrefab}n&&(this.available=!1,this.scheduleOnce(function(){t.transformToRock(n)},.2))}},t.isTransform=!1,t.colliderBarrieCount=0,r([h(cc.Node)],t.prototype,"border",void 0),r([h(cc.Node)],t.prototype,"drop",void 0),r([h(cc.Prefab)],t.prototype,"rockPrefab",void 0),r([h(cc.Prefab)],t.prototype,"icePrefab",void 0),o=r([f],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../MainScene":"MainScene","../../config/AudioPlayId":"AudioPlayId","../../config/GroupConfig":"GroupConfig","../../config/PhysicsConfig":"PhysicsConfig","../../config/TagObject":"TagObject","../../level/MapLevel":"MapLevel"}],WinPanel:[function(e,t,o){"use strict";cc._RF.push(t,"49d10hGJHpIfIQtdvk9YuUz","WinPanel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameData"),c=e("../objects/character/Boss/Boss"),s=e("../config/GameConfig"),l=cc.Camera,u=cc.easeOut,p=e("../base/audio/AudioManager"),d=e("../MainScene"),f=e("../base/glance_Global"),h=e("../SetLanguage"),y=cc._decorator,g=y.ccclass,_=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelLabel=null,t.changeCoinLabel=null,t.camera=null,t.cameraScale=1.66,t.winNode=null,t.loseNode=null,t}return i(t,e),t.prototype.onEnable=function(){if(this.node.scale=3,this.node.position=new cc.Vec3(100,-cc.winSize.height/2,0),this.levelLabel.string=h.ChangeLanguage.getText("level")+" "+(a.GameData.currentLevelId+1),c.default.instance){var e=1/this.cameraScale,t=c.default.instance.node.position,o=(cc.winSize.height-1280)*e;t.y-=o+60,this.focusPanelTo(t,e,.3),this.focusCameraTo(t,this.cameraScale,.3)}else cc.log("Boss.instance is null")},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.camera),cc.Tween.stopAllByTarget(this.camera.node),this.camera.zoomRatio=1,this.camera.node.position=cc.Vec3.ZERO},t.prototype.showWin=function(){this.winNode.active=!0,this.loseNode.active=!1,this.node.active=!0,this.showChangeCoin(s.GameConfig.coin_level_up)},t.prototype.showLose=function(){this.winNode.active=!1,this.loseNode.active=!0,this.node.active=!0,f.default.instance.sendEventGameEnd(a.GameData.currentLevelId+1)},t.prototype.hide=function(){this.node.active=!1},t.prototype.showChangeCoin=function(e){a.GameData.addCoin(e),this.changeCoinLabel.string="+"+e},t.prototype.focusPanelTo=function(e,t,o){void 0===o&&(o=.2),cc.tween(this.node).to(o,{position:e,scale:t},u(5)).start()},t.prototype.focusCameraTo=function(e,t,o){void 0===o&&(o=.2),this.camera.node.position=e,cc.tween(this.camera).to(o,{zoomRatio:t}).start()},t.prototype.onClickShowAdsToReceiveBonus=function(){f.default.instance.effectSoundState=p.default.EffectEnable,f.default.instance.musicSoundState=p.default.MusicEnable,d.default.instance.rewardType="watch",f.default.instance.sendEventReward(),f.default.instance.rewardEvent()},t.prototype.onClickShowAdsToSkipLevel=function(){f.default.instance.effectSoundState=p.default.EffectEnable,f.default.instance.musicSoundState=p.default.MusicEnable,d.default.instance.rewardType="skip",f.default.instance.sendEventReward(),f.default.instance.rewardEvent()},r([_(cc.Label)],t.prototype,"levelLabel",void 0),r([_(cc.Label)],t.prototype,"changeCoinLabel",void 0),r([_(l)],t.prototype,"camera",void 0),r([_(cc.Float)],t.prototype,"cameraScale",void 0),r([_(cc.Node)],t.prototype,"winNode",void 0),r([_(cc.Node)],t.prototype,"loseNode",void 0),r([g],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../GameData":"GameData","../MainScene":"MainScene","../SetLanguage":"SetLanguage","../base/audio/AudioManager":"AudioManager","../base/glance_Global":"glance_Global","../config/GameConfig":"GameConfig","../objects/character/Boss/Boss":"Boss"}],WordArray:[function(e,t,o){"use strict";cc._RF.push(t,"1740aPVA7pFNq+ypDP1ARNo","WordArray"),Object.defineProperty(o,"__esModule",{value:!0}),o.WordArray=void 0;var n=e("../enc/Hex"),i=function(){function e(e,t){this.words=e||[],this.sigBytes=void 0!==t?t:4*this.words.length}return e.random=function(t){for(var o=[],n=function(e){var t=987654321,o=4294967295;return function(){var n=((t=36969*(65535&t)+(t>>16)&o)<<16)+(e=18e3*(65535&e)+(e>>16)&o)&o;return n/=4294967296,(n+=.5)*(Math.random()>.5?1:-1)}},i=0,r=void 0;i<t;i+=4){var a=n(4294967296*(r||Math.random()));r=987654071*a(),o.push(4294967296*a()|0)}return new e(o,t)},e.prototype.toString=function(e){return(e||n.Hex).stringify(this)},e.prototype.concat=function(e){if(this.clamp(),this.sigBytes%4)for(var t=0;t<e.sigBytes;t++){var o=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=o<<24-(this.sigBytes+t)%4*8}else for(t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];return this.sigBytes+=e.sigBytes,this},e.prototype.clamp=function(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)},e.prototype.clone=function(){return new e(this.words.slice(0),this.sigBytes)},e}();o.WordArray=i,cc._RF.pop()},{"../enc/Hex":"Hex"}],"crypto-ts":[function(e,t,o){"use strict";cc._RF.push(t,"6ad71ENhsBPeYpe5u6RElqq","crypto-ts"),Object.defineProperty(o,"__esModule",{value:!0}),o.SHA256=o.AES=o.mode=o.pad=o.enc=o.algo=o.lib=void 0;var n=e("./lib/WordArray"),i=e("./lib/BlockCipher"),r=e("./lib/CipherParams"),a=e("./lib/Hasher"),c=e("./lib/SerializableCipher"),s=e("./lib/PasswordBasedCipher");o.lib={BlockCipher:i.BlockCipher,WordArray:n.WordArray,CipherParams:r.CipherParams,Hasher:a.Hasher,SerializableCipher:c.SerializableCipher,PasswordBasedCipher:s.PasswordBasedCipher};var l=e("./algo/AES"),u=e("./algo/SHA256");o.algo={AES:l.AES,SHA256:u.SHA256};var p=e("./enc/Utf8"),d=e("./enc/Hex");o.enc={Utf8:p.Utf8,Hex:d.Hex};var f=e("./pad/NoPadding"),h=e("./pad/PKCS7");o.pad={NoPadding:f.NoPadding,PKCS7:h.PKCS7};var y=e("./mode/CBC"),g=e("./mode/ECB");o.mode={CBC:y.CBC,ECB:g.ECB},o.AES=o.lib.BlockCipher._createHelper(o.algo.AES),o.SHA256=o.lib.Hasher._createHelper(o.algo.SHA256),cc._RF.pop()},{"./algo/AES":"AES","./algo/SHA256":"SHA256","./enc/Hex":"Hex","./enc/Utf8":"Utf8","./lib/BlockCipher":"BlockCipher","./lib/CipherParams":"CipherParams","./lib/Hasher":"Hasher","./lib/PasswordBasedCipher":"PasswordBasedCipher","./lib/SerializableCipher":"SerializableCipher","./lib/WordArray":"WordArray","./mode/CBC":"CBC","./mode/ECB":"ECB","./pad/NoPadding":"NoPadding","./pad/PKCS7":"PKCS7"}],glance_Global:[function(e,t,o){"use strict";cc._RF.push(t,"89490h675BImZBn7u+0y4f4","glance_Global");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameData"),c=e("../HomeScreen"),s=e("../MainScene"),l=e("../PlayScreen"),u=e("../ResUtil"),p=e("../config/GameConfig"),d=e("../config/GlobalSignals"),f=e("./audio/AudioManager"),h=cc._decorator,y=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardType="",t.isPlayAd=!1,t.effectSoundState=!1,t.musicSoundState=!1,t.levelBefore=0,t}var o;return i(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return o._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._instance=this,window.rewardDone=function(){if("watch"==s.default.instance.rewardType){var e=p.GameConfig.coin_level_bonus;cc.log("onClickShowAdsToReceiveBonus: bonus = "+e),a.GameData.addCoin(e),l.default.instance.nextLevel(null,!0),l.default.instance.showToastReward(e,2,.5),cc.audioEngine.resumeMusic()}else"skip"==s.default.instance.rewardType?(a.GameData.saveLevelUp(),l.default.instance.nextLevel(null,!0)):"claim"==s.default.instance.rewardType&&watchSkin();f.default.EffectEnable=o._instance.effectSoundState,f.default.MusicEnable=o._instance.musicSoundState},window.rewardFail=function(){f.default.EffectEnable=o._instance.effectSoundState,f.default.MusicEnable=o._instance.musicSoundState},window.replayDone=function(){f.default.EffectEnable=o._instance.effectSoundState,f.default.MusicEnable=o._instance.musicSoundState},window.pauseEvent=function(){cc.director.pause()},window.resumeEvent=function(){cc.director.resume()},window.replayGameEvent=function(){l.default.instance.loadCurrentLevel(!1)},window.nextLevelEvent=function(){a.GameData.saveLevelUp(),l.default.instance.loadLevel(a.GameData.currentLevelId)},window.gotoHomeEvent=function(){s.default.instance.showHomeScreen(function(e){e.getComponent(c.default).activeHomeUI()})},window.gotoLevel=function(e){e>0&&(l.default.instance.unscheduleAllCallbacks(),o.instance.levelBefore?(u.ResUtil.releaseLevelById(o.instance.levelBefore),o.instance.levelBefore=e-1):o.instance.levelBefore=e-1,a.GameData.currentLevelId=e-1,a.GameData.currentLevelId>a.GameData.levelSize?a.GameData.currentLevelReal=0:a.GameData.currentLevelReal=e-1,l.default.instance.loadLevel(e-1),a.GameData.saveLevel())},window.enableSound=function(e){1!=o.instance.isPlayAd&&(f.default.EffectEnable=e,f.default.MusicEnable=e,d.GlobalSignals.updateToggleSound.dispatch())}},t.prototype.sendEventLoad=function(){sendCustomAnalyticsEvent("game_load",{})},t.prototype.sendEventStart=function(){sendCustomAnalyticsEvent("game_start",{})},t.prototype.sendEventLevel=function(e){sendCustomAnalyticsEvent("game_level",{level:e})},t.prototype.sendEventReplay=function(e){sendCustomAnalyticsEvent("game_replay",{level:e,score:0,highScore:0})},t.prototype.sendEventGameEnd=function(e){sendCustomAnalyticsEvent("game_end",{level:e,score:0,highScore:0})},t.prototype.sendEventLifeEnd=function(e){sendCustomAnalyticsEvent("game_life_end",{level:e,score:0,highScore:0,remainingLife:0})},t.prototype.sendEventLevelComplete=function(e){sendCustomAnalyticsEvent("level_completed",{level:e})},t.prototype.sendEventReward=function(){sendCustomAnalyticsEvent("rewarded_ad",{successCB:rewardDone,failureCB:rewardFail})},t.prototype.sendEventransactions=function(e,t){sendCustomAnalyticsEvent("ingame_transactions",{transactionType:t,meta:null,level:e,score:0,highScore:0})},t.prototype.rewardEvent=function(){f.default.EffectEnable=!1,f.default.MusicEnable=!1,rewardEvent()},t.prototype.replayEvent=function(){f.default.EffectEnable=!1,f.default.MusicEnable=!1,replayEvent()},t._instance=null,o=r([y],t)}(cc.Component));o.default=g,cc._RF.pop()},{"../GameData":"GameData","../HomeScreen":"HomeScreen","../MainScene":"MainScene","../PlayScreen":"PlayScreen","../ResUtil":"ResUtil","../config/GameConfig":"GameConfig","../config/GlobalSignals":"GlobalSignals","./audio/AudioManager":"AudioManager"}],index:[function(e,t,o){"use strict";cc._RF.push(t,"30180Ip+SVOjKHh++JZRJKF","index");var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(o,"__esModule",{value:!0}),i(e("./Utf8"),o),cc._RF.pop()},{"./Utf8":"Utf8"}],"mesh-texture-mask":[function(e,t){"use strict";function o(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=n(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=e[Symbol.iterator]()).next.bind(o)}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}cc._RF.push(t,"2b916xDwOJDaq/ZFI4mGP7k","mesh-texture-mask");var r=cc.gfx;cc.Class({extends:cc.Component,editor:!1,properties:{_temp_refresh:!1,temp_refresh:{displayName:"Refresh",type:cc.Boolean,get:function(){return this._temp_refresh},set:function(e){this._temp_refresh=e,this._applyVertexes()}},_offset:cc.v2(0,0),offset:{get:function(){return this._offset},set:function(e){this._offset=e,this.temp_refresh,this._applyVertexes()},type:cc.Vec2},_spriteFrame:{default:null,type:cc.SpriteFrame},spriteFrame:{get:function(){return this._spriteFrame},set:function(e){this._spriteFrame=e,this._applySpriteFrame()},type:cc.SpriteFrame},_vertexes:{default:function(){return[cc.v2(-50,-50),cc.v2(50,-50),cc.v2(50,50),cc.v2(-50,50)]},type:[cc.Vec2]},vertexes:{tooltip:"Polygon",get:function(){return this._vertexes},set:function(e){this._vertexes=e,this._updateMesh(),this.temp_refresh,this._applyVertexes()},type:[cc.Vec2]}},onLoad:function(){this._meshCache={},this._updateMesh();var e=this.node.getComponent(cc.MeshRenderer);e||(e=this.node.addComponent(cc.MeshRenderer)),e.mesh=null,this.renderer=e;var t=cc.Material.getBuiltinMaterial("unlit");e.setMaterial(0,t),this._applySpriteFrame(),this._applyVertexes()},_updateMesh:function(){var e=this._meshCache[this.vertexes.length];e||((e=new cc.Mesh).init(new r.VertexFormat([{name:r.ATTR_POSITION,type:r.ATTR_TYPE_FLOAT32,num:2},{name:r.ATTR_UV0,type:r.ATTR_TYPE_FLOAT32,num:2}]),this.vertexes.length,!0),this._meshCache[this.vertexes.length]=e),this.mesh=e},_applyVertexes:function(){var e=this,t=this.mesh;if(t.setVertices(r.ATTR_POSITION,this.vertexes),this.texture){for(var n,i=[],a=o(this.vertexes);!(n=a()).done;){var c=n.value,s=(c.x+this.texture.width/2+this.offset.x)/this.texture.width,l=1-(c.y+this.texture.height/2+this.offset.y)/this.texture.height;i.push(cc.v2(s,l))}t.setVertices(r.ATTR_UV0,i)}if(this.vertexes.length>=3){for(var u=[],p=[].concat(this.vertexes),d=0,f=-1;p.length>3;){var h=p[d],y=p[(d+1)%p.length],g=p[(d+2)%p.length],_=y.sub(h),v=g.sub(y);if(_.cross(v)>=0){for(var m,b=!1,C=o(p);!(m=C()).done;){var P=m.value;if(P!==h&&P!==y&&P!==g&&this._testInTriangle(P,h,y,g)){b=!0;break}}if(b){if((d=(d+1)%p.length)===f){cc.log("\u5faa\u73af\u4e00\u5708\u672a\u53d1\u73b0");break}}else u=u.concat([this.vertexes.indexOf(h),this.vertexes.indexOf(y),this.vertexes.indexOf(g)]),p.splice(p.indexOf(y),1),f=d}else if((d=(d+1)%p.length)===f){cc.log("\u5faa\u73af\u4e00\u5708\u672a\u53d1\u73b0");break}d>p.length-1&&(d=p.length-1)}u=u.concat(p.map(function(t){return e.vertexes.indexOf(t)})),t.setIndices(u),this.renderer.mesh!=t&&(this.renderer.mesh=t)}},_testInTriangle:function(e,t,o,n){var i=o.sub(t),r=n.sub(t),a=n.sub(o),c=e.sub(t),s=e.sub(o);return i.cross(r)>=0^i.cross(c)<0&&i.cross(r)>=0^r.cross(c)>=0&&a.cross(i)>0^a.cross(s)>=0},_applySpriteFrame:function(){if(this.spriteFrame){var e=this.renderer._materials[0],t=this.spriteFrame.getTexture();e.define("USE_DIFFUSE_TEXTURE",!0),e.setProperty("diffuseTexture",t),this.texture=t}}}),cc._RF.pop()},{}]},{},["BackgroundLoader","CastleScreen","GameData","HomeScreen","Language","Loading","LoadingScene","MainScene","PlayScreen","PrefabManager","PrefabType","ResUtil","ScreenManager","SetLanguage","UserPlayFab","ActiveBox","ActiveFun","CaptureTexture","ColliderCallback","LocalStorageManager","NodeFixSize","NumberUpdater","ParticleLoop","PhysicalEnable","PlayerCoinUpdater","PopupDisplay","RenderMask","Signal","SignalBinding","SwitchScreen","Task","TouchManager","FrameByFrame","RotateByRepeatAnim","RotateByRepeatAnimX2","ScaleRepeatAnim","AudioManager","AudioPlayer","MyAudioPlayer","AES","EvpKDF","MD5","SHA256","crypto-ts","Base64","Encoding","Hex","Latin1","Utf8","index","Formatter","OpenSSL","KDF","OpenSSLKdf","Base","BlockCipher","BufferedBlockAlgorithm","BufferedBlockAlgorithmConfig","Cipher","CipherParams","CipherParamsInterface","Hasher","PasswordBasedCipher","SerializableCipher","WordArray","BlockCipherMode","BlockCipherModeAlgorithm","CBC","CBCDecryptor","CBCEncryptor","ECB","ECBDecryptor","ECBEncryptor","NoPadding","PKCS7","Padding","glance_Global","mesh-texture-mask","ToggleSlider","ToggleSliderGroup","ArrayUtil","GUIUtil","MMFollowTarget","MathUtil","StringUtil","BuildHousePopup","HouseBuilder","HouseItem","Kingdom","KingdomBuilder","KingdomItem","ChooseCountryPopup","ItemChooseCountry","AudioPlayId","CountryConfig","FeatureSkinConfig","GameConfig","GameState","GlobalSignals","GroupConfig","KingdomConfig","KingdomData","LevelConfig","PetConfig","PhysicsConfig","QuestType","RoomConfig","SkinConfig","TagObject","DailyPopup","ItemDaily","ItemDailyPlus","ItemDailySpecail","EventHomePinManger","EventPopup","Halloween","HalloweenPopup","HelperDataHalloween","HelperEventHalloween","IHelperDataEvent","IHelperEventHomePin","ItemPopupHalloween","FeatureUi","BgCustom","MapLevel","RedirectBox","WinPanel","StickHold","Boss","Character","ColliderGround","ColliderSearch","BigFoot","Demon","Dog","Dragon","Enemies","Ghoster","Shooter","Stealer","ICharacterCollider","MoveCtrl","Girl","GasGO","GemsGO","GemsPool","LavaGO","RockGO","SnowGO","WaterGO","AnimalTrap","BigBang","BigStone","Bomb","BoomTimer","Bullet","FireBall","ItemChest","ItemLoot","MoveVariant","Pow","TeleportCtrl","TimerController","RopeFull","RopePart","ItemPetSwitch","Pet","PetDataManager","PetItem","PetManager","PetPanalSwitch","PetPopup","PetWalkFollowDance","FBInstantAds","FBInstantData","FBInstantGames","FirebaseTracking","GATracking","GameTracking","ItemRankPopup","RankPopup","MyRoom","OpenItem","ReplaceItem","SelectRoomItem","SkinBossUpdater","SkinItem","SkinItemGroup","SkinPopup","SkinWifeItem","SkinWifePopup","TestPhysics","TestSkeleton","ButtonRewardVideo","IconQuest","SettingsPopup","ToastReward"]);